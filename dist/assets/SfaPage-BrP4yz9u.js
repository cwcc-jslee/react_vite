var nu=i=>{throw TypeError(i)};var Xi=(i,l,s)=>l.has(i)||nu("Cannot "+s);var q=(i,l,s)=>(Xi(i,l,"read from private field"),s?s.call(i):l.get(i)),Ge=(i,l,s)=>l.has(i)?nu("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(i):l.set(i,s),Re=(i,l,s,f)=>(Xi(i,l,"write to private field"),f?f.call(i,s):l.set(i,s),s),$e=(i,l,s)=>(Xi(i,l,"access private method"),s);import{r as by,j as a,S as wy,p as ru,a as Ht,s as aa,b as Cs,n as Sy,i as oa,c as su,t as jy,f as Iy,d as Cy,e as iu,g as wu,h as B,u as Ay,k as Su,q as Bt,l as We,o as Gn,m as Ey,B as Fe,v as ws,I as at,M as la,w as pt,C as ya,x as xa,F as Es,G as wt,y as qe,L as ze,z as Ar,T as Ty,D as ju,A as dt,E as oe,H as me,J as au,K as ou,N as Ny}from"./index-BhiX-GDa.js";const Ry=({isOpen:i,onClose:l,title:s,children:f,size:p="md",hideClose:y=!1,footer:x,titleClassName:A="",bodyClassName:T="",footerClassName:P=""})=>{if(!i)return null;const N={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-full mx-4"},b=a.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:l}),a.jsxs("div",{className:`
        relative z-[10000] w-full ${N[p]}
        bg-white rounded-lg shadow-xl
        transform transition-all
        max-h-[90vh] flex flex-col
      `,children:[(s||!y)&&a.jsxs("div",{className:`
            flex items-center justify-between
            px-6 py-4 border-b
            ${A}
          `,children:[s&&a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s}),!y&&a.jsxs("button",{onClick:l,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),a.jsx("div",{className:`
          flex-1 overflow-y-auto px-6 py-4
          ${T}
        `,children:f}),x&&a.jsx("div",{className:`
            flex justify-end gap-2 px-6 py-4 border-t
            ${P}
          `,children:x})]})]});return by.createPortal(b,document.body)};var ht,be,Rr,it,Tn,Zn,gn,zt,Pr,Xn,Jn,Nn,Rn,mn,er,Ie,Sr,ua,ca,fa,ha,da,pa,ga,Iu,bu,Py=(bu=class extends wy{constructor(l,s){super();Ge(this,Ie);Ge(this,ht);Ge(this,be);Ge(this,Rr);Ge(this,it);Ge(this,Tn);Ge(this,Zn);Ge(this,gn);Ge(this,zt);Ge(this,Pr);Ge(this,Xn);Ge(this,Jn);Ge(this,Nn);Ge(this,Rn);Ge(this,mn);Ge(this,er,new Set);this.options=s,Re(this,ht,l),Re(this,zt,null),Re(this,gn,ru()),this.options.experimental_prefetchInRender||q(this,gn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,be).addObserver(this),lu(q(this,be),this.options)?$e(this,Ie,Sr).call(this):this.updateResult(),$e(this,Ie,ha).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ma(q(this,be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ma(q(this,be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$e(this,Ie,da).call(this),$e(this,Ie,pa).call(this),q(this,be).removeObserver(this)}setOptions(l,s){const f=this.options,p=q(this,be);if(this.options=q(this,ht).defaultQueryOptions(l),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ht(this.options.enabled,q(this,be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$e(this,Ie,ga).call(this),q(this,be).setOptions(this.options),f._defaulted&&!aa(this.options,f)&&q(this,ht).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,be),observer:this});const y=this.hasListeners();y&&uu(q(this,be),p,this.options,f)&&$e(this,Ie,Sr).call(this),this.updateResult(s),y&&(q(this,be)!==p||Ht(this.options.enabled,q(this,be))!==Ht(f.enabled,q(this,be))||Cs(this.options.staleTime,q(this,be))!==Cs(f.staleTime,q(this,be)))&&$e(this,Ie,ua).call(this);const x=$e(this,Ie,ca).call(this);y&&(q(this,be)!==p||Ht(this.options.enabled,q(this,be))!==Ht(f.enabled,q(this,be))||x!==q(this,mn))&&$e(this,Ie,fa).call(this,x)}getOptimisticResult(l){const s=q(this,ht).getQueryCache().build(q(this,ht),l),f=this.createResult(s,l);return My(this,f)&&(Re(this,it,f),Re(this,Zn,this.options),Re(this,Tn,q(this,be).state)),f}getCurrentResult(){return q(this,it)}trackResult(l,s){const f={};return Object.keys(l).forEach(p=>{Object.defineProperty(f,p,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(p),s==null||s(p),l[p])})}),f}trackProp(l){q(this,er).add(l)}getCurrentQuery(){return q(this,be)}refetch({...l}={}){return this.fetch({...l})}fetchOptimistic(l){const s=q(this,ht).defaultQueryOptions(l),f=q(this,ht).getQueryCache().build(q(this,ht),s);return f.fetch().then(()=>this.createResult(f,s))}fetch(l){return $e(this,Ie,Sr).call(this,{...l,cancelRefetch:l.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,it)))}createResult(l,s){var V;const f=q(this,be),p=this.options,y=q(this,it),x=q(this,Tn),A=q(this,Zn),P=l!==f?l.state:q(this,Rr),{state:N}=l;let b={...N},M=!1,_;if(s._optimisticResults){const k=this.hasListeners(),X=!k&&lu(l,s),ee=k&&uu(l,f,s,p);(X||ee)&&(b={...b,...Cy(N.data,l.options)}),s._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:j,errorUpdatedAt:O,status:w}=b;if(s.select&&b.data!==void 0)if(y&&b.data===(x==null?void 0:x.data)&&s.select===q(this,Pr))_=q(this,Xn);else try{Re(this,Pr,s.select),_=s.select(b.data),_=iu(y==null?void 0:y.data,_,s),Re(this,Xn,_),Re(this,zt,null)}catch(k){Re(this,zt,k)}else _=b.data;if(s.placeholderData!==void 0&&_===void 0&&w==="pending"){let k;if(y!=null&&y.isPlaceholderData&&s.placeholderData===(A==null?void 0:A.placeholderData))k=y.data;else if(k=typeof s.placeholderData=="function"?s.placeholderData((V=q(this,Jn))==null?void 0:V.state.data,q(this,Jn)):s.placeholderData,s.select&&k!==void 0)try{k=s.select(k),Re(this,zt,null)}catch(X){Re(this,zt,X)}k!==void 0&&(w="success",_=iu(y==null?void 0:y.data,k,s),M=!0)}q(this,zt)&&(j=q(this,zt),_=q(this,Xn),O=Date.now(),w="error");const S=b.fetchStatus==="fetching",Z=w==="pending",Y=w==="error",ce=Z&&S,fe=_!==void 0,F={status:w,fetchStatus:b.fetchStatus,isPending:Z,isSuccess:w==="success",isError:Y,isInitialLoading:ce,isLoading:ce,data:_,dataUpdatedAt:b.dataUpdatedAt,error:j,errorUpdatedAt:O,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>P.dataUpdateCount||b.errorUpdateCount>P.errorUpdateCount,isFetching:S,isRefetching:S&&!Z,isLoadingError:Y&&!fe,isPaused:b.fetchStatus==="paused",isPlaceholderData:M,isRefetchError:Y&&fe,isStale:_a(l,s),refetch:this.refetch,promise:q(this,gn)};if(this.options.experimental_prefetchInRender){const k=Ae=>{F.status==="error"?Ae.reject(F.error):F.data!==void 0&&Ae.resolve(F.data)},X=()=>{const Ae=Re(this,gn,F.promise=ru());k(Ae)},ee=q(this,gn);switch(ee.status){case"pending":l.queryHash===f.queryHash&&k(ee);break;case"fulfilled":(F.status==="error"||F.data!==ee.value)&&X();break;case"rejected":(F.status!=="error"||F.error!==ee.reason)&&X();break}}return F}updateResult(l){const s=q(this,it),f=this.createResult(q(this,be),this.options);if(Re(this,Tn,q(this,be).state),Re(this,Zn,this.options),q(this,Tn).data!==void 0&&Re(this,Jn,q(this,be)),aa(f,s))return;Re(this,it,f);const p={},y=()=>{if(!s)return!0;const{notifyOnChangeProps:x}=this.options,A=typeof x=="function"?x():x;if(A==="all"||!A&&!q(this,er).size)return!0;const T=new Set(A??q(this,er));return this.options.throwOnError&&T.add("error"),Object.keys(q(this,it)).some(P=>{const N=P;return q(this,it)[N]!==s[N]&&T.has(N)})};(l==null?void 0:l.listeners)!==!1&&y()&&(p.listeners=!0),$e(this,Ie,Iu).call(this,{...p,...l})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$e(this,Ie,ha).call(this)}},ht=new WeakMap,be=new WeakMap,Rr=new WeakMap,it=new WeakMap,Tn=new WeakMap,Zn=new WeakMap,gn=new WeakMap,zt=new WeakMap,Pr=new WeakMap,Xn=new WeakMap,Jn=new WeakMap,Nn=new WeakMap,Rn=new WeakMap,mn=new WeakMap,er=new WeakMap,Ie=new WeakSet,Sr=function(l){$e(this,Ie,ga).call(this);let s=q(this,be).fetch(this.options,l);return l!=null&&l.throwOnError||(s=s.catch(Sy)),s},ua=function(){$e(this,Ie,da).call(this);const l=Cs(this.options.staleTime,q(this,be));if(oa||q(this,it).isStale||!su(l))return;const f=jy(q(this,it).dataUpdatedAt,l)+1;Re(this,Nn,setTimeout(()=>{q(this,it).isStale||this.updateResult()},f))},ca=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,be)):this.options.refetchInterval)??!1},fa=function(l){$e(this,Ie,pa).call(this),Re(this,mn,l),!(oa||Ht(this.options.enabled,q(this,be))===!1||!su(q(this,mn))||q(this,mn)===0)&&Re(this,Rn,setInterval(()=>{(this.options.refetchIntervalInBackground||Iy.isFocused())&&$e(this,Ie,Sr).call(this)},q(this,mn)))},ha=function(){$e(this,Ie,ua).call(this),$e(this,Ie,fa).call(this,$e(this,Ie,ca).call(this))},da=function(){q(this,Nn)&&(clearTimeout(q(this,Nn)),Re(this,Nn,void 0))},pa=function(){q(this,Rn)&&(clearInterval(q(this,Rn)),Re(this,Rn,void 0))},ga=function(){const l=q(this,ht).getQueryCache().build(q(this,ht),this.options);if(l===q(this,be))return;const s=q(this,be);Re(this,be,l),Re(this,Rr,l.state),this.hasListeners()&&(s==null||s.removeObserver(this),l.addObserver(this))},Iu=function(l){wu.batch(()=>{l.listeners&&this.listeners.forEach(s=>{s(q(this,it))}),q(this,ht).getQueryCache().notify({query:q(this,be),type:"observerResultsUpdated"})})},bu);function Fy(i,l){return Ht(l.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&l.retryOnMount===!1)}function lu(i,l){return Fy(i,l)||i.state.data!==void 0&&ma(i,l,l.refetchOnMount)}function ma(i,l,s){if(Ht(l.enabled,i)!==!1){const f=typeof s=="function"?s(i):s;return f==="always"||f!==!1&&_a(i,l)}return!1}function uu(i,l,s,f){return(i!==l||Ht(f.enabled,i)===!1)&&(!s.suspense||i.state.status!=="error")&&_a(i,s)}function _a(i,l){return Ht(l.enabled,i)!==!1&&i.isStaleByTime(Cs(l.staleTime,i))}function My(i,l){return!aa(i.getCurrentResult(),l)}var Cu=B.createContext(!1),Oy=()=>B.useContext(Cu);Cu.Provider;function Dy(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var Ly=B.createContext(Dy()),$y=()=>B.useContext(Ly);function By(i,l){return typeof i=="function"?i(...l):!!i}function cu(){}var Yy=(i,l)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(l.isReset()||(i.retryOnMount=!1))},ky=i=>{B.useEffect(()=>{i.clearReset()},[i])},Wy=({result:i,errorResetBoundary:l,throwOnError:s,query:f})=>i.isError&&!l.isReset()&&!i.isFetching&&f&&By(s,[i.error,f]),Uy=i=>{const l=i.staleTime;i.suspense&&(i.staleTime=typeof l=="function"?(...s)=>Math.max(l(...s),1e3):Math.max(l??1e3,1e3),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3)))},qy=(i,l)=>i.isLoading&&i.isFetching&&!l,zy=(i,l)=>(i==null?void 0:i.suspense)&&l.isPending,fu=(i,l,s)=>l.fetchOptimistic(i).catch(()=>{s.clearReset()});function Hy(i,l,s){var b,M,_,j,O;const f=Ay(),p=Oy(),y=$y(),x=f.defaultQueryOptions(i);(M=(b=f.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||M.call(b,x),x._optimisticResults=p?"isRestoring":"optimistic",Uy(x),Yy(x,y),ky(y);const A=!f.getQueryCache().get(x.queryHash),[T]=B.useState(()=>new l(f,x)),P=T.getOptimisticResult(x),N=!p&&i.subscribed!==!1;if(B.useSyncExternalStore(B.useCallback(w=>{const S=N?T.subscribe(wu.batchCalls(w)):cu;return T.updateResult(),S},[T,N]),()=>T.getCurrentResult(),()=>T.getCurrentResult()),B.useEffect(()=>{T.setOptions(x,{listeners:!1})},[x,T]),zy(x,P))throw fu(x,T,y);if(Wy({result:P,errorResetBoundary:y,throwOnError:x.throwOnError,query:f.getQueryCache().get(x.queryHash)}))throw P.error;if((j=(_=f.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||j.call(_,x,P),x.experimental_prefetchInRender&&!oa&&qy(P,p)){const w=A?fu(x,T,y):(O=f.getQueryCache().get(x.queryHash))==null?void 0:O.promise;w==null||w.catch(cu).finally(()=>{T.updateResult()})}return x.notifyOnChangeProps?P:T.trackResult(P)}function Au(i,l){return Hy(i,Py)}var As={exports:{}},Vy=As.exports,hu;function Gy(){return hu||(hu=1,function(i,l){(function(s,f){i.exports=f()})(Vy,function(){var s=1e3,f=6e4,p=36e5,y="millisecond",x="second",A="minute",T="hour",P="day",N="week",b="month",M="quarter",_="year",j="date",O="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var D=["th","st","nd","rd"],U=H%100;return"["+H+(D[(U-20)%10]||D[U]||D[0])+"]"}},Y=function(H,D,U){var K=String(H);return!K||K.length>=D?H:""+Array(D+1-K.length).join(U)+H},ce={s:Y,z:function(H){var D=-H.utcOffset(),U=Math.abs(D),K=Math.floor(U/60),W=U%60;return(D<=0?"+":"-")+Y(K,2,"0")+":"+Y(W,2,"0")},m:function H(D,U){if(D.date()<U.date())return-H(U,D);var K=12*(U.year()-D.year())+(U.month()-D.month()),W=D.clone().add(K,b),ae=U-W<0,se=D.clone().add(K+(ae?-1:1),b);return+(-(K+(U-W)/(ae?W-se:se-W))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:b,y:_,w:N,d:P,D:j,h:T,m:A,s:x,ms:y,Q:M}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},fe="en",Se={};Se[fe]=Z;var F="$isDayjsObject",V=function(H){return H instanceof Ae||!(!H||!H[F])},k=function H(D,U,K){var W;if(!D)return fe;if(typeof D=="string"){var ae=D.toLowerCase();Se[ae]&&(W=ae),U&&(Se[ae]=U,W=ae);var se=D.split("-");if(!W&&se.length>1)return H(se[0])}else{var ge=D.name;Se[ge]=D,W=ge}return!K&&W&&(fe=W),W||!K&&fe},X=function(H,D){if(V(H))return H.clone();var U=typeof D=="object"?D:{};return U.date=H,U.args=arguments,new Ae(U)},ee=ce;ee.l=k,ee.i=V,ee.w=function(H,D){return X(H,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var Ae=function(){function H(U){this.$L=k(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[F]=!0}var D=H.prototype;return D.parse=function(U){this.$d=function(K){var W=K.date,ae=K.utc;if(W===null)return new Date(NaN);if(ee.u(W))return new Date;if(W instanceof Date)return new Date(W);if(typeof W=="string"&&!/Z$/i.test(W)){var se=W.match(w);if(se){var ge=se[2]-1||0,L=(se[7]||"0").substring(0,3);return ae?new Date(Date.UTC(se[1],ge,se[3]||1,se[4]||0,se[5]||0,se[6]||0,L)):new Date(se[1],ge,se[3]||1,se[4]||0,se[5]||0,se[6]||0,L)}}return new Date(W)}(U),this.init()},D.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},D.$utils=function(){return ee},D.isValid=function(){return this.$d.toString()!==O},D.isSame=function(U,K){var W=X(U);return this.startOf(K)<=W&&W<=this.endOf(K)},D.isAfter=function(U,K){return X(U)<this.startOf(K)},D.isBefore=function(U,K){return this.endOf(K)<X(U)},D.$g=function(U,K,W){return ee.u(U)?this[K]:this.set(W,U)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(U,K){var W=this,ae=!!ee.u(K)||K,se=ee.p(U),ge=function(Qe,Be){var gt=ee.w(W.$u?Date.UTC(W.$y,Be,Qe):new Date(W.$y,Be,Qe),W);return ae?gt:gt.endOf(P)},L=function(Qe,Be){return ee.w(W.toDate()[Qe].apply(W.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(Be)),W)},$=this.$W,ie=this.$M,J=this.$D,ye="set"+(this.$u?"UTC":"");switch(se){case _:return ae?ge(1,0):ge(31,11);case b:return ae?ge(1,ie):ge(0,ie+1);case N:var St=this.$locale().weekStart||0,ot=($<St?$+7:$)-St;return ge(ae?J-ot:J+(6-ot),ie);case P:case j:return L(ye+"Hours",0);case T:return L(ye+"Minutes",1);case A:return L(ye+"Seconds",2);case x:return L(ye+"Milliseconds",3);default:return this.clone()}},D.endOf=function(U){return this.startOf(U,!1)},D.$set=function(U,K){var W,ae=ee.p(U),se="set"+(this.$u?"UTC":""),ge=(W={},W[P]=se+"Date",W[j]=se+"Date",W[b]=se+"Month",W[_]=se+"FullYear",W[T]=se+"Hours",W[A]=se+"Minutes",W[x]=se+"Seconds",W[y]=se+"Milliseconds",W)[ae],L=ae===P?this.$D+(K-this.$W):K;if(ae===b||ae===_){var $=this.clone().set(j,1);$.$d[ge](L),$.init(),this.$d=$.set(j,Math.min(this.$D,$.daysInMonth())).$d}else ge&&this.$d[ge](L);return this.init(),this},D.set=function(U,K){return this.clone().$set(U,K)},D.get=function(U){return this[ee.p(U)]()},D.add=function(U,K){var W,ae=this;U=Number(U);var se=ee.p(K),ge=function(ie){var J=X(ae);return ee.w(J.date(J.date()+Math.round(ie*U)),ae)};if(se===b)return this.set(b,this.$M+U);if(se===_)return this.set(_,this.$y+U);if(se===P)return ge(1);if(se===N)return ge(7);var L=(W={},W[A]=f,W[T]=p,W[x]=s,W)[se]||1,$=this.$d.getTime()+U*L;return ee.w($,this)},D.subtract=function(U,K){return this.add(-1*U,K)},D.format=function(U){var K=this,W=this.$locale();if(!this.isValid())return W.invalidDate||O;var ae=U||"YYYY-MM-DDTHH:mm:ssZ",se=ee.z(this),ge=this.$H,L=this.$m,$=this.$M,ie=W.weekdays,J=W.months,ye=W.meridiem,St=function(Be,gt,Yt,_n){return Be&&(Be[gt]||Be(K,ae))||Yt[gt].slice(0,_n)},ot=function(Be){return ee.s(ge%12||12,Be,"0")},Qe=ye||function(Be,gt,Yt){var _n=Be<12?"AM":"PM";return Yt?_n.toLowerCase():_n};return ae.replace(S,function(Be,gt){return gt||function(Yt){switch(Yt){case"YY":return String(K.$y).slice(-2);case"YYYY":return ee.s(K.$y,4,"0");case"M":return $+1;case"MM":return ee.s($+1,2,"0");case"MMM":return St(W.monthsShort,$,J,3);case"MMMM":return St(J,$);case"D":return K.$D;case"DD":return ee.s(K.$D,2,"0");case"d":return String(K.$W);case"dd":return St(W.weekdaysMin,K.$W,ie,2);case"ddd":return St(W.weekdaysShort,K.$W,ie,3);case"dddd":return ie[K.$W];case"H":return String(ge);case"HH":return ee.s(ge,2,"0");case"h":return ot(1);case"hh":return ot(2);case"a":return Qe(ge,L,!0);case"A":return Qe(ge,L,!1);case"m":return String(L);case"mm":return ee.s(L,2,"0");case"s":return String(K.$s);case"ss":return ee.s(K.$s,2,"0");case"SSS":return ee.s(K.$ms,3,"0");case"Z":return se}return null}(Be)||se.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(U,K,W){var ae,se=this,ge=ee.p(K),L=X(U),$=(L.utcOffset()-this.utcOffset())*f,ie=this-L,J=function(){return ee.m(se,L)};switch(ge){case _:ae=J()/12;break;case b:ae=J();break;case M:ae=J()/3;break;case N:ae=(ie-$)/6048e5;break;case P:ae=(ie-$)/864e5;break;case T:ae=ie/p;break;case A:ae=ie/f;break;case x:ae=ie/s;break;default:ae=ie}return W?ae:ee.a(ae)},D.daysInMonth=function(){return this.endOf(b).$D},D.$locale=function(){return Se[this.$L]},D.locale=function(U,K){if(!U)return this.$L;var W=this.clone(),ae=k(U,K,!0);return ae&&(W.$L=ae),W},D.clone=function(){return ee.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},H}(),Je=Ae.prototype;return X.prototype=Je,[["$ms",y],["$s",x],["$m",A],["$H",T],["$W",P],["$M",b],["$y",_],["$D",j]].forEach(function(H){Je[H[1]]=function(D){return this.$g(D,H[0],H[1])}}),X.extend=function(H,D){return H.$i||(H(D,Ae,X),H.$i=!0),X},X.locale=k,X.isDayjs=V,X.unix=function(H){return X(1e3*H)},X.en=Se[fe],X.Ls=Se,X.p={},X})}(As)),As.exports}var Ky=Gy();const Ke=Su(Ky),Eu=i=>{const{pagination:l={start:0,limit:25},filters:s={},dateRange:f,probability:p=null}=i,y=[{is_deleted:{$eq:!1}},{recognition_date:{$gte:f.startDate,$lte:f.endDate}}];p&&(p==="confirmed"?y.push({is_confirmed:{$eq:!0}}):y.push({is_confirmed:{$eq:!1},probability:{$eq:p}})),console.log(">> basefilter : ",y);const x={};s.customer&&(x.customer={id:{$eq:s.customer}}),s.name&&(x.name={$contains:s.name}),s.billingType&&y.push({billing_type:{$eq:s.billingType}}),s.sfaClassification&&(x.sfa_classification={id:{$eq:s.sfaClassification}}),s.sfaSalesType&&(x.sfa_sales_type={id:{$eq:s.sfaSalesType}}),(s.salesItem||s.team)&&(!s.salesItem||!s.team?x.sfa_by_items={$contains:s.salesItem?s.salesItem:s.team}:x.sfa_by_items={$and:[{$contains:s.salesItem},{$contains:s.team}]}),Object.keys(x).length>0&&y.push({sfa:x});const A={filters:{$and:y},fields:["billing_type","is_confirmed","probability","amount","profit_amount","profit_config","recognition_date","scheduled_date"],populate:{sfa:{fields:["name","sfa_by_items","has_partner","is_project"],populate:{customer:{fields:["name"]},selling_partner:{fields:["name"]},sfa_classification:{fields:["name"]}}}},pagination:{start:l.current?(l.current-1)*l.pageSize:l.start,limit:l.pageSize||l.limit},sort:["recognition_date:asc"]};return Bt.stringify(A,{encodeValuesOnly:!0})},Tu=i=>Bt.stringify({filters:{id:{$eq:i}},fields:["name","is_project","total_price","sfa_by_items","has_partner","description"],populate:{customer:{fields:["name"]},selling_partner:{fields:["name"]},sfa_classification:{fields:["name"]},sfa_sales_type:{fields:["name"]},sfa_by_payments:{filters:{is_deleted:{$eq:!1}},sort:["id:asc"],fields:["billing_type","is_confirmed","probability","amount","profit_amount","recognition_date","scheduled_date","profit_config","memo"],populate:{sfa_by_payment_histories:{fields:["is_confirmed","probability","amount","profit_amount","recognition_date","scheduled_date","profit_config","memo"],sort:["id:desc"]}}}}},{encodeValuesOnly:!0}),rn=i=>{const l=Number(i);return isNaN(l)?0:l},Er={FILTER_FIELD_MAP:{name:"name",customer:"customer",hasPartner:"has_partner",sellingPartner:"selling_partner",sfaSalesType:"sfa_sales_type",sfaClassification:"sfa_classification",itemAmount:"total_price",isProject:"is_project",description:"description",probability:"probability",billingType:"billing_type"},transformSalesByItems:i=>{console.group("Sales Items Transform"),console.log("Input:",{type:typeof i,value:i});const l=i.map(f=>({item_id:f.itemId||null,item_name:f.itemName||"",team_id:f.teamId||null,team_name:f.teamName||"",item_price:rn(f.amount)})),s=JSON.stringify(l);return console.log("Output:",{type:typeof l,value:l,isArray:Array.isArray(l)}),console.groupEnd(),s},transformSalesByPayments:i=>{console.group("Sales Payments Transform"),console.log("Input:",{type:typeof i,value:i});const l={billing_type:i.billingType,is_confirmed:i.isConfirmed,probability:rn(i.probability),amount:rn(i.amount),profit_config:(()=>{const s={is_profit:i.isProfit,margin_profit_value:rn(i.marginProfitValue)};return JSON.stringify(s)})(),profit_amount:Math.floor(rn(i.profitAmount)),scheduled_date:i.scheduledDate||null,recognition_date:i.recognitionDate,memo:i.memo};return console.log("Output:",{type:typeof l,value:l,isArray:Array.isArray(l)}),console.groupEnd(),l},transformSfaFields:i=>{console.log("Transform SFA fields input:",i);const l={name:i.name,customer:i.customer,has_partner:i.hasPartner,selling_partner:i.hasPartner?i.sellingPartner:null,sfa_sales_type:rn(i.sfaSalesType),sfa_classification:rn(i.sfaClassification),total_price:rn(i.itemAmount),sfa_by_items:Er.transformSalesByItems(i.salesByItems),is_project:i.isProject,description:i.description||""};return console.log("Transform base fields output:",l),l},transformToStrapiFilter:i=>{if(console.group("Strapi Filter Transform"),console.log("Input filters:",i),!i||typeof i!="object")return console.log("No filters to transform"),console.groupEnd(),{};const l={};i.customer&&i.customer!==""&&(l.customer={id:{$eq:i.customer}}),i.name&&i.name!==""&&(l.name={$contains:i.name}),i.sfa_item&&i.sfa_item!==""?l.sfa_item_price={$contains:`"sfa_item_name":"${i.sfa_item}"`}:i.sfa_classification&&i.sfa_classification!==""&&(l.sfa_classification={id:{$eq:i.sfa_classification}});const s=Object.keys(l).length>0?{sfa:l}:{};return console.log("Output Strapi filters:",s),console.groupEnd(),s},transformFilters:i=>{if(console.group("Filters Transform"),console.log("Input filters:",i),!i||typeof i!="object")return console.log("No filters to transform"),console.groupEnd(),{};const l=Object.entries(i).reduce((s,[f,p])=>{if(p==null||p==="")return s;const y=Er.FILTER_FIELD_MAP[f];return y?["sfa_sales_type","sfa_classification","total_price"].includes(y)?s[y]=rn(p):s[y]=p:s[f]=p,s},{});return console.log("Output transformed filters:",l),console.groupEnd(),l}},Ji=i=>{var l;return(l=i==null?void 0:i.data)!=null&&l.data?{data:i.data.data,meta:i.data.meta}:{data:[],meta:{pagination:{total:0}}}},br=(i,l)=>{var s,f,p;throw console.error(l||"API Error:",i),new Error(((p=(f=(s=i.response)==null?void 0:s.data)==null?void 0:f.error)==null?void 0:p.message)||i.message||l||"An error occurred")},du={getSfaList:async i=>{try{const l={startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},s={pagination:i.pagination,filters:i.filters,dateRange:i.dateRange||l,probability:i.probability},f=Eu(s),p=await We.get(`/api/sfa-by-payments?${f}`);return Ji(p)}catch(l){br(l,"Failed to fetch SFA list")}},getSfaDetail:async i=>{var l,s;try{const f=Tu(i),p=await We.get(`/api/sfas?${f}`);if(!((s=(l=p.data)==null?void 0:l.data)!=null&&s[0]))throw new Error("SFA data not found");return p.data.data[0]}catch(f){br(f,"Failed to fetch SFA detail")}},getMonthlyStats:async(i,l)=>{var s;try{const f=await We.get("/api/sfa-monthly-sales-stats/forecast",{params:{startDate:i,endDate:l}});if(!((s=f.data)!=null&&s.data)||!Array.isArray(f.data.data))return{};const p=f.data.data.reduce((y,x)=>(y[x.group_name]={revenue:Number(x.total_amount)||0,profit:Number(x.total_profit_amount)||0},y),{});return p.confirmed||(p.confirmed={revenue:0,profit:0}),p}catch(f){br(f,"Failed to fetch monthly stats")}},getItems:async i=>{try{const l=Bt.stringify({filters:{sfa_classification:{id:{$eq:i}}},sort:["sort:asc"]},{encodeValuesOnly:!0}),s=await We.get(`/api/sfa-items?${l}`);return Ji(s)}catch(l){br(l,"Failed to fetch items")}},getCodebook:async i=>{try{const l=Bt.stringify({fields:["code","name","sort"],populate:{codetype:{fields:["type","name"]}},filters:{$and:[{used:{$eq:!0}},{codetype:{type:{$eq:i}}}]},sort:["sort:asc"],pagination:{start:0,limit:50}},{encodeValuesOnly:!0}),s=await We.get(`/api/codebooks?${l}`);return Ji(s)}catch(l){br(l,"Failed to fetch codebook")}}},Nu=B.createContext(null),xn=()=>{const i=B.useContext(Nu);if(!i)throw new Error("useSfa must be used within SfaProvider");return i},Qy=({children:i})=>{const[l,s]=B.useState([]),[f,p]=B.useState(!1),[y,x]=B.useState(null),A={dateRange:{startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")}},[T,P]=B.useState({current:1,pageSize:20,total:0}),[N,b]=B.useState({mode:"default",components:{monthlyStatus:!0,sfaTable:!0,searchForm:!1,forecastTable:!1}}),[M,_]=B.useState({visible:!1,controlMode:null,featureMode:null,data:null}),j=()=>{fe({...A,pagination:{current:1,pageSize:T.pageSize}})},O=V=>{console.group("SfaProvider - setPage"),console.log("Current:",T.current,"New:",V),P(k=>({...k,current:Number(V)})),console.groupEnd()},w=V=>{console.group("SfaProvider - setPageSize"),console.log("Current:",T.pageSize,"New:",V),P(k=>({...k,current:1,pageSize:Number(V)})),console.groupEnd()},S=V=>{console.group("SfaProvider - setPageTotalSize"),console.log("Totalsize:",T.total,"New:",V),P(k=>({...k,total:Number(V)})),console.groupEnd()},Z=V=>{const k={default:{mode:"default",components:{monthlyStatus:!0,sfaTable:!0,searchForm:!1,forecastTable:!1}},search:{mode:"search",components:{monthlyStatus:!1,sfaTable:!0,searchForm:!0,forecastTable:!1}},forecast:{mode:"forecast",components:{monthlyStatus:!1,sfaTable:!1,searchForm:!1,forecastTable:!0}}};b(k[V]||k.default)},Y=V=>{_(k=>({...k,...V}))},ce=()=>{_({visible:!1,controlMode:null,featureMode:null,data:null})},fe=B.useCallback(async(V={})=>{var k,X,ee,Ae,Je;p(!0);try{const{dateRange:H,probability:D,...U}=(V==null?void 0:V.filters)||{},K={dateRange:H||A.dateRange,probability:D||null,filters:{...U},pagination:{current:((k=V.pagination)==null?void 0:k.current)||T.current,pageSize:((X=V.pagination)==null?void 0:X.pageSize)||T.pageSize}},W=await du.getSfaList(K);return s(W.data),T.total!==W.meta.pagination.total&&P(ae=>({...ae,total:W.meta.pagination.total})),x(null),W.data}catch(H){const D=((Je=(Ae=(ee=H.response)==null?void 0:ee.data)==null?void 0:Ae.error)==null?void 0:Je.message)||H.message;x(D),s([])}finally{p(!1)}},[T.current,T.pageSize]);Gn.useEffect(()=>{console.log("Initial data loading"),fe()},[fe]);const F={sfaData:l,loading:f,error:y,pagination:T,fetchSfaList:fe,fetchSfaDetail:async V=>{try{const k=await du.getSfaDetail(V);_({visible:!0,controlMode:"view",featureMode:null,data:k})}catch(k){return x(k.message),null}finally{}},setPage:O,setPageSize:w,setPageTotalSize:S,setError:x,pageLayout:N,setLayout:Z,resetFilters:j,drawerState:M,setDrawer:Y,setDrawerClose:ce,setLoading:p,setSfaData:s};return a.jsx(Nu.Provider,{value:F,children:i})},Ru=()=>{const{setSfaData:i,setLoading:l,setError:s,pagination:f,setPage:p,setPageSize:y,setPageTotalSize:x,setLayout:A,fetchSfaList:T}=xn(),[P,N]=B.useState({dateRange:{startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},name:"",customer:"",sfaSalesType:"",sfaClassification:"",salesItem:"",team:"",billingType:"",isConfirmed:"",probability:""}),b=async(j,O=null)=>{console.group("updateMonthlyFilter"),console.log("YearMonth:",j,"Probability:",O);const w=Ke(j),Z={dateRange:{startDate:w.startOf("month").format("YYYY-MM-DD"),endDate:w.endOf("month").format("YYYY-MM-DD")},probability:O};return T({filters:Z,pagination:{current:1,pageSize:f.pageSize}})},M=async j=>(console.group("updateDetailFilter"),console.log("Search Form Data:",j),console.groupEnd(),T({filters:j,pagination:{current:1,pageSize:f.pageSize}})),_=B.useCallback(async()=>{console.group("resetFilters");const j={dateRange:{startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},name:"",customer:"",sfaSalesType:"",sfaClassification:"",salesItem:"",team:"",billingType:"",isConfirmed:"",probability:""};return console.log("Initial Filters:",j),N(j),console.groupEnd(),T({...j,pagination:{current:1,pageSize:f.pageSize}})},[f.pageSize,T]);return{filters:P,updateMonthlyFilter:b,updateDetailFilter:M,resetFilters:_}};var ea={exports:{}},ta,pu;function Zy(){if(pu)return ta;pu=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ta=i,ta}var na,gu;function Xy(){if(gu)return na;gu=1;var i=Zy();function l(){}function s(){}return s.resetWarningCache=l,na=function(){function f(x,A,T,P,N,b){if(b!==i){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}f.isRequired=f;function p(){return f}var y={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:p,element:f,elementType:f,instanceOf:p,node:f,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:s,resetWarningCache:l};return y.PropTypes=y,y},na}var mu;function Jy(){return mu||(mu=1,ea.exports=Xy()()),ea.exports}var e0=Jy();const qt=Su(e0),Pn={getSfaList:async i=>{try{const l={startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},s={pagination:i.pagination,filters:i.filters,dateRange:i.dateRange||l,probability:i.probability},f=Eu(s),p=await We.get(`/api/sfa-by-payments?${f}`);return{data:p.data.data,meta:p.data.meta}}catch(l){throw console.error("Failed to fetch SFA list:",l),new Error("Failed to fetch SFA list")}},getSfaDetail:async i=>{try{const l=Tu(i);return console.log(`getSfaDetail query : ${l}`),(await We.get(`/api/sfas?${l}`)).data}catch(l){throw console.error("Failed to fetch SFA detail:",l),new Error("Failed to fetch SFA detail")}},getSfaMonthStats:async(i,l)=>{try{console.log(">>>Fetching data for:",{startDate:i,endDate:l});const s=await We.get("/api/sfa-monthly-sales-stats/forecast",{params:{startDate:i,endDate:l}});if(console.log("API Response:",s.data),!s.data||!s.data.data||!Array.isArray(s.data.data))return console.log("No data returned from API"),{};const f=s.data.data.reduce((p,y)=>(p[y.group_name]={revenue:Number(y.total_amount)||0,profit:Number(y.total_profit_amount)||0},p),{});return f.confirmed||(f.confirmed={revenue:0,profit:0}),console.log(`>> ${i}/${l} >>Processed data:`,f),f}catch(s){throw console.error(`Failed to fetch SFA stats for ${year}-${month}:`,s),new Error(`Failed to fetch monthly sales stats: ${s.message}`)}},fetchItems:async i=>{const l=Bt.stringify({filters:{sfa_classification:{id:{$eq:i}}},sort:["sort:asc"]},{encodeValuesOnly:!0});return We.get(`/api/sfa-items?${l}`)},fetchCodebook:async i=>{const l={fields:["code","name","sort"],populate:{codetype:{fields:["type","name"]}},filters:{$and:[{used:{$eq:!0}},{codetype:{type:{$eq:i}}}]},sort:["sort:asc"],pagination:{start:0,limit:50}},s=Bt.stringify(l,{encodeValuesOnly:!0});return We.get(`/api/codebooks?${s}`)}},t0={MAX_SALES_ITEMS:3,MAX_SALES_PAYMENTS:3},yu={itemId:"",itemName:"",teamId:"",teamName:"",amount:""},n0={billingType:"",isConfirmed:!1,probability:"",amount:"",profitAmount:"",isProfit:!1,marginProfitValue:"",recognitionDate:"",scheduledDate:"",memo:""},wr={name:"",sfaSalesType:"",sfaClassification:"",customer:"",sellingPartner:"",itemAmount:"",paymentAmount:"",description:"",salesByItems:[],salesByPayments:[]},r0={id:null,documentId:null},s0=i=>{const[l,s]=B.useState(wr),[f,p]=B.useState({}),[y,x]=B.useState(!1),[A,T]=B.useState({data:[]}),[P,N]=B.useState({data:[]}),[b,M]=B.useState({data:[]}),[_,j]=B.useState(!1),[O,w]=B.useState(!1),[S,Z]=B.useState(r0);B.useState([]),B.useEffect(()=>{console.log("Form Data Changed:",{previous:wr,current:l,changes:Object.keys(l).reduce((L,$)=>(l[$]!==wr[$]&&(L[$]={from:wr[$],to:l[$]}),L),{})})},[l]),B.useEffect(()=>{const L=l.salesByItems.reduce((ie,J)=>ie+(parseInt(J.amount)||0),0),$=l.salesByPayments.reduce((ie,J)=>ie+(parseInt(J.amount)||0),0);s(ie=>({...ie,itemAmount:L.toString(),paymentAmount:$.toString()}))},[l.salesByItems,l.salesByPayments]);const Y=B.useCallback(async L=>{if(!L){T({data:[]});return}j(!0);try{const $=await Pn.fetchItems(L);T($.data)}catch($){console.error("Failed to fetch items:",$),T({data:[]})}finally{j(!1)}},[]),ce=async()=>{w(!0);try{const[L,$]=await Promise.all([Pn.fetchCodebook("re_payment_method"),Pn.fetchCodebook("sfa_percentage")]);N(L.data),M($.data)}catch(L){console.error("Failed to fetch payment data:",L),N({data:[]}),M({data:[]})}finally{w(!1)}},fe=L=>{const{name:$,value:ie}=L.target;s(J=>({...J,[$]:ie})),$==="sfaClassification"&&ie&&(Y(ie),s(J=>({...J,salesByItems:J.salesByItems.map(ye=>({...ye,itemName:""}))}))),f[$]&&p(J=>({...J,[$]:void 0}))},Se=L=>{s($=>({...$,customer:L.id})),f.customer&&p($=>({...$,customer:void 0}))},F=()=>{s(wr),p({})},V=(L,$)=>{s(ie=>({...ie,[L]:$}))},k=L=>{s($=>({...$,...L}))},X=()=>{l.salesByItems.length<3&&s(L=>({...L,salesByItems:[...L.salesByItems,{...yu}]}))},ee=L=>{s($=>{const ie=[...$.salesByItems];return ie.splice(L,1),p(J=>{const ye={...J};return delete ye[`salesItems.${L}.productType`],delete ye[`salesItems.${L}.teamName`],delete ye[`salesItems.${L}.amount`],ye}),{...$,salesByItems:ie.map(J=>({itemId:J.itemId||"",itemName:J.itemName||"",teamId:J.teamId||"",teamName:J.teamName||"",amount:J.amount||""}))}})},Ae=async()=>{if(!(l.salesByPayments.length>=3))try{!O&&!P.data.length&&await ce(),s(L=>({...L,salesByPayments:[...L.salesByPayments,{...n0}]}))}catch(L){console.error("Failed to add sales payment:",L)}},Je=L=>{s($=>({...$,salesByPayments:$.salesByPayments.filter((ie,J)=>J!==L)}))},H=(L,$,ie)=>{s(J=>{const ye=[...J.salesByItems];return typeof $=="string"?ye[L]={...ye[L],[$]:ie}:typeof $=="object"&&(ye[L]={...ye[L],...$}),{...J,salesByItems:ye}})},D=(L,$,ie)=>{s(J=>{const ye=[...J.salesByPayments];return ye[L]={...ye[L],[$]:ie},{...J,salesByPayments:ye}})},U=B.useCallback((L,$,ie)=>{s(J=>{const ye=[...J.salesByItems];return typeof $=="string"?ye[L]={...ye[L],[$]:ie}:ye[L]={...ye[L],...$},{...J,salesByItems:ye}})},[s]),K=B.useCallback(()=>{l.salesByItems.length<t0.MAX_SALES_ITEMS&&s(L=>({...L,salesByItems:[...L.salesByItems,{...yu}]}))},[l.salesByItems.length,s]),W=B.useCallback(L=>{s($=>({...$,salesByItems:$.salesByItems.filter((ie,J)=>J!==L)}))},[s]);return{formData:l,errors:f,updateFormField:fe,setFormData:s,setErrors:p,isSubmitting:y,setIsSubmitting:x,updateItem:U,addItem:K,removeItem:W,itemsData:A,isItemsLoading:_,paymentData:P,percentageData:b,isPaymentDataLoading:O,handleCustomerSelect:Se,resetForm:F,setFieldValue:V,setFieldValues:k,handleAddSalesItem:X,handleRemoveSalesItem:ee,handleAddPayment:Ae,handleRemovePayment:Je,handleSalesItemChange:H,handlePaymentChange:D,selectedPaymentIds:S,togglePaymentSelection:async L=>{console.log(">>togglePaymentSelection>> [paymentId] : ",L);const $=i.data.sfa_by_payments.find(ie=>ie.documentId===L.documentId);console.log(">>togglePaymentSelection>> [payment] : ",$);try{s(ie=>{var J,ye,St,ot,Qe,Be;return{...ie,salesByPayments:[{id:$.id,documentId:$.documentId,billingType:$.billing_type||"",isConfirmed:$.is_confirmed||!1,probability:((J=$.probability)==null?void 0:J.toString())||"",amount:((ye=$.amount)==null?void 0:ye.toString())||"",profitAmount:((St=$.profit_amount)==null?void 0:St.toString())||"",isProfit:((ot=$.profit_config)==null?void 0:ot.is_profit)||!1,marginProfitValue:((Be=(Qe=$.profit_config)==null?void 0:Qe.margin_profit_value)==null?void 0:Be.toString())||"",recognitionDate:$.recognition_date||"",scheduledDate:$.scheduled_date||"",memo:$.memo||"",sfa:$.sfa||null}]}})}catch(ie){console.error("Failed to edit sales payment:",ie)}},resetPaymentForm:()=>{try{s(L=>({...L,salesByPayments:[]}))}catch(L){console.error("Reset 중 오류 발생:",L)}},handleEditPayment:async()=>{if(!(l.salesByPayments.length>=3))try{!O&&!P.data.length&&await ce()}catch(L){console.error("Failed to load payment:",L)}}}},Pt={BASIC_INFO:"basicInfo",SALES_ITEMS:"salesItems",PAYMENTS:"payments"},i0={[Pt.BASIC_INFO]:"기본 정보",[Pt.SALES_ITEMS]:"사업부 매출",[Pt.PAYMENTS]:"결제 매출"},a0={sfaSalesType:"매출유형",sfaClassification:"매출구분",customer:"고객사",name:"건명"},o0={billingType:"결제구분",probability:"매출확률",amount:"매출액",marginProfitValue:"이익률/이익금",recognitionDate:"매출인식일자"},xu={MAX_SALES_ITEMS:3,MAX_PAYMENTS:3,MIN_MARGIN:0,MAX_MARGIN:100},pn={REQUIRED_FIELD:i=>`${i}을(를) 입력해주세요`,INTEGER_ONLY:"정수만 입력 가능합니다",MARGIN_RANGE:"이익률은 0-100 사이의 값을 입력해주세요",MARGIN_LESS_THAN_AMOUNT:"이익금은 매출액보다 작아야 합니다",MIN_SALES_ITEMS:"최소 하나의 사업부 매출을 등록해주세요",MIN_PAYMENTS:"최소 하나의 결제 매출을 등록해주세요",ITEM_FIELDS:(i,l)=>`${i}번 항목: ${l.join(", ")}을(를) 입력해주세요`},ra=i=>{if(!i)return"";if(typeof i=="string")return i;if(typeof i=="object"){if(i.description)return i.description;if(i.message)return i.message;try{return JSON.stringify(i)}catch{return"오류가 발생했습니다."}}return String(i)},Ss=i=>typeof i=="string"?{message:"알림",description:i}:typeof i=="object"?{message:ra(i.message)||"알림",description:ra(i.description)||""}:{message:"알림",description:ra(i)},jr={success:i=>{const l=Ss(i);alert(`✅ ${l.message}
${l.description}`)},error:i=>{const l=Ss(i);alert(`❌ ${l.message}
${l.description}`)},warning:i=>{const l=Ss(i);alert(`⚠️ ${l.message}
${l.description}`)},info:i=>{const l=Ss(i);alert(`ℹ️ ${l.message}
${l.description}`)}},l0=i=>Object.entries(i).filter(([s,f])=>f.length>0).map(([s,f])=>{const p=i0[s],y=f.map(x=>`• ${x}`).join(`
`);return`[${p}]
${y}`}).join(`

`),va=i=>{const[l,s]=B.useState({[Pt.BASIC_INFO]:[],[Pt.SALES_ITEMS]:[],[Pt.PAYMENTS]:[]}),f=N=>{const b=[];return Object.entries(a0).forEach(([M,_])=>{i[M]||b.push(pn.REQUIRED_FIELD(_))}),N&&!i.sellingPartner&&b.push(PARTNER_ERROR_MESSAGE),b},p=()=>{const N=[];return i.salesByItems.length===0?(N.push(pn.MIN_SALES_ITEMS),N):(i.salesByItems.forEach((b,M)=>{const _=[];b.itemName||_.push("매출품목"),b.teamName||_.push("사업부"),b.amount||_.push("매출금액"),_.length>0&&N.push(pn.ITEM_FIELDS(M+1,_))}),N)},y=(N,b,M)=>{if(!N.margin)return;const _=Number(N.margin),j=Number(N.amount);N.isProfit&&_>=j?M.push(`${b+1}번 항목: ${pn.MARGIN_LESS_THAN_AMOUNT}`):!N.isProfit&&(_<xu.MIN_MARGIN||_>xu.MAX_MARGIN)&&M.push(`${b+1}번 항목: ${pn.MARGIN_RANGE}`)},x=N=>{jr.error({message:"매출등록오류",description:l0(N),duration:0,style:{width:500}})},A=(N=!1)=>{const b={[Pt.BASIC_INFO]:f(N),[Pt.SALES_ITEMS]:p(),[Pt.PAYMENTS]:T(i.salesByPayments)};return Object.values(b).some(_=>_.length>0)?(s(b),x(b),!1):(s({[Pt.BASIC_INFO]:[],[Pt.SALES_ITEMS]:[],[Pt.PAYMENTS]:[]}),!0)},T=N=>{const b=[];return N.length===0?(b.push(pn.MIN_PAYMENTS),b):(N.forEach((M,_)=>{const j=[];Object.entries(o0).forEach(([O,w])=>{M[O]||j.push(w)}),j.length>0&&b.push(pn.ITEM_FIELDS(_+1,j)),M.amount&&!Number.isInteger(Number(M.amount))&&b.push(`${_+1}번 항목: ${pn.INTEGER_ONLY}`),y(M,_,b)}),b)};return{validationErrors:l,validateForm:A,validatePayments:T,checkAmounts:()=>{const N=parseInt(i.itemAmount)||0,b=parseInt(i.paymentAmount)||0;return N===b}}},ba=()=>{try{const i=sessionStorage==null?void 0:sessionStorage.getItem("user");if(!i)throw new Error("사용자 정보가 없습니다.");const l=JSON.parse(i);if(!(l!=null&&l.jwt))throw new Error("토큰 정보가 없습니다.");return l.jwt}catch(i){throw console.error("토큰 가져오기 실패:",i),i}},wa="http://192.168.20.101:1337",sa=(i=null,l={})=>{const s=ba(),f={baseURL:wa,headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",...l.headers},...l};return i&&(f.data={data:i}),f},Kn=Ey.create({baseURL:wa});Kn.interceptors.request.use(i=>{const l=ba();return l&&(i.headers.Authorization=`Bearer ${l}`),console.log("API Request:",{url:i==null?void 0:i.url,method:i==null?void 0:i.method,data:i==null?void 0:i.data}),i},i=>(console.error("Request Error:",i),Promise.reject(i)));Kn.interceptors.response.use(i=>(console.log("API Response:",{url:i.config.url,status:i.status,data:i.data}),i),i=>{var l,s,f;return console.error("Response Error:",{url:(l=i.config)==null?void 0:l.url,status:(s=i.response)==null?void 0:s.status,data:(f=i.response)==null?void 0:f.data}),Promise.reject(i)});const js={get:async(i,l={})=>{const s=sa(null,l);return Kn.get(i,s)},post:async(i,l,s={})=>{const f=sa(l,s);return Kn.post(i,f.data,f)},put:async(i,l,s={})=>Kn.put(i,{data:l},{baseURL:wa,headers:{Authorization:`Bearer ${ba()}`,"Content-Type":"application/json",...s.headers},...s}),delete:async(i,l={})=>{const s=sa(null,l);return Kn.delete(i,s)}},yn={async createSfaBase(i){var l,s,f;console.log("[SFA] Creating base with formData:",i);try{const p=Er.transformSfaFields(i);return(await js.post("/api/sfas",p)).data}catch(p){throw console.error("[SFA] Creation error:",p),new Error(((f=(s=(l=p.response)==null?void 0:l.data)==null?void 0:s.error)==null?void 0:f.message)||"데이터 저장 중 오류가 발생했습니다.")}},async addSfaPayment(i,l){var s,f,p;console.log("[SFA] Creating payments with history:",{sfaId:i,salesPayments:l});try{const y=l.map(async A=>{const P={...Er.transformSalesByPayments(A),sfa:i};return console.log("[SFA] Sending payment data with history:",P),(await js.post("/api/sfa-by-payment-withhistory",P)).data}),x=await Promise.all(y);return console.log("[SFA] All payments created with history:",x),x}catch(y){throw console.error("[SFA] Payment creation error:",y),new Error(((p=(f=(s=y.response)==null?void 0:s.data)==null?void 0:f.error)==null?void 0:p.message)||"결제 매출 데이터 저장 중 오류가 발생했습니다.")}},async updateSfaPayment(i,l){var s,f,p;console.log("[SFA] Updating payment with history:",{paymentId:i,paymentData:l});try{const y=Er.transformSalesByPayments(l),x=await js.put(`/api/sfa-by-payment-withhistory/${i}`,y);return console.log("[SFA] Payment updated with history:",x.data),x.data}catch(y){throw console.error("[SFA] Payment update error:",y),new Error(((p=(f=(s=y.response)==null?void 0:s.data)==null?void 0:f.error)==null?void 0:p.message)||"결제 매출 데이터 수정 중 오류가 발생했습니다.")}},async updateSfaBase(i,l){var s,f,p;console.log("[SFA] Updating field with formData:",l);try{return(await js.put(`/api/sfas/${i}`,l)).data}catch(y){throw console.error("[SFA] Update error:",y),new Error(((p=(f=(s=y.response)==null?void 0:s.data)==null?void 0:f.error)==null?void 0:p.message)||"데이터 저장 중 오류가 발생했습니다.")}}},u0=async i=>{try{console.log("===== Starting SFA Form Submission =====");const l=await yn.createSfaBase(i);if(!l||!l.data)throw new Error("SFA 기본 정보 생성 실패");const s=l.data.id,f=await yn.addSfaPayment(s,i.salesByPayments);return console.log("===== SFA Form Submission Completed ====="),{success:!0,data:{...l.data,payments:f}}}catch(l){throw console.error("SFA Form Submission Error:",l),l}},Ts=()=>{const{setDrawerClose:i,setDrawer:l,drawerState:s}=xn(),f=s0(s),{formData:p,setIsSubmitting:y,setErrors:x}=f,{validateForm:A,validatePayments:T,checkAmounts:P}=va(p);return{...f,validateForm:A,checkAmounts:P,processSubmit:async(M,_)=>{const j={...p,hasPartner:M,isProject:_};try{y(!0);const O=await u0(j);if(!O||!O.success)throw new Error((O==null?void 0:O.message)||"저장에 실패했습니다.");jr.success({message:"저장 성공",description:"성공적으로 저장되었습니다."}),i()}catch(O){console.error("Form submission error:",O);const w=(O==null?void 0:O.message)||"저장 중 오류가 발생했습니다.";x(S=>({...S,submit:w})),jr.error({message:"저장 실패",description:w})}finally{y(!1)}},processPaymentSubmit:async(M,_,j)=>{try{y(!0);const O=M==="create"?await yn.addSfaPayment(_,p.salesByPayments):await yn.updateSfaPayment(_,p.salesByPayments[0]);jr.success({message:"저장 성공",description:`성공적으로 ${M==="create"?"등록":"수정"}되었습니다.`});const w=await Pn.getSfaDetail(j);l({controlMode:"view",data:w.data[0]})}catch(O){console.error("Payment submission error:",O);const w=(O==null?void 0:O.message)||"저장 중 오류가 발생했습니다.";x(S=>({...S,submit:w})),jr.error({message:"저장 실패",description:w})}finally{y(!1)}}}};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pu=(...i)=>i.filter((l,s,f)=>!!l&&l.trim()!==""&&f.indexOf(l)===s).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=B.forwardRef(({color:i="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:f,className:p="",children:y,iconNode:x,...A},T)=>B.createElement("svg",{ref:T,...f0,width:l,height:l,stroke:i,strokeWidth:f?Number(s)*24/Number(l):s,className:Pu("lucide",p),...A},[...x.map(([P,N])=>B.createElement(P,N)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=(i,l)=>{const s=B.forwardRef(({className:f,...p},y)=>B.createElement(h0,{ref:y,iconNode:l,className:Pu(`lucide-${c0(i)}`,f),...p}));return s.displayName=`${i}`,s};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=Ns("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Ns("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Ns("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Ns("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ou=({visible:i=!1,title:l="",width:s="900px",onClose:f,menu:p,children:y,enableOverlayClick:x=!1,controlMode:A="view"})=>{if(B.useEffect(()=>{if(i){const P=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${P}px`,document.body.style.width="100%"}else{const P=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,parseInt(P||"0",10)*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width=""}},[i]),!i)return null;const T=P=>({"600px":"w-[600px]","800px":"w-[800px]","400px":"w-[400px]"})[P]||`w-[${P}]`;return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:x?f:void 0}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex max-w-full",children:a.jsx("div",{className:`relative ${T(s)} h-full`,children:a.jsxs("div",{className:"flex h-full flex-col overflow-hidden bg-white shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:l}),a.jsx(Fe,{variant:"outline",size:"sm",className:"h-12 w-12 p-1 hover:bg-gray-100 hover:text-gray-900 border-gray-200",onClick:f,children:a.jsx(Mu,{className:"h-8 w-8"})})]}),p&&A!=="add"&&a.jsx("div",{className:"border-b border-gray-200 px-4 py-2",children:p}),a.jsx("div",{className:"relative flex-1 overflow-y-auto",children:a.jsx("div",{className:"p-4",children:y})})]})})})]})};Ou.propTypes={visible:qt.bool.isRequired,title:qt.string.isRequired,width:qt.oneOfType([qt.string,qt.number]),onClose:qt.func.isRequired,menu:qt.node,children:qt.node,enableOverlayClick:qt.bool,controlMode:qt.oneOf(["view","edit","add"])};const p0=({controlMenus:i,functionMenus:l,className:s=""})=>a.jsxs("div",{className:`inline-flex items-center gap-2 ${s}`,children:[a.jsx("div",{className:"inline-flex rounded-md shadow-sm",children:i.map((f,p)=>a.jsx(Fe,{variant:f.active?"primary":"outline",size:"sm",className:`
              ${p===0?"rounded-l-md rounded-r-none":""}
              ${p===i.length-1?"rounded-r-md rounded-l-none":""}
              ${p!==0&&p!==i.length-1?"rounded-none":""}
              ${f.active?"z-10":""}
              -ml-px first:ml-0
              min-w-[80px]
              font-medium
            `,onClick:f.onClick,children:f.label},f.key))}),l.length>0&&a.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),a.jsx("div",{className:"inline-flex gap-2",children:l.map(f=>a.jsx(Fe,{variant:"outline",size:"sm",className:`
              min-w-[120px]
              font-medium
              ${f.active?"bg-blue-100 text-gray-900 border-gray-400":"bg-gray-50 text-gray-600 border-gray-300 hover:bg-gray-100 hover:text-gray-900"}
            `,onClick:f.onClick,children:f.label},f.key))})]});var Ir={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var g0=Ir.exports,_u;function m0(){return _u||(_u=1,function(i,l){(function(){var s,f="4.17.21",p=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",A="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",P=500,N="__lodash_placeholder__",b=1,M=2,_=4,j=1,O=2,w=1,S=2,Z=4,Y=8,ce=16,fe=32,Se=64,F=128,V=256,k=512,X=30,ee="...",Ae=800,Je=16,H=1,D=2,U=3,K=1/0,W=9007199254740991,ae=17976931348623157e292,se=NaN,ge=4294967295,L=ge-1,$=ge>>>1,ie=[["ary",F],["bind",w],["bindKey",S],["curry",Y],["curryRight",ce],["flip",k],["partial",fe],["partialRight",Se],["rearg",V]],J="[object Arguments]",ye="[object Array]",St="[object AsyncFunction]",ot="[object Boolean]",Qe="[object Date]",Be="[object DOMException]",gt="[object Error]",Yt="[object Function]",_n="[object GeneratorFunction]",Ft="[object Map]",tr="[object Number]",Lu="[object Null]",Vt="[object Object]",Ia="[object Promise]",$u="[object Proxy]",nr="[object RegExp]",Mt="[object Set]",rr="[object String]",Fr="[object Symbol]",Bu="[object Undefined]",sr="[object WeakMap]",Yu="[object WeakSet]",ir="[object ArrayBuffer]",Fn="[object DataView]",Rs="[object Float32Array]",Ps="[object Float64Array]",Fs="[object Int8Array]",Ms="[object Int16Array]",Os="[object Int32Array]",Ds="[object Uint8Array]",Ls="[object Uint8ClampedArray]",$s="[object Uint16Array]",Bs="[object Uint32Array]",ku=/\b__p \+= '';/g,Wu=/\b(__p \+=) '' \+/g,Uu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ca=/&(?:amp|lt|gt|quot|#39);/g,Aa=/[&<>"']/g,qu=RegExp(Ca.source),zu=RegExp(Aa.source),Hu=/<%-([\s\S]+?)%>/g,Vu=/<%([\s\S]+?)%>/g,Ea=/<%=([\s\S]+?)%>/g,Gu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ku=/^\w*$/,Qu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ys=/[\\^$.*+?()[\]{}|]/g,Zu=RegExp(Ys.source),ks=/^\s+/,Xu=/\s/,Ju=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ec=/\{\n\/\* \[wrapped with (.+)\] \*/,tc=/,? & /,nc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rc=/[()=,{}\[\]\/\s]/,sc=/\\(\\)?/g,ic=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ta=/\w*$/,ac=/^[-+]0x[0-9a-f]+$/i,oc=/^0b[01]+$/i,lc=/^\[object .+?Constructor\]$/,uc=/^0o[0-7]+$/i,cc=/^(?:0|[1-9]\d*)$/,fc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mr=/($^)/,hc=/['\n\r\u2028\u2029\\]/g,Or="\\ud800-\\udfff",dc="\\u0300-\\u036f",pc="\\ufe20-\\ufe2f",gc="\\u20d0-\\u20ff",Na=dc+pc+gc,Ra="\\u2700-\\u27bf",Pa="a-z\\xdf-\\xf6\\xf8-\\xff",mc="\\xac\\xb1\\xd7\\xf7",yc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xc="\\u2000-\\u206f",_c=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ma="\\ufe0e\\ufe0f",Oa=mc+yc+xc+_c,Ws="['’]",vc="["+Or+"]",Da="["+Oa+"]",Dr="["+Na+"]",La="\\d+",bc="["+Ra+"]",$a="["+Pa+"]",Ba="[^"+Or+Oa+La+Ra+Pa+Fa+"]",Us="\\ud83c[\\udffb-\\udfff]",wc="(?:"+Dr+"|"+Us+")",Ya="[^"+Or+"]",qs="(?:\\ud83c[\\udde6-\\uddff]){2}",zs="[\\ud800-\\udbff][\\udc00-\\udfff]",Mn="["+Fa+"]",ka="\\u200d",Wa="(?:"+$a+"|"+Ba+")",Sc="(?:"+Mn+"|"+Ba+")",Ua="(?:"+Ws+"(?:d|ll|m|re|s|t|ve))?",qa="(?:"+Ws+"(?:D|LL|M|RE|S|T|VE))?",za=wc+"?",Ha="["+Ma+"]?",jc="(?:"+ka+"(?:"+[Ya,qs,zs].join("|")+")"+Ha+za+")*",Ic="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Va=Ha+za+jc,Ac="(?:"+[bc,qs,zs].join("|")+")"+Va,Ec="(?:"+[Ya+Dr+"?",Dr,qs,zs,vc].join("|")+")",Tc=RegExp(Ws,"g"),Nc=RegExp(Dr,"g"),Hs=RegExp(Us+"(?="+Us+")|"+Ec+Va,"g"),Rc=RegExp([Mn+"?"+$a+"+"+Ua+"(?="+[Da,Mn,"$"].join("|")+")",Sc+"+"+qa+"(?="+[Da,Mn+Wa,"$"].join("|")+")",Mn+"?"+Wa+"+"+Ua,Mn+"+"+qa,Cc,Ic,La,Ac].join("|"),"g"),Pc=RegExp("["+ka+Or+Na+Ma+"]"),Fc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Oc=-1,Ne={};Ne[Rs]=Ne[Ps]=Ne[Fs]=Ne[Ms]=Ne[Os]=Ne[Ds]=Ne[Ls]=Ne[$s]=Ne[Bs]=!0,Ne[J]=Ne[ye]=Ne[ir]=Ne[ot]=Ne[Fn]=Ne[Qe]=Ne[gt]=Ne[Yt]=Ne[Ft]=Ne[tr]=Ne[Vt]=Ne[nr]=Ne[Mt]=Ne[rr]=Ne[sr]=!1;var Te={};Te[J]=Te[ye]=Te[ir]=Te[Fn]=Te[ot]=Te[Qe]=Te[Rs]=Te[Ps]=Te[Fs]=Te[Ms]=Te[Os]=Te[Ft]=Te[tr]=Te[Vt]=Te[nr]=Te[Mt]=Te[rr]=Te[Fr]=Te[Ds]=Te[Ls]=Te[$s]=Te[Bs]=!0,Te[gt]=Te[Yt]=Te[sr]=!1;var Dc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yc=parseFloat,kc=parseInt,Ga=typeof ws=="object"&&ws&&ws.Object===Object&&ws,Wc=typeof self=="object"&&self&&self.Object===Object&&self,He=Ga||Wc||Function("return this")(),Vs=l&&!l.nodeType&&l,vn=Vs&&!0&&i&&!i.nodeType&&i,Ka=vn&&vn.exports===Vs,Gs=Ka&&Ga.process,jt=function(){try{var g=vn&&vn.require&&vn.require("util").types;return g||Gs&&Gs.binding&&Gs.binding("util")}catch{}}(),Qa=jt&&jt.isArrayBuffer,Za=jt&&jt.isDate,Xa=jt&&jt.isMap,Ja=jt&&jt.isRegExp,eo=jt&&jt.isSet,to=jt&&jt.isTypedArray;function mt(g,I,v){switch(v.length){case 0:return g.call(I);case 1:return g.call(I,v[0]);case 2:return g.call(I,v[0],v[1]);case 3:return g.call(I,v[0],v[1],v[2])}return g.apply(I,v)}function Uc(g,I,v,G){for(var le=-1,we=g==null?0:g.length;++le<we;){var Ye=g[le];I(G,Ye,v(Ye),g)}return G}function It(g,I){for(var v=-1,G=g==null?0:g.length;++v<G&&I(g[v],v,g)!==!1;);return g}function qc(g,I){for(var v=g==null?0:g.length;v--&&I(g[v],v,g)!==!1;);return g}function no(g,I){for(var v=-1,G=g==null?0:g.length;++v<G;)if(!I(g[v],v,g))return!1;return!0}function sn(g,I){for(var v=-1,G=g==null?0:g.length,le=0,we=[];++v<G;){var Ye=g[v];I(Ye,v,g)&&(we[le++]=Ye)}return we}function Lr(g,I){var v=g==null?0:g.length;return!!v&&On(g,I,0)>-1}function Ks(g,I,v){for(var G=-1,le=g==null?0:g.length;++G<le;)if(v(I,g[G]))return!0;return!1}function Pe(g,I){for(var v=-1,G=g==null?0:g.length,le=Array(G);++v<G;)le[v]=I(g[v],v,g);return le}function an(g,I){for(var v=-1,G=I.length,le=g.length;++v<G;)g[le+v]=I[v];return g}function Qs(g,I,v,G){var le=-1,we=g==null?0:g.length;for(G&&we&&(v=g[++le]);++le<we;)v=I(v,g[le],le,g);return v}function zc(g,I,v,G){var le=g==null?0:g.length;for(G&&le&&(v=g[--le]);le--;)v=I(v,g[le],le,g);return v}function Zs(g,I){for(var v=-1,G=g==null?0:g.length;++v<G;)if(I(g[v],v,g))return!0;return!1}var Hc=Xs("length");function Vc(g){return g.split("")}function Gc(g){return g.match(nc)||[]}function ro(g,I,v){var G;return v(g,function(le,we,Ye){if(I(le,we,Ye))return G=we,!1}),G}function $r(g,I,v,G){for(var le=g.length,we=v+(G?1:-1);G?we--:++we<le;)if(I(g[we],we,g))return we;return-1}function On(g,I,v){return I===I?of(g,I,v):$r(g,so,v)}function Kc(g,I,v,G){for(var le=v-1,we=g.length;++le<we;)if(G(g[le],I))return le;return-1}function so(g){return g!==g}function io(g,I){var v=g==null?0:g.length;return v?ei(g,I)/v:se}function Xs(g){return function(I){return I==null?s:I[g]}}function Js(g){return function(I){return g==null?s:g[I]}}function ao(g,I,v,G,le){return le(g,function(we,Ye,Ee){v=G?(G=!1,we):I(v,we,Ye,Ee)}),v}function Qc(g,I){var v=g.length;for(g.sort(I);v--;)g[v]=g[v].value;return g}function ei(g,I){for(var v,G=-1,le=g.length;++G<le;){var we=I(g[G]);we!==s&&(v=v===s?we:v+we)}return v}function ti(g,I){for(var v=-1,G=Array(g);++v<g;)G[v]=I(v);return G}function Zc(g,I){return Pe(I,function(v){return[v,g[v]]})}function oo(g){return g&&g.slice(0,fo(g)+1).replace(ks,"")}function yt(g){return function(I){return g(I)}}function ni(g,I){return Pe(I,function(v){return g[v]})}function ar(g,I){return g.has(I)}function lo(g,I){for(var v=-1,G=g.length;++v<G&&On(I,g[v],0)>-1;);return v}function uo(g,I){for(var v=g.length;v--&&On(I,g[v],0)>-1;);return v}function Xc(g,I){for(var v=g.length,G=0;v--;)g[v]===I&&++G;return G}var Jc=Js(Dc),ef=Js(Lc);function tf(g){return"\\"+Bc[g]}function nf(g,I){return g==null?s:g[I]}function Dn(g){return Pc.test(g)}function rf(g){return Fc.test(g)}function sf(g){for(var I,v=[];!(I=g.next()).done;)v.push(I.value);return v}function ri(g){var I=-1,v=Array(g.size);return g.forEach(function(G,le){v[++I]=[le,G]}),v}function co(g,I){return function(v){return g(I(v))}}function on(g,I){for(var v=-1,G=g.length,le=0,we=[];++v<G;){var Ye=g[v];(Ye===I||Ye===N)&&(g[v]=N,we[le++]=v)}return we}function Br(g){var I=-1,v=Array(g.size);return g.forEach(function(G){v[++I]=G}),v}function af(g){var I=-1,v=Array(g.size);return g.forEach(function(G){v[++I]=[G,G]}),v}function of(g,I,v){for(var G=v-1,le=g.length;++G<le;)if(g[G]===I)return G;return-1}function lf(g,I,v){for(var G=v+1;G--;)if(g[G]===I)return G;return G}function Ln(g){return Dn(g)?cf(g):Hc(g)}function Ot(g){return Dn(g)?ff(g):Vc(g)}function fo(g){for(var I=g.length;I--&&Xu.test(g.charAt(I)););return I}var uf=Js($c);function cf(g){for(var I=Hs.lastIndex=0;Hs.test(g);)++I;return I}function ff(g){return g.match(Hs)||[]}function hf(g){return g.match(Rc)||[]}var df=function g(I){I=I==null?He:$n.defaults(He.Object(),I,$n.pick(He,Mc));var v=I.Array,G=I.Date,le=I.Error,we=I.Function,Ye=I.Math,Ee=I.Object,si=I.RegExp,pf=I.String,Ct=I.TypeError,Yr=v.prototype,gf=we.prototype,Bn=Ee.prototype,kr=I["__core-js_shared__"],Wr=gf.toString,Ce=Bn.hasOwnProperty,mf=0,ho=function(){var e=/[^.]+$/.exec(kr&&kr.keys&&kr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ur=Bn.toString,yf=Wr.call(Ee),xf=He._,_f=si("^"+Wr.call(Ce).replace(Ys,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qr=Ka?I.Buffer:s,ln=I.Symbol,zr=I.Uint8Array,po=qr?qr.allocUnsafe:s,Hr=co(Ee.getPrototypeOf,Ee),go=Ee.create,mo=Bn.propertyIsEnumerable,Vr=Yr.splice,yo=ln?ln.isConcatSpreadable:s,or=ln?ln.iterator:s,bn=ln?ln.toStringTag:s,Gr=function(){try{var e=Cn(Ee,"defineProperty");return e({},"",{}),e}catch{}}(),vf=I.clearTimeout!==He.clearTimeout&&I.clearTimeout,bf=G&&G.now!==He.Date.now&&G.now,wf=I.setTimeout!==He.setTimeout&&I.setTimeout,Kr=Ye.ceil,Qr=Ye.floor,ii=Ee.getOwnPropertySymbols,Sf=qr?qr.isBuffer:s,xo=I.isFinite,jf=Yr.join,If=co(Ee.keys,Ee),ke=Ye.max,Ze=Ye.min,Cf=G.now,Af=I.parseInt,_o=Ye.random,Ef=Yr.reverse,ai=Cn(I,"DataView"),lr=Cn(I,"Map"),oi=Cn(I,"Promise"),Yn=Cn(I,"Set"),ur=Cn(I,"WeakMap"),cr=Cn(Ee,"create"),Zr=ur&&new ur,kn={},Tf=An(ai),Nf=An(lr),Rf=An(oi),Pf=An(Yn),Ff=An(ur),Xr=ln?ln.prototype:s,fr=Xr?Xr.valueOf:s,vo=Xr?Xr.toString:s;function u(e){if(Oe(e)&&!ue(e)&&!(e instanceof _e)){if(e instanceof At)return e;if(Ce.call(e,"__wrapped__"))return bl(e)}return new At(e)}var Wn=function(){function e(){}return function(t){if(!Me(t))return{};if(go)return go(t);e.prototype=t;var n=new e;return e.prototype=s,n}}();function Jr(){}function At(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}u.templateSettings={escape:Hu,evaluate:Vu,interpolate:Ea,variable:"",imports:{_:u}},u.prototype=Jr.prototype,u.prototype.constructor=u,At.prototype=Wn(Jr.prototype),At.prototype.constructor=At;function _e(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function Mf(){var e=new _e(this.__wrapped__);return e.__actions__=lt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=lt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=lt(this.__views__),e}function Of(){if(this.__filtered__){var e=new _e(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Df(){var e=this.__wrapped__.value(),t=this.__dir__,n=ue(e),r=t<0,o=n?e.length:0,c=Gh(0,o,this.__views__),h=c.start,d=c.end,m=d-h,C=r?d:h-1,E=this.__iteratees__,R=E.length,z=0,Q=Ze(m,this.__takeCount__);if(!n||!r&&o==m&&Q==m)return qo(e,this.__actions__);var ne=[];e:for(;m--&&z<Q;){C+=t;for(var de=-1,re=e[C];++de<R;){var xe=E[de],ve=xe.iteratee,vt=xe.type,nt=ve(re);if(vt==D)re=nt;else if(!nt){if(vt==H)continue e;break e}}ne[z++]=re}return ne}_e.prototype=Wn(Jr.prototype),_e.prototype.constructor=_e;function wn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Lf(){this.__data__=cr?cr(null):{},this.size=0}function $f(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Bf(e){var t=this.__data__;if(cr){var n=t[e];return n===T?s:n}return Ce.call(t,e)?t[e]:s}function Yf(e){var t=this.__data__;return cr?t[e]!==s:Ce.call(t,e)}function kf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cr&&t===s?T:t,this}wn.prototype.clear=Lf,wn.prototype.delete=$f,wn.prototype.get=Bf,wn.prototype.has=Yf,wn.prototype.set=kf;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wf(){this.__data__=[],this.size=0}function Uf(e){var t=this.__data__,n=es(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Vr.call(t,n,1),--this.size,!0}function qf(e){var t=this.__data__,n=es(t,e);return n<0?s:t[n][1]}function zf(e){return es(this.__data__,e)>-1}function Hf(e,t){var n=this.__data__,r=es(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}Gt.prototype.clear=Wf,Gt.prototype.delete=Uf,Gt.prototype.get=qf,Gt.prototype.has=zf,Gt.prototype.set=Hf;function Kt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vf(){this.size=0,this.__data__={hash:new wn,map:new(lr||Gt),string:new wn}}function Gf(e){var t=hs(this,e).delete(e);return this.size-=t?1:0,t}function Kf(e){return hs(this,e).get(e)}function Qf(e){return hs(this,e).has(e)}function Zf(e,t){var n=hs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}Kt.prototype.clear=Vf,Kt.prototype.delete=Gf,Kt.prototype.get=Kf,Kt.prototype.has=Qf,Kt.prototype.set=Zf;function Sn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Kt;++t<n;)this.add(e[t])}function Xf(e){return this.__data__.set(e,T),this}function Jf(e){return this.__data__.has(e)}Sn.prototype.add=Sn.prototype.push=Xf,Sn.prototype.has=Jf;function Dt(e){var t=this.__data__=new Gt(e);this.size=t.size}function eh(){this.__data__=new Gt,this.size=0}function th(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function nh(e){return this.__data__.get(e)}function rh(e){return this.__data__.has(e)}function sh(e,t){var n=this.__data__;if(n instanceof Gt){var r=n.__data__;if(!lr||r.length<p-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kt(r)}return n.set(e,t),this.size=n.size,this}Dt.prototype.clear=eh,Dt.prototype.delete=th,Dt.prototype.get=nh,Dt.prototype.has=rh,Dt.prototype.set=sh;function bo(e,t){var n=ue(e),r=!n&&En(e),o=!n&&!r&&dn(e),c=!n&&!r&&!o&&Hn(e),h=n||r||o||c,d=h?ti(e.length,pf):[],m=d.length;for(var C in e)(t||Ce.call(e,C))&&!(h&&(C=="length"||o&&(C=="offset"||C=="parent")||c&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||Jt(C,m)))&&d.push(C);return d}function wo(e){var t=e.length;return t?e[xi(0,t-1)]:s}function ih(e,t){return ds(lt(e),jn(t,0,e.length))}function ah(e){return ds(lt(e))}function li(e,t,n){(n!==s&&!Lt(e[t],n)||n===s&&!(t in e))&&Qt(e,t,n)}function hr(e,t,n){var r=e[t];(!(Ce.call(e,t)&&Lt(r,n))||n===s&&!(t in e))&&Qt(e,t,n)}function es(e,t){for(var n=e.length;n--;)if(Lt(e[n][0],t))return n;return-1}function oh(e,t,n,r){return un(e,function(o,c,h){t(r,o,n(o),h)}),r}function So(e,t){return e&&Wt(t,Ue(t),e)}function lh(e,t){return e&&Wt(t,ct(t),e)}function Qt(e,t,n){t=="__proto__"&&Gr?Gr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ui(e,t){for(var n=-1,r=t.length,o=v(r),c=e==null;++n<r;)o[n]=c?s:Ui(e,t[n]);return o}function jn(e,t,n){return e===e&&(n!==s&&(e=e<=n?e:n),t!==s&&(e=e>=t?e:t)),e}function Et(e,t,n,r,o,c){var h,d=t&b,m=t&M,C=t&_;if(n&&(h=o?n(e,r,o,c):n(e)),h!==s)return h;if(!Me(e))return e;var E=ue(e);if(E){if(h=Qh(e),!d)return lt(e,h)}else{var R=Xe(e),z=R==Yt||R==_n;if(dn(e))return Vo(e,d);if(R==Vt||R==J||z&&!o){if(h=m||z?{}:hl(e),!d)return m?Bh(e,lh(h,e)):$h(e,So(h,e))}else{if(!Te[R])return o?e:{};h=Zh(e,R,d)}}c||(c=new Dt);var Q=c.get(e);if(Q)return Q;c.set(e,h),kl(e)?e.forEach(function(re){h.add(Et(re,t,n,re,e,c))}):Bl(e)&&e.forEach(function(re,xe){h.set(xe,Et(re,t,n,xe,e,c))});var ne=C?m?Ti:Ei:m?ct:Ue,de=E?s:ne(e);return It(de||e,function(re,xe){de&&(xe=re,re=e[xe]),hr(h,xe,Et(re,t,n,xe,e,c))}),h}function uh(e){var t=Ue(e);return function(n){return jo(n,e,t)}}function jo(e,t,n){var r=n.length;if(e==null)return!r;for(e=Ee(e);r--;){var o=n[r],c=t[o],h=e[o];if(h===s&&!(o in e)||!c(h))return!1}return!0}function Io(e,t,n){if(typeof e!="function")throw new Ct(x);return _r(function(){e.apply(s,n)},t)}function dr(e,t,n,r){var o=-1,c=Lr,h=!0,d=e.length,m=[],C=t.length;if(!d)return m;n&&(t=Pe(t,yt(n))),r?(c=Ks,h=!1):t.length>=p&&(c=ar,h=!1,t=new Sn(t));e:for(;++o<d;){var E=e[o],R=n==null?E:n(E);if(E=r||E!==0?E:0,h&&R===R){for(var z=C;z--;)if(t[z]===R)continue e;m.push(E)}else c(t,R,r)||m.push(E)}return m}var un=Xo(kt),Co=Xo(fi,!0);function ch(e,t){var n=!0;return un(e,function(r,o,c){return n=!!t(r,o,c),n}),n}function ts(e,t,n){for(var r=-1,o=e.length;++r<o;){var c=e[r],h=t(c);if(h!=null&&(d===s?h===h&&!_t(h):n(h,d)))var d=h,m=c}return m}function fh(e,t,n,r){var o=e.length;for(n=he(n),n<0&&(n=-n>o?0:o+n),r=r===s||r>o?o:he(r),r<0&&(r+=o),r=n>r?0:Ul(r);n<r;)e[n++]=t;return e}function Ao(e,t){var n=[];return un(e,function(r,o,c){t(r,o,c)&&n.push(r)}),n}function Ve(e,t,n,r,o){var c=-1,h=e.length;for(n||(n=Jh),o||(o=[]);++c<h;){var d=e[c];t>0&&n(d)?t>1?Ve(d,t-1,n,r,o):an(o,d):r||(o[o.length]=d)}return o}var ci=Jo(),Eo=Jo(!0);function kt(e,t){return e&&ci(e,t,Ue)}function fi(e,t){return e&&Eo(e,t,Ue)}function ns(e,t){return sn(t,function(n){return en(e[n])})}function In(e,t){t=fn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ut(t[n++])];return n&&n==r?e:s}function To(e,t,n){var r=t(e);return ue(e)?r:an(r,n(e))}function et(e){return e==null?e===s?Bu:Lu:bn&&bn in Ee(e)?Vh(e):ad(e)}function hi(e,t){return e>t}function hh(e,t){return e!=null&&Ce.call(e,t)}function dh(e,t){return e!=null&&t in Ee(e)}function ph(e,t,n){return e>=Ze(t,n)&&e<ke(t,n)}function di(e,t,n){for(var r=n?Ks:Lr,o=e[0].length,c=e.length,h=c,d=v(c),m=1/0,C=[];h--;){var E=e[h];h&&t&&(E=Pe(E,yt(t))),m=Ze(E.length,m),d[h]=!n&&(t||o>=120&&E.length>=120)?new Sn(h&&E):s}E=e[0];var R=-1,z=d[0];e:for(;++R<o&&C.length<m;){var Q=E[R],ne=t?t(Q):Q;if(Q=n||Q!==0?Q:0,!(z?ar(z,ne):r(C,ne,n))){for(h=c;--h;){var de=d[h];if(!(de?ar(de,ne):r(e[h],ne,n)))continue e}z&&z.push(ne),C.push(Q)}}return C}function gh(e,t,n,r){return kt(e,function(o,c,h){t(r,n(o),c,h)}),r}function pr(e,t,n){t=fn(t,e),e=ml(e,t);var r=e==null?e:e[Ut(Nt(t))];return r==null?s:mt(r,e,n)}function No(e){return Oe(e)&&et(e)==J}function mh(e){return Oe(e)&&et(e)==ir}function yh(e){return Oe(e)&&et(e)==Qe}function gr(e,t,n,r,o){return e===t?!0:e==null||t==null||!Oe(e)&&!Oe(t)?e!==e&&t!==t:xh(e,t,n,r,gr,o)}function xh(e,t,n,r,o,c){var h=ue(e),d=ue(t),m=h?ye:Xe(e),C=d?ye:Xe(t);m=m==J?Vt:m,C=C==J?Vt:C;var E=m==Vt,R=C==Vt,z=m==C;if(z&&dn(e)){if(!dn(t))return!1;h=!0,E=!1}if(z&&!E)return c||(c=new Dt),h||Hn(e)?ul(e,t,n,r,o,c):zh(e,t,m,n,r,o,c);if(!(n&j)){var Q=E&&Ce.call(e,"__wrapped__"),ne=R&&Ce.call(t,"__wrapped__");if(Q||ne){var de=Q?e.value():e,re=ne?t.value():t;return c||(c=new Dt),o(de,re,n,r,c)}}return z?(c||(c=new Dt),Hh(e,t,n,r,o,c)):!1}function _h(e){return Oe(e)&&Xe(e)==Ft}function pi(e,t,n,r){var o=n.length,c=o,h=!r;if(e==null)return!c;for(e=Ee(e);o--;){var d=n[o];if(h&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++o<c;){d=n[o];var m=d[0],C=e[m],E=d[1];if(h&&d[2]){if(C===s&&!(m in e))return!1}else{var R=new Dt;if(r)var z=r(C,E,m,e,t,R);if(!(z===s?gr(E,C,j|O,r,R):z))return!1}}return!0}function Ro(e){if(!Me(e)||td(e))return!1;var t=en(e)?_f:lc;return t.test(An(e))}function vh(e){return Oe(e)&&et(e)==nr}function bh(e){return Oe(e)&&Xe(e)==Mt}function wh(e){return Oe(e)&&_s(e.length)&&!!Ne[et(e)]}function Po(e){return typeof e=="function"?e:e==null?ft:typeof e=="object"?ue(e)?Oo(e[0],e[1]):Mo(e):eu(e)}function gi(e){if(!xr(e))return If(e);var t=[];for(var n in Ee(e))Ce.call(e,n)&&n!="constructor"&&t.push(n);return t}function Sh(e){if(!Me(e))return id(e);var t=xr(e),n=[];for(var r in e)r=="constructor"&&(t||!Ce.call(e,r))||n.push(r);return n}function mi(e,t){return e<t}function Fo(e,t){var n=-1,r=ut(e)?v(e.length):[];return un(e,function(o,c,h){r[++n]=t(o,c,h)}),r}function Mo(e){var t=Ri(e);return t.length==1&&t[0][2]?pl(t[0][0],t[0][1]):function(n){return n===e||pi(n,e,t)}}function Oo(e,t){return Fi(e)&&dl(t)?pl(Ut(e),t):function(n){var r=Ui(n,e);return r===s&&r===t?qi(n,e):gr(t,r,j|O)}}function rs(e,t,n,r,o){e!==t&&ci(t,function(c,h){if(o||(o=new Dt),Me(c))jh(e,t,h,n,rs,r,o);else{var d=r?r(Oi(e,h),c,h+"",e,t,o):s;d===s&&(d=c),li(e,h,d)}},ct)}function jh(e,t,n,r,o,c,h){var d=Oi(e,n),m=Oi(t,n),C=h.get(m);if(C){li(e,n,C);return}var E=c?c(d,m,n+"",e,t,h):s,R=E===s;if(R){var z=ue(m),Q=!z&&dn(m),ne=!z&&!Q&&Hn(m);E=m,z||Q||ne?ue(d)?E=d:De(d)?E=lt(d):Q?(R=!1,E=Vo(m,!0)):ne?(R=!1,E=Go(m,!0)):E=[]:vr(m)||En(m)?(E=d,En(d)?E=ql(d):(!Me(d)||en(d))&&(E=hl(m))):R=!1}R&&(h.set(m,E),o(E,m,r,c,h),h.delete(m)),li(e,n,E)}function Do(e,t){var n=e.length;if(n)return t+=t<0?n:0,Jt(t,n)?e[t]:s}function Lo(e,t,n){t.length?t=Pe(t,function(c){return ue(c)?function(h){return In(h,c.length===1?c[0]:c)}:c}):t=[ft];var r=-1;t=Pe(t,yt(te()));var o=Fo(e,function(c,h,d){var m=Pe(t,function(C){return C(c)});return{criteria:m,index:++r,value:c}});return Qc(o,function(c,h){return Lh(c,h,n)})}function Ih(e,t){return $o(e,t,function(n,r){return qi(e,r)})}function $o(e,t,n){for(var r=-1,o=t.length,c={};++r<o;){var h=t[r],d=In(e,h);n(d,h)&&mr(c,fn(h,e),d)}return c}function Ch(e){return function(t){return In(t,e)}}function yi(e,t,n,r){var o=r?Kc:On,c=-1,h=t.length,d=e;for(e===t&&(t=lt(t)),n&&(d=Pe(e,yt(n)));++c<h;)for(var m=0,C=t[c],E=n?n(C):C;(m=o(d,E,m,r))>-1;)d!==e&&Vr.call(d,m,1),Vr.call(e,m,1);return e}function Bo(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==c){var c=o;Jt(o)?Vr.call(e,o,1):bi(e,o)}}return e}function xi(e,t){return e+Qr(_o()*(t-e+1))}function Ah(e,t,n,r){for(var o=-1,c=ke(Kr((t-e)/(n||1)),0),h=v(c);c--;)h[r?c:++o]=e,e+=n;return h}function _i(e,t){var n="";if(!e||t<1||t>W)return n;do t%2&&(n+=e),t=Qr(t/2),t&&(e+=e);while(t);return n}function pe(e,t){return Di(gl(e,t,ft),e+"")}function Eh(e){return wo(Vn(e))}function Th(e,t){var n=Vn(e);return ds(n,jn(t,0,n.length))}function mr(e,t,n,r){if(!Me(e))return e;t=fn(t,e);for(var o=-1,c=t.length,h=c-1,d=e;d!=null&&++o<c;){var m=Ut(t[o]),C=n;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(o!=h){var E=d[m];C=r?r(E,m,d):s,C===s&&(C=Me(E)?E:Jt(t[o+1])?[]:{})}hr(d,m,C),d=d[m]}return e}var Yo=Zr?function(e,t){return Zr.set(e,t),e}:ft,Nh=Gr?function(e,t){return Gr(e,"toString",{configurable:!0,enumerable:!1,value:Hi(t),writable:!0})}:ft;function Rh(e){return ds(Vn(e))}function Tt(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var c=v(o);++r<o;)c[r]=e[r+t];return c}function Ph(e,t){var n;return un(e,function(r,o,c){return n=t(r,o,c),!n}),!!n}function ss(e,t,n){var r=0,o=e==null?r:e.length;if(typeof t=="number"&&t===t&&o<=$){for(;r<o;){var c=r+o>>>1,h=e[c];h!==null&&!_t(h)&&(n?h<=t:h<t)?r=c+1:o=c}return o}return vi(e,t,ft,n)}function vi(e,t,n,r){var o=0,c=e==null?0:e.length;if(c===0)return 0;t=n(t);for(var h=t!==t,d=t===null,m=_t(t),C=t===s;o<c;){var E=Qr((o+c)/2),R=n(e[E]),z=R!==s,Q=R===null,ne=R===R,de=_t(R);if(h)var re=r||ne;else C?re=ne&&(r||z):d?re=ne&&z&&(r||!Q):m?re=ne&&z&&!Q&&(r||!de):Q||de?re=!1:re=r?R<=t:R<t;re?o=E+1:c=E}return Ze(c,L)}function ko(e,t){for(var n=-1,r=e.length,o=0,c=[];++n<r;){var h=e[n],d=t?t(h):h;if(!n||!Lt(d,m)){var m=d;c[o++]=h===0?0:h}}return c}function Wo(e){return typeof e=="number"?e:_t(e)?se:+e}function xt(e){if(typeof e=="string")return e;if(ue(e))return Pe(e,xt)+"";if(_t(e))return vo?vo.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cn(e,t,n){var r=-1,o=Lr,c=e.length,h=!0,d=[],m=d;if(n)h=!1,o=Ks;else if(c>=p){var C=t?null:Uh(e);if(C)return Br(C);h=!1,o=ar,m=new Sn}else m=t?[]:d;e:for(;++r<c;){var E=e[r],R=t?t(E):E;if(E=n||E!==0?E:0,h&&R===R){for(var z=m.length;z--;)if(m[z]===R)continue e;t&&m.push(R),d.push(E)}else o(m,R,n)||(m!==d&&m.push(R),d.push(E))}return d}function bi(e,t){return t=fn(t,e),e=ml(e,t),e==null||delete e[Ut(Nt(t))]}function Uo(e,t,n,r){return mr(e,t,n(In(e,t)),r)}function is(e,t,n,r){for(var o=e.length,c=r?o:-1;(r?c--:++c<o)&&t(e[c],c,e););return n?Tt(e,r?0:c,r?c+1:o):Tt(e,r?c+1:0,r?o:c)}function qo(e,t){var n=e;return n instanceof _e&&(n=n.value()),Qs(t,function(r,o){return o.func.apply(o.thisArg,an([r],o.args))},n)}function wi(e,t,n){var r=e.length;if(r<2)return r?cn(e[0]):[];for(var o=-1,c=v(r);++o<r;)for(var h=e[o],d=-1;++d<r;)d!=o&&(c[o]=dr(c[o]||h,e[d],t,n));return cn(Ve(c,1),t,n)}function zo(e,t,n){for(var r=-1,o=e.length,c=t.length,h={};++r<o;){var d=r<c?t[r]:s;n(h,e[r],d)}return h}function Si(e){return De(e)?e:[]}function ji(e){return typeof e=="function"?e:ft}function fn(e,t){return ue(e)?e:Fi(e,t)?[e]:vl(je(e))}var Fh=pe;function hn(e,t,n){var r=e.length;return n=n===s?r:n,!t&&n>=r?e:Tt(e,t,n)}var Ho=vf||function(e){return He.clearTimeout(e)};function Vo(e,t){if(t)return e.slice();var n=e.length,r=po?po(n):new e.constructor(n);return e.copy(r),r}function Ii(e){var t=new e.constructor(e.byteLength);return new zr(t).set(new zr(e)),t}function Mh(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Oh(e){var t=new e.constructor(e.source,Ta.exec(e));return t.lastIndex=e.lastIndex,t}function Dh(e){return fr?Ee(fr.call(e)):{}}function Go(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ko(e,t){if(e!==t){var n=e!==s,r=e===null,o=e===e,c=_t(e),h=t!==s,d=t===null,m=t===t,C=_t(t);if(!d&&!C&&!c&&e>t||c&&h&&m&&!d&&!C||r&&h&&m||!n&&m||!o)return 1;if(!r&&!c&&!C&&e<t||C&&n&&o&&!r&&!c||d&&n&&o||!h&&o||!m)return-1}return 0}function Lh(e,t,n){for(var r=-1,o=e.criteria,c=t.criteria,h=o.length,d=n.length;++r<h;){var m=Ko(o[r],c[r]);if(m){if(r>=d)return m;var C=n[r];return m*(C=="desc"?-1:1)}}return e.index-t.index}function Qo(e,t,n,r){for(var o=-1,c=e.length,h=n.length,d=-1,m=t.length,C=ke(c-h,0),E=v(m+C),R=!r;++d<m;)E[d]=t[d];for(;++o<h;)(R||o<c)&&(E[n[o]]=e[o]);for(;C--;)E[d++]=e[o++];return E}function Zo(e,t,n,r){for(var o=-1,c=e.length,h=-1,d=n.length,m=-1,C=t.length,E=ke(c-d,0),R=v(E+C),z=!r;++o<E;)R[o]=e[o];for(var Q=o;++m<C;)R[Q+m]=t[m];for(;++h<d;)(z||o<c)&&(R[Q+n[h]]=e[o++]);return R}function lt(e,t){var n=-1,r=e.length;for(t||(t=v(r));++n<r;)t[n]=e[n];return t}function Wt(e,t,n,r){var o=!n;n||(n={});for(var c=-1,h=t.length;++c<h;){var d=t[c],m=r?r(n[d],e[d],d,n,e):s;m===s&&(m=e[d]),o?Qt(n,d,m):hr(n,d,m)}return n}function $h(e,t){return Wt(e,Pi(e),t)}function Bh(e,t){return Wt(e,cl(e),t)}function as(e,t){return function(n,r){var o=ue(n)?Uc:oh,c=t?t():{};return o(n,e,te(r,2),c)}}function Un(e){return pe(function(t,n){var r=-1,o=n.length,c=o>1?n[o-1]:s,h=o>2?n[2]:s;for(c=e.length>3&&typeof c=="function"?(o--,c):s,h&&tt(n[0],n[1],h)&&(c=o<3?s:c,o=1),t=Ee(t);++r<o;){var d=n[r];d&&e(t,d,r,c)}return t})}function Xo(e,t){return function(n,r){if(n==null)return n;if(!ut(n))return e(n,r);for(var o=n.length,c=t?o:-1,h=Ee(n);(t?c--:++c<o)&&r(h[c],c,h)!==!1;);return n}}function Jo(e){return function(t,n,r){for(var o=-1,c=Ee(t),h=r(t),d=h.length;d--;){var m=h[e?d:++o];if(n(c[m],m,c)===!1)break}return t}}function Yh(e,t,n){var r=t&w,o=yr(e);function c(){var h=this&&this!==He&&this instanceof c?o:e;return h.apply(r?n:this,arguments)}return c}function el(e){return function(t){t=je(t);var n=Dn(t)?Ot(t):s,r=n?n[0]:t.charAt(0),o=n?hn(n,1).join(""):t.slice(1);return r[e]()+o}}function qn(e){return function(t){return Qs(Xl(Zl(t).replace(Tc,"")),e,"")}}function yr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wn(e.prototype),r=e.apply(n,t);return Me(r)?r:n}}function kh(e,t,n){var r=yr(e);function o(){for(var c=arguments.length,h=v(c),d=c,m=zn(o);d--;)h[d]=arguments[d];var C=c<3&&h[0]!==m&&h[c-1]!==m?[]:on(h,m);if(c-=C.length,c<n)return il(e,t,os,o.placeholder,s,h,C,s,s,n-c);var E=this&&this!==He&&this instanceof o?r:e;return mt(E,this,h)}return o}function tl(e){return function(t,n,r){var o=Ee(t);if(!ut(t)){var c=te(n,3);t=Ue(t),n=function(d){return c(o[d],d,o)}}var h=e(t,n,r);return h>-1?o[c?t[h]:h]:s}}function nl(e){return Xt(function(t){var n=t.length,r=n,o=At.prototype.thru;for(e&&t.reverse();r--;){var c=t[r];if(typeof c!="function")throw new Ct(x);if(o&&!h&&fs(c)=="wrapper")var h=new At([],!0)}for(r=h?r:n;++r<n;){c=t[r];var d=fs(c),m=d=="wrapper"?Ni(c):s;m&&Mi(m[0])&&m[1]==(F|Y|fe|V)&&!m[4].length&&m[9]==1?h=h[fs(m[0])].apply(h,m[3]):h=c.length==1&&Mi(c)?h[d]():h.thru(c)}return function(){var C=arguments,E=C[0];if(h&&C.length==1&&ue(E))return h.plant(E).value();for(var R=0,z=n?t[R].apply(this,C):E;++R<n;)z=t[R].call(this,z);return z}})}function os(e,t,n,r,o,c,h,d,m,C){var E=t&F,R=t&w,z=t&S,Q=t&(Y|ce),ne=t&k,de=z?s:yr(e);function re(){for(var xe=arguments.length,ve=v(xe),vt=xe;vt--;)ve[vt]=arguments[vt];if(Q)var nt=zn(re),bt=Xc(ve,nt);if(r&&(ve=Qo(ve,r,o,Q)),c&&(ve=Zo(ve,c,h,Q)),xe-=bt,Q&&xe<C){var Le=on(ve,nt);return il(e,t,os,re.placeholder,n,ve,Le,d,m,C-xe)}var $t=R?n:this,nn=z?$t[e]:e;return xe=ve.length,d?ve=od(ve,d):ne&&xe>1&&ve.reverse(),E&&m<xe&&(ve.length=m),this&&this!==He&&this instanceof re&&(nn=de||yr(nn)),nn.apply($t,ve)}return re}function rl(e,t){return function(n,r){return gh(n,e,t(r),{})}}function ls(e,t){return function(n,r){var o;if(n===s&&r===s)return t;if(n!==s&&(o=n),r!==s){if(o===s)return r;typeof n=="string"||typeof r=="string"?(n=xt(n),r=xt(r)):(n=Wo(n),r=Wo(r)),o=e(n,r)}return o}}function Ci(e){return Xt(function(t){return t=Pe(t,yt(te())),pe(function(n){var r=this;return e(t,function(o){return mt(o,r,n)})})})}function us(e,t){t=t===s?" ":xt(t);var n=t.length;if(n<2)return n?_i(t,e):t;var r=_i(t,Kr(e/Ln(t)));return Dn(t)?hn(Ot(r),0,e).join(""):r.slice(0,e)}function Wh(e,t,n,r){var o=t&w,c=yr(e);function h(){for(var d=-1,m=arguments.length,C=-1,E=r.length,R=v(E+m),z=this&&this!==He&&this instanceof h?c:e;++C<E;)R[C]=r[C];for(;m--;)R[C++]=arguments[++d];return mt(z,o?n:this,R)}return h}function sl(e){return function(t,n,r){return r&&typeof r!="number"&&tt(t,n,r)&&(n=r=s),t=tn(t),n===s?(n=t,t=0):n=tn(n),r=r===s?t<n?1:-1:tn(r),Ah(t,n,r,e)}}function cs(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rt(t),n=Rt(n)),e(t,n)}}function il(e,t,n,r,o,c,h,d,m,C){var E=t&Y,R=E?h:s,z=E?s:h,Q=E?c:s,ne=E?s:c;t|=E?fe:Se,t&=~(E?Se:fe),t&Z||(t&=-4);var de=[e,t,o,Q,R,ne,z,d,m,C],re=n.apply(s,de);return Mi(e)&&yl(re,de),re.placeholder=r,xl(re,e,t)}function Ai(e){var t=Ye[e];return function(n,r){if(n=Rt(n),r=r==null?0:Ze(he(r),292),r&&xo(n)){var o=(je(n)+"e").split("e"),c=t(o[0]+"e"+(+o[1]+r));return o=(je(c)+"e").split("e"),+(o[0]+"e"+(+o[1]-r))}return t(n)}}var Uh=Yn&&1/Br(new Yn([,-0]))[1]==K?function(e){return new Yn(e)}:Ki;function al(e){return function(t){var n=Xe(t);return n==Ft?ri(t):n==Mt?af(t):Zc(t,e(t))}}function Zt(e,t,n,r,o,c,h,d){var m=t&S;if(!m&&typeof e!="function")throw new Ct(x);var C=r?r.length:0;if(C||(t&=-97,r=o=s),h=h===s?h:ke(he(h),0),d=d===s?d:he(d),C-=o?o.length:0,t&Se){var E=r,R=o;r=o=s}var z=m?s:Ni(e),Q=[e,t,n,r,o,E,R,c,h,d];if(z&&sd(Q,z),e=Q[0],t=Q[1],n=Q[2],r=Q[3],o=Q[4],d=Q[9]=Q[9]===s?m?0:e.length:ke(Q[9]-C,0),!d&&t&(Y|ce)&&(t&=-25),!t||t==w)var ne=Yh(e,t,n);else t==Y||t==ce?ne=kh(e,t,d):(t==fe||t==(w|fe))&&!o.length?ne=Wh(e,t,n,r):ne=os.apply(s,Q);var de=z?Yo:yl;return xl(de(ne,Q),e,t)}function ol(e,t,n,r){return e===s||Lt(e,Bn[n])&&!Ce.call(r,n)?t:e}function ll(e,t,n,r,o,c){return Me(e)&&Me(t)&&(c.set(t,e),rs(e,t,s,ll,c),c.delete(t)),e}function qh(e){return vr(e)?s:e}function ul(e,t,n,r,o,c){var h=n&j,d=e.length,m=t.length;if(d!=m&&!(h&&m>d))return!1;var C=c.get(e),E=c.get(t);if(C&&E)return C==t&&E==e;var R=-1,z=!0,Q=n&O?new Sn:s;for(c.set(e,t),c.set(t,e);++R<d;){var ne=e[R],de=t[R];if(r)var re=h?r(de,ne,R,t,e,c):r(ne,de,R,e,t,c);if(re!==s){if(re)continue;z=!1;break}if(Q){if(!Zs(t,function(xe,ve){if(!ar(Q,ve)&&(ne===xe||o(ne,xe,n,r,c)))return Q.push(ve)})){z=!1;break}}else if(!(ne===de||o(ne,de,n,r,c))){z=!1;break}}return c.delete(e),c.delete(t),z}function zh(e,t,n,r,o,c,h){switch(n){case Fn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ir:return!(e.byteLength!=t.byteLength||!c(new zr(e),new zr(t)));case ot:case Qe:case tr:return Lt(+e,+t);case gt:return e.name==t.name&&e.message==t.message;case nr:case rr:return e==t+"";case Ft:var d=ri;case Mt:var m=r&j;if(d||(d=Br),e.size!=t.size&&!m)return!1;var C=h.get(e);if(C)return C==t;r|=O,h.set(e,t);var E=ul(d(e),d(t),r,o,c,h);return h.delete(e),E;case Fr:if(fr)return fr.call(e)==fr.call(t)}return!1}function Hh(e,t,n,r,o,c){var h=n&j,d=Ei(e),m=d.length,C=Ei(t),E=C.length;if(m!=E&&!h)return!1;for(var R=m;R--;){var z=d[R];if(!(h?z in t:Ce.call(t,z)))return!1}var Q=c.get(e),ne=c.get(t);if(Q&&ne)return Q==t&&ne==e;var de=!0;c.set(e,t),c.set(t,e);for(var re=h;++R<m;){z=d[R];var xe=e[z],ve=t[z];if(r)var vt=h?r(ve,xe,z,t,e,c):r(xe,ve,z,e,t,c);if(!(vt===s?xe===ve||o(xe,ve,n,r,c):vt)){de=!1;break}re||(re=z=="constructor")}if(de&&!re){var nt=e.constructor,bt=t.constructor;nt!=bt&&"constructor"in e&&"constructor"in t&&!(typeof nt=="function"&&nt instanceof nt&&typeof bt=="function"&&bt instanceof bt)&&(de=!1)}return c.delete(e),c.delete(t),de}function Xt(e){return Di(gl(e,s,jl),e+"")}function Ei(e){return To(e,Ue,Pi)}function Ti(e){return To(e,ct,cl)}var Ni=Zr?function(e){return Zr.get(e)}:Ki;function fs(e){for(var t=e.name+"",n=kn[t],r=Ce.call(kn,t)?n.length:0;r--;){var o=n[r],c=o.func;if(c==null||c==e)return o.name}return t}function zn(e){var t=Ce.call(u,"placeholder")?u:e;return t.placeholder}function te(){var e=u.iteratee||Vi;return e=e===Vi?Po:e,arguments.length?e(arguments[0],arguments[1]):e}function hs(e,t){var n=e.__data__;return ed(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Ri(e){for(var t=Ue(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,dl(o)]}return t}function Cn(e,t){var n=nf(e,t);return Ro(n)?n:s}function Vh(e){var t=Ce.call(e,bn),n=e[bn];try{e[bn]=s;var r=!0}catch{}var o=Ur.call(e);return r&&(t?e[bn]=n:delete e[bn]),o}var Pi=ii?function(e){return e==null?[]:(e=Ee(e),sn(ii(e),function(t){return mo.call(e,t)}))}:Qi,cl=ii?function(e){for(var t=[];e;)an(t,Pi(e)),e=Hr(e);return t}:Qi,Xe=et;(ai&&Xe(new ai(new ArrayBuffer(1)))!=Fn||lr&&Xe(new lr)!=Ft||oi&&Xe(oi.resolve())!=Ia||Yn&&Xe(new Yn)!=Mt||ur&&Xe(new ur)!=sr)&&(Xe=function(e){var t=et(e),n=t==Vt?e.constructor:s,r=n?An(n):"";if(r)switch(r){case Tf:return Fn;case Nf:return Ft;case Rf:return Ia;case Pf:return Mt;case Ff:return sr}return t});function Gh(e,t,n){for(var r=-1,o=n.length;++r<o;){var c=n[r],h=c.size;switch(c.type){case"drop":e+=h;break;case"dropRight":t-=h;break;case"take":t=Ze(t,e+h);break;case"takeRight":e=ke(e,t-h);break}}return{start:e,end:t}}function Kh(e){var t=e.match(ec);return t?t[1].split(tc):[]}function fl(e,t,n){t=fn(t,e);for(var r=-1,o=t.length,c=!1;++r<o;){var h=Ut(t[r]);if(!(c=e!=null&&n(e,h)))break;e=e[h]}return c||++r!=o?c:(o=e==null?0:e.length,!!o&&_s(o)&&Jt(h,o)&&(ue(e)||En(e)))}function Qh(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ce.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function hl(e){return typeof e.constructor=="function"&&!xr(e)?Wn(Hr(e)):{}}function Zh(e,t,n){var r=e.constructor;switch(t){case ir:return Ii(e);case ot:case Qe:return new r(+e);case Fn:return Mh(e,n);case Rs:case Ps:case Fs:case Ms:case Os:case Ds:case Ls:case $s:case Bs:return Go(e,n);case Ft:return new r;case tr:case rr:return new r(e);case nr:return Oh(e);case Mt:return new r;case Fr:return Dh(e)}}function Xh(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ju,`{
/* [wrapped with `+t+`] */
`)}function Jh(e){return ue(e)||En(e)||!!(yo&&e&&e[yo])}function Jt(e,t){var n=typeof e;return t=t??W,!!t&&(n=="number"||n!="symbol"&&cc.test(e))&&e>-1&&e%1==0&&e<t}function tt(e,t,n){if(!Me(n))return!1;var r=typeof t;return(r=="number"?ut(n)&&Jt(t,n.length):r=="string"&&t in n)?Lt(n[t],e):!1}function Fi(e,t){if(ue(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||_t(e)?!0:Ku.test(e)||!Gu.test(e)||t!=null&&e in Ee(t)}function ed(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Mi(e){var t=fs(e),n=u[t];if(typeof n!="function"||!(t in _e.prototype))return!1;if(e===n)return!0;var r=Ni(n);return!!r&&e===r[0]}function td(e){return!!ho&&ho in e}var nd=kr?en:Zi;function xr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Bn;return e===n}function dl(e){return e===e&&!Me(e)}function pl(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==s||e in Ee(n))}}function rd(e){var t=ys(e,function(r){return n.size===P&&n.clear(),r}),n=t.cache;return t}function sd(e,t){var n=e[1],r=t[1],o=n|r,c=o<(w|S|F),h=r==F&&n==Y||r==F&&n==V&&e[7].length<=t[8]||r==(F|V)&&t[7].length<=t[8]&&n==Y;if(!(c||h))return e;r&w&&(e[2]=t[2],o|=n&w?0:Z);var d=t[3];if(d){var m=e[3];e[3]=m?Qo(m,d,t[4]):d,e[4]=m?on(e[3],N):t[4]}return d=t[5],d&&(m=e[5],e[5]=m?Zo(m,d,t[6]):d,e[6]=m?on(e[5],N):t[6]),d=t[7],d&&(e[7]=d),r&F&&(e[8]=e[8]==null?t[8]:Ze(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function id(e){var t=[];if(e!=null)for(var n in Ee(e))t.push(n);return t}function ad(e){return Ur.call(e)}function gl(e,t,n){return t=ke(t===s?e.length-1:t,0),function(){for(var r=arguments,o=-1,c=ke(r.length-t,0),h=v(c);++o<c;)h[o]=r[t+o];o=-1;for(var d=v(t+1);++o<t;)d[o]=r[o];return d[t]=n(h),mt(e,this,d)}}function ml(e,t){return t.length<2?e:In(e,Tt(t,0,-1))}function od(e,t){for(var n=e.length,r=Ze(t.length,n),o=lt(e);r--;){var c=t[r];e[r]=Jt(c,n)?o[c]:s}return e}function Oi(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var yl=_l(Yo),_r=wf||function(e,t){return He.setTimeout(e,t)},Di=_l(Nh);function xl(e,t,n){var r=t+"";return Di(e,Xh(r,ld(Kh(r),n)))}function _l(e){var t=0,n=0;return function(){var r=Cf(),o=Je-(r-n);if(n=r,o>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(s,arguments)}}function ds(e,t){var n=-1,r=e.length,o=r-1;for(t=t===s?r:t;++n<t;){var c=xi(n,o),h=e[c];e[c]=e[n],e[n]=h}return e.length=t,e}var vl=rd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Qu,function(n,r,o,c){t.push(o?c.replace(sc,"$1"):r||n)}),t});function Ut(e){if(typeof e=="string"||_t(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function An(e){if(e!=null){try{return Wr.call(e)}catch{}try{return e+""}catch{}}return""}function ld(e,t){return It(ie,function(n){var r="_."+n[0];t&n[1]&&!Lr(e,r)&&e.push(r)}),e.sort()}function bl(e){if(e instanceof _e)return e.clone();var t=new At(e.__wrapped__,e.__chain__);return t.__actions__=lt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ud(e,t,n){(n?tt(e,t,n):t===s)?t=1:t=ke(he(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var o=0,c=0,h=v(Kr(r/t));o<r;)h[c++]=Tt(e,o,o+=t);return h}function cd(e){for(var t=-1,n=e==null?0:e.length,r=0,o=[];++t<n;){var c=e[t];c&&(o[r++]=c)}return o}function fd(){var e=arguments.length;if(!e)return[];for(var t=v(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return an(ue(n)?lt(n):[n],Ve(t,1))}var hd=pe(function(e,t){return De(e)?dr(e,Ve(t,1,De,!0)):[]}),dd=pe(function(e,t){var n=Nt(t);return De(n)&&(n=s),De(e)?dr(e,Ve(t,1,De,!0),te(n,2)):[]}),pd=pe(function(e,t){var n=Nt(t);return De(n)&&(n=s),De(e)?dr(e,Ve(t,1,De,!0),s,n):[]});function gd(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:he(t),Tt(e,t<0?0:t,r)):[]}function md(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:he(t),t=r-t,Tt(e,0,t<0?0:t)):[]}function yd(e,t){return e&&e.length?is(e,te(t,3),!0,!0):[]}function xd(e,t){return e&&e.length?is(e,te(t,3),!0):[]}function _d(e,t,n,r){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&tt(e,t,n)&&(n=0,r=o),fh(e,t,n,r)):[]}function wl(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:he(n);return o<0&&(o=ke(r+o,0)),$r(e,te(t,3),o)}function Sl(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r-1;return n!==s&&(o=he(n),o=n<0?ke(r+o,0):Ze(o,r-1)),$r(e,te(t,3),o,!0)}function jl(e){var t=e==null?0:e.length;return t?Ve(e,1):[]}function vd(e){var t=e==null?0:e.length;return t?Ve(e,K):[]}function bd(e,t){var n=e==null?0:e.length;return n?(t=t===s?1:he(t),Ve(e,t)):[]}function wd(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}function Il(e){return e&&e.length?e[0]:s}function Sd(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:he(n);return o<0&&(o=ke(r+o,0)),On(e,t,o)}function jd(e){var t=e==null?0:e.length;return t?Tt(e,0,-1):[]}var Id=pe(function(e){var t=Pe(e,Si);return t.length&&t[0]===e[0]?di(t):[]}),Cd=pe(function(e){var t=Nt(e),n=Pe(e,Si);return t===Nt(n)?t=s:n.pop(),n.length&&n[0]===e[0]?di(n,te(t,2)):[]}),Ad=pe(function(e){var t=Nt(e),n=Pe(e,Si);return t=typeof t=="function"?t:s,t&&n.pop(),n.length&&n[0]===e[0]?di(n,s,t):[]});function Ed(e,t){return e==null?"":jf.call(e,t)}function Nt(e){var t=e==null?0:e.length;return t?e[t-1]:s}function Td(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r;return n!==s&&(o=he(n),o=o<0?ke(r+o,0):Ze(o,r-1)),t===t?lf(e,t,o):$r(e,so,o,!0)}function Nd(e,t){return e&&e.length?Do(e,he(t)):s}var Rd=pe(Cl);function Cl(e,t){return e&&e.length&&t&&t.length?yi(e,t):e}function Pd(e,t,n){return e&&e.length&&t&&t.length?yi(e,t,te(n,2)):e}function Fd(e,t,n){return e&&e.length&&t&&t.length?yi(e,t,s,n):e}var Md=Xt(function(e,t){var n=e==null?0:e.length,r=ui(e,t);return Bo(e,Pe(t,function(o){return Jt(o,n)?+o:o}).sort(Ko)),r});function Od(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,o=[],c=e.length;for(t=te(t,3);++r<c;){var h=e[r];t(h,r,e)&&(n.push(h),o.push(r))}return Bo(e,o),n}function Li(e){return e==null?e:Ef.call(e)}function Dd(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&tt(e,t,n)?(t=0,n=r):(t=t==null?0:he(t),n=n===s?r:he(n)),Tt(e,t,n)):[]}function Ld(e,t){return ss(e,t)}function $d(e,t,n){return vi(e,t,te(n,2))}function Bd(e,t){var n=e==null?0:e.length;if(n){var r=ss(e,t);if(r<n&&Lt(e[r],t))return r}return-1}function Yd(e,t){return ss(e,t,!0)}function kd(e,t,n){return vi(e,t,te(n,2),!0)}function Wd(e,t){var n=e==null?0:e.length;if(n){var r=ss(e,t,!0)-1;if(Lt(e[r],t))return r}return-1}function Ud(e){return e&&e.length?ko(e):[]}function qd(e,t){return e&&e.length?ko(e,te(t,2)):[]}function zd(e){var t=e==null?0:e.length;return t?Tt(e,1,t):[]}function Hd(e,t,n){return e&&e.length?(t=n||t===s?1:he(t),Tt(e,0,t<0?0:t)):[]}function Vd(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===s?1:he(t),t=r-t,Tt(e,t<0?0:t,r)):[]}function Gd(e,t){return e&&e.length?is(e,te(t,3),!1,!0):[]}function Kd(e,t){return e&&e.length?is(e,te(t,3)):[]}var Qd=pe(function(e){return cn(Ve(e,1,De,!0))}),Zd=pe(function(e){var t=Nt(e);return De(t)&&(t=s),cn(Ve(e,1,De,!0),te(t,2))}),Xd=pe(function(e){var t=Nt(e);return t=typeof t=="function"?t:s,cn(Ve(e,1,De,!0),s,t)});function Jd(e){return e&&e.length?cn(e):[]}function ep(e,t){return e&&e.length?cn(e,te(t,2)):[]}function tp(e,t){return t=typeof t=="function"?t:s,e&&e.length?cn(e,s,t):[]}function $i(e){if(!(e&&e.length))return[];var t=0;return e=sn(e,function(n){if(De(n))return t=ke(n.length,t),!0}),ti(t,function(n){return Pe(e,Xs(n))})}function Al(e,t){if(!(e&&e.length))return[];var n=$i(e);return t==null?n:Pe(n,function(r){return mt(t,s,r)})}var np=pe(function(e,t){return De(e)?dr(e,t):[]}),rp=pe(function(e){return wi(sn(e,De))}),sp=pe(function(e){var t=Nt(e);return De(t)&&(t=s),wi(sn(e,De),te(t,2))}),ip=pe(function(e){var t=Nt(e);return t=typeof t=="function"?t:s,wi(sn(e,De),s,t)}),ap=pe($i);function op(e,t){return zo(e||[],t||[],hr)}function lp(e,t){return zo(e||[],t||[],mr)}var up=pe(function(e){var t=e.length,n=t>1?e[t-1]:s;return n=typeof n=="function"?(e.pop(),n):s,Al(e,n)});function El(e){var t=u(e);return t.__chain__=!0,t}function cp(e,t){return t(e),e}function ps(e,t){return t(e)}var fp=Xt(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(c){return ui(c,e)};return t>1||this.__actions__.length||!(r instanceof _e)||!Jt(n)?this.thru(o):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:ps,args:[o],thisArg:s}),new At(r,this.__chain__).thru(function(c){return t&&!c.length&&c.push(s),c}))});function hp(){return El(this)}function dp(){return new At(this.value(),this.__chain__)}function pp(){this.__values__===s&&(this.__values__=Wl(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function gp(){return this}function mp(e){for(var t,n=this;n instanceof Jr;){var r=bl(n);r.__index__=0,r.__values__=s,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function yp(){var e=this.__wrapped__;if(e instanceof _e){var t=e;return this.__actions__.length&&(t=new _e(this)),t=t.reverse(),t.__actions__.push({func:ps,args:[Li],thisArg:s}),new At(t,this.__chain__)}return this.thru(Li)}function xp(){return qo(this.__wrapped__,this.__actions__)}var _p=as(function(e,t,n){Ce.call(e,n)?++e[n]:Qt(e,n,1)});function vp(e,t,n){var r=ue(e)?no:ch;return n&&tt(e,t,n)&&(t=s),r(e,te(t,3))}function bp(e,t){var n=ue(e)?sn:Ao;return n(e,te(t,3))}var wp=tl(wl),Sp=tl(Sl);function jp(e,t){return Ve(gs(e,t),1)}function Ip(e,t){return Ve(gs(e,t),K)}function Cp(e,t,n){return n=n===s?1:he(n),Ve(gs(e,t),n)}function Tl(e,t){var n=ue(e)?It:un;return n(e,te(t,3))}function Nl(e,t){var n=ue(e)?qc:Co;return n(e,te(t,3))}var Ap=as(function(e,t,n){Ce.call(e,n)?e[n].push(t):Qt(e,n,[t])});function Ep(e,t,n,r){e=ut(e)?e:Vn(e),n=n&&!r?he(n):0;var o=e.length;return n<0&&(n=ke(o+n,0)),vs(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&On(e,t,n)>-1}var Tp=pe(function(e,t,n){var r=-1,o=typeof t=="function",c=ut(e)?v(e.length):[];return un(e,function(h){c[++r]=o?mt(t,h,n):pr(h,t,n)}),c}),Np=as(function(e,t,n){Qt(e,n,t)});function gs(e,t){var n=ue(e)?Pe:Fo;return n(e,te(t,3))}function Rp(e,t,n,r){return e==null?[]:(ue(t)||(t=t==null?[]:[t]),n=r?s:n,ue(n)||(n=n==null?[]:[n]),Lo(e,t,n))}var Pp=as(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Fp(e,t,n){var r=ue(e)?Qs:ao,o=arguments.length<3;return r(e,te(t,4),n,o,un)}function Mp(e,t,n){var r=ue(e)?zc:ao,o=arguments.length<3;return r(e,te(t,4),n,o,Co)}function Op(e,t){var n=ue(e)?sn:Ao;return n(e,xs(te(t,3)))}function Dp(e){var t=ue(e)?wo:Eh;return t(e)}function Lp(e,t,n){(n?tt(e,t,n):t===s)?t=1:t=he(t);var r=ue(e)?ih:Th;return r(e,t)}function $p(e){var t=ue(e)?ah:Rh;return t(e)}function Bp(e){if(e==null)return 0;if(ut(e))return vs(e)?Ln(e):e.length;var t=Xe(e);return t==Ft||t==Mt?e.size:gi(e).length}function Yp(e,t,n){var r=ue(e)?Zs:Ph;return n&&tt(e,t,n)&&(t=s),r(e,te(t,3))}var kp=pe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tt(e,t[0],t[1])?t=[]:n>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Lo(e,Ve(t,1),[])}),ms=bf||function(){return He.Date.now()};function Wp(e,t){if(typeof t!="function")throw new Ct(x);return e=he(e),function(){if(--e<1)return t.apply(this,arguments)}}function Rl(e,t,n){return t=n?s:t,t=e&&t==null?e.length:t,Zt(e,F,s,s,s,s,t)}function Pl(e,t){var n;if(typeof t!="function")throw new Ct(x);return e=he(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=s),n}}var Bi=pe(function(e,t,n){var r=w;if(n.length){var o=on(n,zn(Bi));r|=fe}return Zt(e,r,t,n,o)}),Fl=pe(function(e,t,n){var r=w|S;if(n.length){var o=on(n,zn(Fl));r|=fe}return Zt(t,r,e,n,o)});function Ml(e,t,n){t=n?s:t;var r=Zt(e,Y,s,s,s,s,s,t);return r.placeholder=Ml.placeholder,r}function Ol(e,t,n){t=n?s:t;var r=Zt(e,ce,s,s,s,s,s,t);return r.placeholder=Ol.placeholder,r}function Dl(e,t,n){var r,o,c,h,d,m,C=0,E=!1,R=!1,z=!0;if(typeof e!="function")throw new Ct(x);t=Rt(t)||0,Me(n)&&(E=!!n.leading,R="maxWait"in n,c=R?ke(Rt(n.maxWait)||0,t):c,z="trailing"in n?!!n.trailing:z);function Q(Le){var $t=r,nn=o;return r=o=s,C=Le,h=e.apply(nn,$t),h}function ne(Le){return C=Le,d=_r(xe,t),E?Q(Le):h}function de(Le){var $t=Le-m,nn=Le-C,tu=t-$t;return R?Ze(tu,c-nn):tu}function re(Le){var $t=Le-m,nn=Le-C;return m===s||$t>=t||$t<0||R&&nn>=c}function xe(){var Le=ms();if(re(Le))return ve(Le);d=_r(xe,de(Le))}function ve(Le){return d=s,z&&r?Q(Le):(r=o=s,h)}function vt(){d!==s&&Ho(d),C=0,r=m=o=d=s}function nt(){return d===s?h:ve(ms())}function bt(){var Le=ms(),$t=re(Le);if(r=arguments,o=this,m=Le,$t){if(d===s)return ne(m);if(R)return Ho(d),d=_r(xe,t),Q(m)}return d===s&&(d=_r(xe,t)),h}return bt.cancel=vt,bt.flush=nt,bt}var Up=pe(function(e,t){return Io(e,1,t)}),qp=pe(function(e,t,n){return Io(e,Rt(t)||0,n)});function zp(e){return Zt(e,k)}function ys(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ct(x);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],c=n.cache;if(c.has(o))return c.get(o);var h=e.apply(this,r);return n.cache=c.set(o,h)||c,h};return n.cache=new(ys.Cache||Kt),n}ys.Cache=Kt;function xs(e){if(typeof e!="function")throw new Ct(x);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Hp(e){return Pl(2,e)}var Vp=Fh(function(e,t){t=t.length==1&&ue(t[0])?Pe(t[0],yt(te())):Pe(Ve(t,1),yt(te()));var n=t.length;return pe(function(r){for(var o=-1,c=Ze(r.length,n);++o<c;)r[o]=t[o].call(this,r[o]);return mt(e,this,r)})}),Yi=pe(function(e,t){var n=on(t,zn(Yi));return Zt(e,fe,s,t,n)}),Ll=pe(function(e,t){var n=on(t,zn(Ll));return Zt(e,Se,s,t,n)}),Gp=Xt(function(e,t){return Zt(e,V,s,s,s,t)});function Kp(e,t){if(typeof e!="function")throw new Ct(x);return t=t===s?t:he(t),pe(e,t)}function Qp(e,t){if(typeof e!="function")throw new Ct(x);return t=t==null?0:ke(he(t),0),pe(function(n){var r=n[t],o=hn(n,0,t);return r&&an(o,r),mt(e,this,o)})}function Zp(e,t,n){var r=!0,o=!0;if(typeof e!="function")throw new Ct(x);return Me(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Dl(e,t,{leading:r,maxWait:t,trailing:o})}function Xp(e){return Rl(e,1)}function Jp(e,t){return Yi(ji(t),e)}function eg(){if(!arguments.length)return[];var e=arguments[0];return ue(e)?e:[e]}function tg(e){return Et(e,_)}function ng(e,t){return t=typeof t=="function"?t:s,Et(e,_,t)}function rg(e){return Et(e,b|_)}function sg(e,t){return t=typeof t=="function"?t:s,Et(e,b|_,t)}function ig(e,t){return t==null||jo(e,t,Ue(t))}function Lt(e,t){return e===t||e!==e&&t!==t}var ag=cs(hi),og=cs(function(e,t){return e>=t}),En=No(function(){return arguments}())?No:function(e){return Oe(e)&&Ce.call(e,"callee")&&!mo.call(e,"callee")},ue=v.isArray,lg=Qa?yt(Qa):mh;function ut(e){return e!=null&&_s(e.length)&&!en(e)}function De(e){return Oe(e)&&ut(e)}function ug(e){return e===!0||e===!1||Oe(e)&&et(e)==ot}var dn=Sf||Zi,cg=Za?yt(Za):yh;function fg(e){return Oe(e)&&e.nodeType===1&&!vr(e)}function hg(e){if(e==null)return!0;if(ut(e)&&(ue(e)||typeof e=="string"||typeof e.splice=="function"||dn(e)||Hn(e)||En(e)))return!e.length;var t=Xe(e);if(t==Ft||t==Mt)return!e.size;if(xr(e))return!gi(e).length;for(var n in e)if(Ce.call(e,n))return!1;return!0}function dg(e,t){return gr(e,t)}function pg(e,t,n){n=typeof n=="function"?n:s;var r=n?n(e,t):s;return r===s?gr(e,t,s,n):!!r}function ki(e){if(!Oe(e))return!1;var t=et(e);return t==gt||t==Be||typeof e.message=="string"&&typeof e.name=="string"&&!vr(e)}function gg(e){return typeof e=="number"&&xo(e)}function en(e){if(!Me(e))return!1;var t=et(e);return t==Yt||t==_n||t==St||t==$u}function $l(e){return typeof e=="number"&&e==he(e)}function _s(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=W}function Me(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Oe(e){return e!=null&&typeof e=="object"}var Bl=Xa?yt(Xa):_h;function mg(e,t){return e===t||pi(e,t,Ri(t))}function yg(e,t,n){return n=typeof n=="function"?n:s,pi(e,t,Ri(t),n)}function xg(e){return Yl(e)&&e!=+e}function _g(e){if(nd(e))throw new le(y);return Ro(e)}function vg(e){return e===null}function bg(e){return e==null}function Yl(e){return typeof e=="number"||Oe(e)&&et(e)==tr}function vr(e){if(!Oe(e)||et(e)!=Vt)return!1;var t=Hr(e);if(t===null)return!0;var n=Ce.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Wr.call(n)==yf}var Wi=Ja?yt(Ja):vh;function wg(e){return $l(e)&&e>=-9007199254740991&&e<=W}var kl=eo?yt(eo):bh;function vs(e){return typeof e=="string"||!ue(e)&&Oe(e)&&et(e)==rr}function _t(e){return typeof e=="symbol"||Oe(e)&&et(e)==Fr}var Hn=to?yt(to):wh;function Sg(e){return e===s}function jg(e){return Oe(e)&&Xe(e)==sr}function Ig(e){return Oe(e)&&et(e)==Yu}var Cg=cs(mi),Ag=cs(function(e,t){return e<=t});function Wl(e){if(!e)return[];if(ut(e))return vs(e)?Ot(e):lt(e);if(or&&e[or])return sf(e[or]());var t=Xe(e),n=t==Ft?ri:t==Mt?Br:Vn;return n(e)}function tn(e){if(!e)return e===0?e:0;if(e=Rt(e),e===K||e===-1/0){var t=e<0?-1:1;return t*ae}return e===e?e:0}function he(e){var t=tn(e),n=t%1;return t===t?n?t-n:t:0}function Ul(e){return e?jn(he(e),0,ge):0}function Rt(e){if(typeof e=="number")return e;if(_t(e))return se;if(Me(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Me(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=oo(e);var n=oc.test(e);return n||uc.test(e)?kc(e.slice(2),n?2:8):ac.test(e)?se:+e}function ql(e){return Wt(e,ct(e))}function Eg(e){return e?jn(he(e),-9007199254740991,W):e===0?e:0}function je(e){return e==null?"":xt(e)}var Tg=Un(function(e,t){if(xr(t)||ut(t)){Wt(t,Ue(t),e);return}for(var n in t)Ce.call(t,n)&&hr(e,n,t[n])}),zl=Un(function(e,t){Wt(t,ct(t),e)}),bs=Un(function(e,t,n,r){Wt(t,ct(t),e,r)}),Ng=Un(function(e,t,n,r){Wt(t,Ue(t),e,r)}),Rg=Xt(ui);function Pg(e,t){var n=Wn(e);return t==null?n:So(n,t)}var Fg=pe(function(e,t){e=Ee(e);var n=-1,r=t.length,o=r>2?t[2]:s;for(o&&tt(t[0],t[1],o)&&(r=1);++n<r;)for(var c=t[n],h=ct(c),d=-1,m=h.length;++d<m;){var C=h[d],E=e[C];(E===s||Lt(E,Bn[C])&&!Ce.call(e,C))&&(e[C]=c[C])}return e}),Mg=pe(function(e){return e.push(s,ll),mt(Hl,s,e)});function Og(e,t){return ro(e,te(t,3),kt)}function Dg(e,t){return ro(e,te(t,3),fi)}function Lg(e,t){return e==null?e:ci(e,te(t,3),ct)}function $g(e,t){return e==null?e:Eo(e,te(t,3),ct)}function Bg(e,t){return e&&kt(e,te(t,3))}function Yg(e,t){return e&&fi(e,te(t,3))}function kg(e){return e==null?[]:ns(e,Ue(e))}function Wg(e){return e==null?[]:ns(e,ct(e))}function Ui(e,t,n){var r=e==null?s:In(e,t);return r===s?n:r}function Ug(e,t){return e!=null&&fl(e,t,hh)}function qi(e,t){return e!=null&&fl(e,t,dh)}var qg=rl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Ur.call(t)),e[t]=n},Hi(ft)),zg=rl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Ur.call(t)),Ce.call(e,t)?e[t].push(n):e[t]=[n]},te),Hg=pe(pr);function Ue(e){return ut(e)?bo(e):gi(e)}function ct(e){return ut(e)?bo(e,!0):Sh(e)}function Vg(e,t){var n={};return t=te(t,3),kt(e,function(r,o,c){Qt(n,t(r,o,c),r)}),n}function Gg(e,t){var n={};return t=te(t,3),kt(e,function(r,o,c){Qt(n,o,t(r,o,c))}),n}var Kg=Un(function(e,t,n){rs(e,t,n)}),Hl=Un(function(e,t,n,r){rs(e,t,n,r)}),Qg=Xt(function(e,t){var n={};if(e==null)return n;var r=!1;t=Pe(t,function(c){return c=fn(c,e),r||(r=c.length>1),c}),Wt(e,Ti(e),n),r&&(n=Et(n,b|M|_,qh));for(var o=t.length;o--;)bi(n,t[o]);return n});function Zg(e,t){return Vl(e,xs(te(t)))}var Xg=Xt(function(e,t){return e==null?{}:Ih(e,t)});function Vl(e,t){if(e==null)return{};var n=Pe(Ti(e),function(r){return[r]});return t=te(t),$o(e,n,function(r,o){return t(r,o[0])})}function Jg(e,t,n){t=fn(t,e);var r=-1,o=t.length;for(o||(o=1,e=s);++r<o;){var c=e==null?s:e[Ut(t[r])];c===s&&(r=o,c=n),e=en(c)?c.call(e):c}return e}function em(e,t,n){return e==null?e:mr(e,t,n)}function tm(e,t,n,r){return r=typeof r=="function"?r:s,e==null?e:mr(e,t,n,r)}var Gl=al(Ue),Kl=al(ct);function nm(e,t,n){var r=ue(e),o=r||dn(e)||Hn(e);if(t=te(t,4),n==null){var c=e&&e.constructor;o?n=r?new c:[]:Me(e)?n=en(c)?Wn(Hr(e)):{}:n={}}return(o?It:kt)(e,function(h,d,m){return t(n,h,d,m)}),n}function rm(e,t){return e==null?!0:bi(e,t)}function sm(e,t,n){return e==null?e:Uo(e,t,ji(n))}function im(e,t,n,r){return r=typeof r=="function"?r:s,e==null?e:Uo(e,t,ji(n),r)}function Vn(e){return e==null?[]:ni(e,Ue(e))}function am(e){return e==null?[]:ni(e,ct(e))}function om(e,t,n){return n===s&&(n=t,t=s),n!==s&&(n=Rt(n),n=n===n?n:0),t!==s&&(t=Rt(t),t=t===t?t:0),jn(Rt(e),t,n)}function lm(e,t,n){return t=tn(t),n===s?(n=t,t=0):n=tn(n),e=Rt(e),ph(e,t,n)}function um(e,t,n){if(n&&typeof n!="boolean"&&tt(e,t,n)&&(t=n=s),n===s&&(typeof t=="boolean"?(n=t,t=s):typeof e=="boolean"&&(n=e,e=s)),e===s&&t===s?(e=0,t=1):(e=tn(e),t===s?(t=e,e=0):t=tn(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=_o();return Ze(e+o*(t-e+Yc("1e-"+((o+"").length-1))),t)}return xi(e,t)}var cm=qn(function(e,t,n){return t=t.toLowerCase(),e+(n?Ql(t):t)});function Ql(e){return zi(je(e).toLowerCase())}function Zl(e){return e=je(e),e&&e.replace(fc,Jc).replace(Nc,"")}function fm(e,t,n){e=je(e),t=xt(t);var r=e.length;n=n===s?r:jn(he(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function hm(e){return e=je(e),e&&zu.test(e)?e.replace(Aa,ef):e}function dm(e){return e=je(e),e&&Zu.test(e)?e.replace(Ys,"\\$&"):e}var pm=qn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),gm=qn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),mm=el("toLowerCase");function ym(e,t,n){e=je(e),t=he(t);var r=t?Ln(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return us(Qr(o),n)+e+us(Kr(o),n)}function xm(e,t,n){e=je(e),t=he(t);var r=t?Ln(e):0;return t&&r<t?e+us(t-r,n):e}function _m(e,t,n){e=je(e),t=he(t);var r=t?Ln(e):0;return t&&r<t?us(t-r,n)+e:e}function vm(e,t,n){return n||t==null?t=0:t&&(t=+t),Af(je(e).replace(ks,""),t||0)}function bm(e,t,n){return(n?tt(e,t,n):t===s)?t=1:t=he(t),_i(je(e),t)}function wm(){var e=arguments,t=je(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Sm=qn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function jm(e,t,n){return n&&typeof n!="number"&&tt(e,t,n)&&(t=n=s),n=n===s?ge:n>>>0,n?(e=je(e),e&&(typeof t=="string"||t!=null&&!Wi(t))&&(t=xt(t),!t&&Dn(e))?hn(Ot(e),0,n):e.split(t,n)):[]}var Im=qn(function(e,t,n){return e+(n?" ":"")+zi(t)});function Cm(e,t,n){return e=je(e),n=n==null?0:jn(he(n),0,e.length),t=xt(t),e.slice(n,n+t.length)==t}function Am(e,t,n){var r=u.templateSettings;n&&tt(e,t,n)&&(t=s),e=je(e),t=bs({},t,r,ol);var o=bs({},t.imports,r.imports,ol),c=Ue(o),h=ni(o,c),d,m,C=0,E=t.interpolate||Mr,R="__p += '",z=si((t.escape||Mr).source+"|"+E.source+"|"+(E===Ea?ic:Mr).source+"|"+(t.evaluate||Mr).source+"|$","g"),Q="//# sourceURL="+(Ce.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Oc+"]")+`
`;e.replace(z,function(re,xe,ve,vt,nt,bt){return ve||(ve=vt),R+=e.slice(C,bt).replace(hc,tf),xe&&(d=!0,R+=`' +
__e(`+xe+`) +
'`),nt&&(m=!0,R+=`';
`+nt+`;
__p += '`),ve&&(R+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),C=bt+re.length,re}),R+=`';
`;var ne=Ce.call(t,"variable")&&t.variable;if(!ne)R=`with (obj) {
`+R+`
}
`;else if(rc.test(ne))throw new le(A);R=(m?R.replace(ku,""):R).replace(Wu,"$1").replace(Uu,"$1;"),R="function("+(ne||"obj")+`) {
`+(ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var de=Jl(function(){return we(c,Q+"return "+R).apply(s,h)});if(de.source=R,ki(de))throw de;return de}function Em(e){return je(e).toLowerCase()}function Tm(e){return je(e).toUpperCase()}function Nm(e,t,n){if(e=je(e),e&&(n||t===s))return oo(e);if(!e||!(t=xt(t)))return e;var r=Ot(e),o=Ot(t),c=lo(r,o),h=uo(r,o)+1;return hn(r,c,h).join("")}function Rm(e,t,n){if(e=je(e),e&&(n||t===s))return e.slice(0,fo(e)+1);if(!e||!(t=xt(t)))return e;var r=Ot(e),o=uo(r,Ot(t))+1;return hn(r,0,o).join("")}function Pm(e,t,n){if(e=je(e),e&&(n||t===s))return e.replace(ks,"");if(!e||!(t=xt(t)))return e;var r=Ot(e),o=lo(r,Ot(t));return hn(r,o).join("")}function Fm(e,t){var n=X,r=ee;if(Me(t)){var o="separator"in t?t.separator:o;n="length"in t?he(t.length):n,r="omission"in t?xt(t.omission):r}e=je(e);var c=e.length;if(Dn(e)){var h=Ot(e);c=h.length}if(n>=c)return e;var d=n-Ln(r);if(d<1)return r;var m=h?hn(h,0,d).join(""):e.slice(0,d);if(o===s)return m+r;if(h&&(d+=m.length-d),Wi(o)){if(e.slice(d).search(o)){var C,E=m;for(o.global||(o=si(o.source,je(Ta.exec(o))+"g")),o.lastIndex=0;C=o.exec(E);)var R=C.index;m=m.slice(0,R===s?d:R)}}else if(e.indexOf(xt(o),d)!=d){var z=m.lastIndexOf(o);z>-1&&(m=m.slice(0,z))}return m+r}function Mm(e){return e=je(e),e&&qu.test(e)?e.replace(Ca,uf):e}var Om=qn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),zi=el("toUpperCase");function Xl(e,t,n){return e=je(e),t=n?s:t,t===s?rf(e)?hf(e):Gc(e):e.match(t)||[]}var Jl=pe(function(e,t){try{return mt(e,s,t)}catch(n){return ki(n)?n:new le(n)}}),Dm=Xt(function(e,t){return It(t,function(n){n=Ut(n),Qt(e,n,Bi(e[n],e))}),e});function Lm(e){var t=e==null?0:e.length,n=te();return e=t?Pe(e,function(r){if(typeof r[1]!="function")throw new Ct(x);return[n(r[0]),r[1]]}):[],pe(function(r){for(var o=-1;++o<t;){var c=e[o];if(mt(c[0],this,r))return mt(c[1],this,r)}})}function $m(e){return uh(Et(e,b))}function Hi(e){return function(){return e}}function Bm(e,t){return e==null||e!==e?t:e}var Ym=nl(),km=nl(!0);function ft(e){return e}function Vi(e){return Po(typeof e=="function"?e:Et(e,b))}function Wm(e){return Mo(Et(e,b))}function Um(e,t){return Oo(e,Et(t,b))}var qm=pe(function(e,t){return function(n){return pr(n,e,t)}}),zm=pe(function(e,t){return function(n){return pr(e,n,t)}});function Gi(e,t,n){var r=Ue(t),o=ns(t,r);n==null&&!(Me(t)&&(o.length||!r.length))&&(n=t,t=e,e=this,o=ns(t,Ue(t)));var c=!(Me(n)&&"chain"in n)||!!n.chain,h=en(e);return It(o,function(d){var m=t[d];e[d]=m,h&&(e.prototype[d]=function(){var C=this.__chain__;if(c||C){var E=e(this.__wrapped__),R=E.__actions__=lt(this.__actions__);return R.push({func:m,args:arguments,thisArg:e}),E.__chain__=C,E}return m.apply(e,an([this.value()],arguments))})}),e}function Hm(){return He._===this&&(He._=xf),this}function Ki(){}function Vm(e){return e=he(e),pe(function(t){return Do(t,e)})}var Gm=Ci(Pe),Km=Ci(no),Qm=Ci(Zs);function eu(e){return Fi(e)?Xs(Ut(e)):Ch(e)}function Zm(e){return function(t){return e==null?s:In(e,t)}}var Xm=sl(),Jm=sl(!0);function Qi(){return[]}function Zi(){return!1}function ey(){return{}}function ty(){return""}function ny(){return!0}function ry(e,t){if(e=he(e),e<1||e>W)return[];var n=ge,r=Ze(e,ge);t=te(t),e-=ge;for(var o=ti(r,t);++n<e;)t(n);return o}function sy(e){return ue(e)?Pe(e,Ut):_t(e)?[e]:lt(vl(je(e)))}function iy(e){var t=++mf;return je(e)+t}var ay=ls(function(e,t){return e+t},0),oy=Ai("ceil"),ly=ls(function(e,t){return e/t},1),uy=Ai("floor");function cy(e){return e&&e.length?ts(e,ft,hi):s}function fy(e,t){return e&&e.length?ts(e,te(t,2),hi):s}function hy(e){return io(e,ft)}function dy(e,t){return io(e,te(t,2))}function py(e){return e&&e.length?ts(e,ft,mi):s}function gy(e,t){return e&&e.length?ts(e,te(t,2),mi):s}var my=ls(function(e,t){return e*t},1),yy=Ai("round"),xy=ls(function(e,t){return e-t},0);function _y(e){return e&&e.length?ei(e,ft):0}function vy(e,t){return e&&e.length?ei(e,te(t,2)):0}return u.after=Wp,u.ary=Rl,u.assign=Tg,u.assignIn=zl,u.assignInWith=bs,u.assignWith=Ng,u.at=Rg,u.before=Pl,u.bind=Bi,u.bindAll=Dm,u.bindKey=Fl,u.castArray=eg,u.chain=El,u.chunk=ud,u.compact=cd,u.concat=fd,u.cond=Lm,u.conforms=$m,u.constant=Hi,u.countBy=_p,u.create=Pg,u.curry=Ml,u.curryRight=Ol,u.debounce=Dl,u.defaults=Fg,u.defaultsDeep=Mg,u.defer=Up,u.delay=qp,u.difference=hd,u.differenceBy=dd,u.differenceWith=pd,u.drop=gd,u.dropRight=md,u.dropRightWhile=yd,u.dropWhile=xd,u.fill=_d,u.filter=bp,u.flatMap=jp,u.flatMapDeep=Ip,u.flatMapDepth=Cp,u.flatten=jl,u.flattenDeep=vd,u.flattenDepth=bd,u.flip=zp,u.flow=Ym,u.flowRight=km,u.fromPairs=wd,u.functions=kg,u.functionsIn=Wg,u.groupBy=Ap,u.initial=jd,u.intersection=Id,u.intersectionBy=Cd,u.intersectionWith=Ad,u.invert=qg,u.invertBy=zg,u.invokeMap=Tp,u.iteratee=Vi,u.keyBy=Np,u.keys=Ue,u.keysIn=ct,u.map=gs,u.mapKeys=Vg,u.mapValues=Gg,u.matches=Wm,u.matchesProperty=Um,u.memoize=ys,u.merge=Kg,u.mergeWith=Hl,u.method=qm,u.methodOf=zm,u.mixin=Gi,u.negate=xs,u.nthArg=Vm,u.omit=Qg,u.omitBy=Zg,u.once=Hp,u.orderBy=Rp,u.over=Gm,u.overArgs=Vp,u.overEvery=Km,u.overSome=Qm,u.partial=Yi,u.partialRight=Ll,u.partition=Pp,u.pick=Xg,u.pickBy=Vl,u.property=eu,u.propertyOf=Zm,u.pull=Rd,u.pullAll=Cl,u.pullAllBy=Pd,u.pullAllWith=Fd,u.pullAt=Md,u.range=Xm,u.rangeRight=Jm,u.rearg=Gp,u.reject=Op,u.remove=Od,u.rest=Kp,u.reverse=Li,u.sampleSize=Lp,u.set=em,u.setWith=tm,u.shuffle=$p,u.slice=Dd,u.sortBy=kp,u.sortedUniq=Ud,u.sortedUniqBy=qd,u.split=jm,u.spread=Qp,u.tail=zd,u.take=Hd,u.takeRight=Vd,u.takeRightWhile=Gd,u.takeWhile=Kd,u.tap=cp,u.throttle=Zp,u.thru=ps,u.toArray=Wl,u.toPairs=Gl,u.toPairsIn=Kl,u.toPath=sy,u.toPlainObject=ql,u.transform=nm,u.unary=Xp,u.union=Qd,u.unionBy=Zd,u.unionWith=Xd,u.uniq=Jd,u.uniqBy=ep,u.uniqWith=tp,u.unset=rm,u.unzip=$i,u.unzipWith=Al,u.update=sm,u.updateWith=im,u.values=Vn,u.valuesIn=am,u.without=np,u.words=Xl,u.wrap=Jp,u.xor=rp,u.xorBy=sp,u.xorWith=ip,u.zip=ap,u.zipObject=op,u.zipObjectDeep=lp,u.zipWith=up,u.entries=Gl,u.entriesIn=Kl,u.extend=zl,u.extendWith=bs,Gi(u,u),u.add=ay,u.attempt=Jl,u.camelCase=cm,u.capitalize=Ql,u.ceil=oy,u.clamp=om,u.clone=tg,u.cloneDeep=rg,u.cloneDeepWith=sg,u.cloneWith=ng,u.conformsTo=ig,u.deburr=Zl,u.defaultTo=Bm,u.divide=ly,u.endsWith=fm,u.eq=Lt,u.escape=hm,u.escapeRegExp=dm,u.every=vp,u.find=wp,u.findIndex=wl,u.findKey=Og,u.findLast=Sp,u.findLastIndex=Sl,u.findLastKey=Dg,u.floor=uy,u.forEach=Tl,u.forEachRight=Nl,u.forIn=Lg,u.forInRight=$g,u.forOwn=Bg,u.forOwnRight=Yg,u.get=Ui,u.gt=ag,u.gte=og,u.has=Ug,u.hasIn=qi,u.head=Il,u.identity=ft,u.includes=Ep,u.indexOf=Sd,u.inRange=lm,u.invoke=Hg,u.isArguments=En,u.isArray=ue,u.isArrayBuffer=lg,u.isArrayLike=ut,u.isArrayLikeObject=De,u.isBoolean=ug,u.isBuffer=dn,u.isDate=cg,u.isElement=fg,u.isEmpty=hg,u.isEqual=dg,u.isEqualWith=pg,u.isError=ki,u.isFinite=gg,u.isFunction=en,u.isInteger=$l,u.isLength=_s,u.isMap=Bl,u.isMatch=mg,u.isMatchWith=yg,u.isNaN=xg,u.isNative=_g,u.isNil=bg,u.isNull=vg,u.isNumber=Yl,u.isObject=Me,u.isObjectLike=Oe,u.isPlainObject=vr,u.isRegExp=Wi,u.isSafeInteger=wg,u.isSet=kl,u.isString=vs,u.isSymbol=_t,u.isTypedArray=Hn,u.isUndefined=Sg,u.isWeakMap=jg,u.isWeakSet=Ig,u.join=Ed,u.kebabCase=pm,u.last=Nt,u.lastIndexOf=Td,u.lowerCase=gm,u.lowerFirst=mm,u.lt=Cg,u.lte=Ag,u.max=cy,u.maxBy=fy,u.mean=hy,u.meanBy=dy,u.min=py,u.minBy=gy,u.stubArray=Qi,u.stubFalse=Zi,u.stubObject=ey,u.stubString=ty,u.stubTrue=ny,u.multiply=my,u.nth=Nd,u.noConflict=Hm,u.noop=Ki,u.now=ms,u.pad=ym,u.padEnd=xm,u.padStart=_m,u.parseInt=vm,u.random=um,u.reduce=Fp,u.reduceRight=Mp,u.repeat=bm,u.replace=wm,u.result=Jg,u.round=yy,u.runInContext=g,u.sample=Dp,u.size=Bp,u.snakeCase=Sm,u.some=Yp,u.sortedIndex=Ld,u.sortedIndexBy=$d,u.sortedIndexOf=Bd,u.sortedLastIndex=Yd,u.sortedLastIndexBy=kd,u.sortedLastIndexOf=Wd,u.startCase=Im,u.startsWith=Cm,u.subtract=xy,u.sum=_y,u.sumBy=vy,u.template=Am,u.times=ry,u.toFinite=tn,u.toInteger=he,u.toLength=Ul,u.toLower=Em,u.toNumber=Rt,u.toSafeInteger=Eg,u.toString=je,u.toUpper=Tm,u.trim=Nm,u.trimEnd=Rm,u.trimStart=Pm,u.truncate=Fm,u.unescape=Mm,u.uniqueId=iy,u.upperCase=Om,u.upperFirst=zi,u.each=Tl,u.eachRight=Nl,u.first=Il,Gi(u,function(){var e={};return kt(u,function(t,n){Ce.call(u.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),u.VERSION=f,It(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),It(["drop","take"],function(e,t){_e.prototype[e]=function(n){n=n===s?1:ke(he(n),0);var r=this.__filtered__&&!t?new _e(this):this.clone();return r.__filtered__?r.__takeCount__=Ze(n,r.__takeCount__):r.__views__.push({size:Ze(n,ge),type:e+(r.__dir__<0?"Right":"")}),r},_e.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),It(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==H||n==U;_e.prototype[e]=function(o){var c=this.clone();return c.__iteratees__.push({iteratee:te(o,3),type:n}),c.__filtered__=c.__filtered__||r,c}}),It(["head","last"],function(e,t){var n="take"+(t?"Right":"");_e.prototype[e]=function(){return this[n](1).value()[0]}}),It(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");_e.prototype[e]=function(){return this.__filtered__?new _e(this):this[n](1)}}),_e.prototype.compact=function(){return this.filter(ft)},_e.prototype.find=function(e){return this.filter(e).head()},_e.prototype.findLast=function(e){return this.reverse().find(e)},_e.prototype.invokeMap=pe(function(e,t){return typeof e=="function"?new _e(this):this.map(function(n){return pr(n,e,t)})}),_e.prototype.reject=function(e){return this.filter(xs(te(e)))},_e.prototype.slice=function(e,t){e=he(e);var n=this;return n.__filtered__&&(e>0||t<0)?new _e(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==s&&(t=he(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},_e.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_e.prototype.toArray=function(){return this.take(ge)},kt(_e.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=u[r?"take"+(t=="last"?"Right":""):t],c=r||/^find/.test(t);o&&(u.prototype[t]=function(){var h=this.__wrapped__,d=r?[1]:arguments,m=h instanceof _e,C=d[0],E=m||ue(h),R=function(xe){var ve=o.apply(u,an([xe],d));return r&&z?ve[0]:ve};E&&n&&typeof C=="function"&&C.length!=1&&(m=E=!1);var z=this.__chain__,Q=!!this.__actions__.length,ne=c&&!z,de=m&&!Q;if(!c&&E){h=de?h:new _e(this);var re=e.apply(h,d);return re.__actions__.push({func:ps,args:[R],thisArg:s}),new At(re,z)}return ne&&de?e.apply(this,d):(re=this.thru(R),ne?r?re.value()[0]:re.value():re)})}),It(["pop","push","shift","sort","splice","unshift"],function(e){var t=Yr[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var o=arguments;if(r&&!this.__chain__){var c=this.value();return t.apply(ue(c)?c:[],o)}return this[n](function(h){return t.apply(ue(h)?h:[],o)})}}),kt(_e.prototype,function(e,t){var n=u[t];if(n){var r=n.name+"";Ce.call(kn,r)||(kn[r]=[]),kn[r].push({name:t,func:n})}}),kn[os(s,S).name]=[{name:"wrapper",func:s}],_e.prototype.clone=Mf,_e.prototype.reverse=Of,_e.prototype.value=Df,u.prototype.at=fp,u.prototype.chain=hp,u.prototype.commit=dp,u.prototype.next=pp,u.prototype.plant=mp,u.prototype.reverse=yp,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=xp,u.prototype.first=u.prototype.head,or&&(u.prototype[or]=gp),u},$n=df();vn?((vn.exports=$n)._=$n,Vs._=$n):He._=$n}).call(g0)}(Ir,Ir.exports)),Ir.exports}var y0=m0();const x0=(i="")=>{const[l,s]=B.useState(i),[f,p]=B.useState(!1),y=async N=>{if(!N)return{data:[]};console.log("Fetching customers with term:",N);try{const b=await We.get("/api/customers",{params:{populate:"*",filters:{name:{$containsi:N}},pagination:{pageSize:20},sort:["name:asc"]}});return console.log("API Response:",b.data),b.data}catch(b){throw console.error("API Error:",b),b}},{data:x,isLoading:A,error:T}=Au({queryKey:["customers",l],queryFn:()=>y(l),enabled:l.length>=1,staleTime:1e3*60*5,cacheTime:1e3*60*30}),P=B.useCallback(y0.debounce(N=>{console.log("Debounced search term:",N),s(N)},300),[]);return{searchTerm:l,setSearchTerm:P,isComposing:f,setIsComposing:p,results:(x==null?void 0:x.data)||[],isLoading:A,error:T}},Nr=({onSelect:i,placeholder:l="고객사를 입력하세요",initialValue:s="",disabled:f=!1,required:p=!1,error:y=null,className:x="",size:A="default",...T})=>{const{setSearchTerm:P,isComposing:N,setIsComposing:b,results:M,isLoading:_,error:j}=x0(s),[O,w]=B.useState(!1),[S,Z]=B.useState(s),Y=B.useRef(null);B.useEffect(()=>{const F=V=>{Y.current&&!Y.current.contains(V.target)&&w(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const ce=F=>{const V=F.target.value;Z(V),V?(P(V),w(!0)):w(!1)},fe=F=>{Z(F.name),i(F),w(!1)},Se={small:"h-9 text-sm",default:"h-10 text-base",large:"h-11 text-lg"};return a.jsxs("div",{ref:Y,className:`relative w-full ${x}`,children:[a.jsx(at,{...T,type:"text",value:S,onChange:ce,onCompositionStart:()=>b(!0),onCompositionEnd:F=>{b(!1),P(F.target.value)},onFocus:()=>S&&w(!0),placeholder:l,disabled:f,required:p,error:y,className:`w-full ${Se[A]||Se.default} 
          ${O?"rounded-b-none border-b-0":""}`}),y&&a.jsx(la,{type:"error",children:y}),O&&a.jsxs("div",{className:"absolute z-50 w-full bg-white border border-gray-200 border-t-0 rounded-b-md shadow-lg",children:[_&&a.jsx("div",{className:"p-3 text-sm text-gray-600 bg-gray-50",children:"검색중..."}),!_&&j&&a.jsx("div",{className:"p-3 text-sm text-red-700 bg-red-50",children:"검색 중 오류가 발생했습니다. 다시 시도해 주세요."}),!_&&!j&&M.length>0&&a.jsx("ul",{className:"max-h-60 overflow-y-auto",children:M.map(F=>a.jsxs("li",{onClick:()=>fe(F),className:"px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[a.jsx("div",{className:"text-sm text-gray-700",children:F.name}),F.code&&a.jsxs("div",{className:"text-xs text-gray-500",children:["코드: ",F.code]})]},F.id))}),!_&&!j&&M.length===0&&S&&a.jsx("div",{className:"p-3 text-center text-sm text-gray-500",children:"검색 결과가 없습니다."})]})]})},_0=i=>{const l=i.replace(/[^\d]/g,"");return l===""||!isNaN(l)?l:""},Qn=i=>i?Number(i).toLocaleString():"",Is={getSfaItems:async i=>{const l=Bt.stringify({filters:{sfa_classification:{id:{$eq:i}}},sort:["sort:asc"]},{encodeValuesOnly:!0});return(await We.get(`/api/sfa-items?${l}`)).data},getTeams:async()=>{const i=Bt.stringify({filters:{used:{$eq:!0}},sort:["sort:asc"]},{encodeValuesOnly:!0});return(await We.get(`/api/teams?${i}`)).data},getFiscalYears:async()=>(await We.get("/api/fiscal-years")).data,getStatus:async()=>(await We.get("/api/status")).data,getRegions:async()=>(await We.get("/api/regions")).data},Cr={TEAMS:"teams",FISCAL_YEARS:"fiscalYears",STATUS:"status",REGIONS:"regions",SFA_ITEMS:"sfaItems"},v0=(i,l={})=>Au({queryKey:[i],queryFn:(()=>{switch(i){case Cr.TEAMS:return Is.getTeams;case Cr.FISCAL_YEARS:return Is.getFiscalYears;case Cr.STATUS:return Is.getStatus;case Cr.REGIONS:return Is.getRegions;default:throw new Error(`Unknown data type: ${i}`)}})(),staleTime:5*60*1e3,cacheTime:30*60*1e3,...l}),b0=({items:i=[],onChange:l,onRemove:s,isSubmitting:f,errors:p={},itemsData:y,isItemsLoading:x})=>{const{data:A,isLoading:T}=v0(Cr.TEAMS);if(!(i!=null&&i.length))return null;const P=(N,b)=>p[`salesItems.${N}.${b}`];return a.jsx("div",{className:"space-y-4 px-5",children:i.map((N,b)=>{var M,_;return a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"grid grid-cols-[3fr,3fr,2fr,40px] gap-3 items-start",children:[a.jsxs(pt,{value:N.itemId||"",onChange:j=>{var S;const O=j.target.value,w=(S=y==null?void 0:y.data)==null?void 0:S.find(Z=>Z.id===parseInt(O));console.log(`***** : ${w}`),w&&l(b,{itemId:w.id,itemName:w.name})},disabled:f,className:P(b,"itemName")?"border-red-300":"",children:[a.jsx("option",{value:"",children:"매출품목 선택"}),(M=y==null?void 0:y.data)==null?void 0:M.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]}),a.jsxs(pt,{value:N.teamId||"",onChange:j=>{var S;const O=j.target.value,w=(S=A==null?void 0:A.data)==null?void 0:S.find(Z=>Z.id===parseInt(O));console.log(`***** : ${w}`),w&&l(b,{teamId:w.id,teamName:w.name})},disabled:f,className:P(b,"teamName")?"border-red-300":"",children:[a.jsx("option",{value:"",children:"사업부 선택"}),(_=A==null?void 0:A.data)==null?void 0:_.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]}),a.jsx(at,{type:"text",value:Qn(N.amount),onChange:j=>{const O=_0(j.target.value);l(b,"amount",O)},placeholder:"금액",disabled:f,className:`text-right ${P(b,"amount")?"border-red-300":""}`}),a.jsx("button",{type:"button",onClick:()=>s(b),disabled:f,className:`flex items-center justify-center p-2 rounded hover:bg-gray-100 transition-colors
                ${f?"opacity-50 cursor-not-allowed":"opacity-100"}`,children:a.jsx(Fu,{size:20,className:"text-gray-500"})})]})},b)})})},Sa={fetchCodebook:async i=>{const l={fields:["code","name","sort"],populate:{codetype:{fields:["type","name"]}},filters:{$and:[{used:{$eq:!0}},{codetype:{type:{$eq:i}}}]},sort:["sort:asc"],pagination:{start:0,limit:50}},s=Bt.stringify(l,{encodeValuesOnly:!0});return We.get(`/api/codebooks?${s}`)},getSfaItems:async i=>{const l=Bt.stringify({filters:{sfa_classification:{id:{$eq:i}}},sort:["sort:asc"]},{encodeValuesOnly:!0});return(await We.get(`/api/sfa-items?${l}`)).data},getTeams:async()=>{const i=Bt.stringify({filters:{used:{$eq:!0}},sort:["sort:asc"]},{encodeValuesOnly:!0});return(await We.get(`/api/teams?${i}`)).data}},Du=i=>{const[l,s]=B.useState({}),[f,p]=B.useState(!1),[y,x]=B.useState(null),A=async()=>{p(!0),x(null);try{const P=(await Promise.all(i.map(N=>Sa.fetchCodebook(N)))).reduce((N,b,M)=>(N[i[M]]=b.data,N),{});s(P)}catch(T){console.error("Failed to fetch codebook data:",T),x(T);const P=i.reduce((N,b)=>(N[b]=[],N),{});s(P)}finally{p(!1)}};return B.useEffect(()=>{A()},[JSON.stringify(i)]),{data:l,isLoading:f,error:y,refetch:A}},ja=({payments:i=[],onChange:l,onRemove:s,isSubmitting:f})=>{const[p,y]=B.useState({}),x=B.useRef(!1);B.useState({}),B.useRef([]);const{data:A,isLoading:T,error:P}=Du(["re_payment_method","sfa_percentage"]);B.useEffect(()=>{x.current||i.forEach((_,j)=>{const O=Number(_.amount)||0,w=Number(_.marginProfitValue)||0,S=_.isProfit?w:O*w/100;S!==Number(_.profitAmount)&&l(j,"profitAmount",S.toString())})},[i,l]);const N=(_,j)=>{const O=j.replace(/[^\d,]/g,"");y(S=>({...S,[_]:O}));const w=O.replace(/,/g,"");w!==i[_].amount&&(x.current=!0,l(_,"amount",w),setTimeout(()=>{x.current=!1},0))},b=(_,j,O)=>{if(["amount","marginProfitValue","isProfit"].includes(j)){const w=i[_],S=Number(j==="amount"?O:w.amount)||0,Z=Number(j==="marginProfitValue"?O:w.marginProfitValue)||0,Y=j==="isProfit"?O:w.isProfit;x.current=!0,l(_,j,O);const ce=Y?Z:S*Z/100;l(_,"profitAmount",ce.toString()),setTimeout(()=>{x.current=!1},0)}else l(_,j,O)},M=(_,j)=>{x.current=!0,l(_,"isConfirmed",j),j&&l(_,"probability","100"),setTimeout(()=>{x.current=!1},0)};return i!=null&&i.length?a.jsx("div",{className:"flex flex-col gap-6 px-5",children:i.map((_,j)=>{var O,w,S,Z;return a.jsxs("div",{className:"flex flex-col gap-3 p-4 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"grid grid-cols-[1.5fr,0.8fr,1fr,1fr,auto,0.5fr,1fr] gap-3 items-center",children:[a.jsxs(pt,{value:_.billingType,onChange:Y=>l(j,"billingType",Y.target.value),disabled:f||T,required:!0,children:[a.jsx("option",{value:"",children:"결제구분 선택"}),(w=(O=A==null?void 0:A.re_payment_method)==null?void 0:O.data)==null?void 0:w.map(Y=>a.jsx("option",{value:Y.code,children:Y.name},Y.id))]}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx(ya,{checked:_.isConfirmed,onChange:Y=>M(j,Y.target.checked),disabled:f,className:"w-4 h-4"}),a.jsx("span",{children:"확정여부"})]}),a.jsxs(pt,{value:_.probability,onChange:Y=>l(j,"probability",Y.target.value),disabled:f||T||_.isConfirmed,children:[a.jsx("option",{value:"",children:"매출확률 선택"}),(Z=(S=A==null?void 0:A.sfa_percentage)==null?void 0:S.data)==null?void 0:Z.map(Y=>a.jsx("option",{value:Y.code,children:Y.name},Y.id))]}),a.jsx(at,{type:"text",value:p[j]||Qn(_.amount||""),onChange:Y=>N(j,Y.target.value),placeholder:"매출액",disabled:f,className:"text-right"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(xa,{checked:_.isProfit,onChange:()=>b(j,"isProfit",!_.isProfit),disabled:f})}),a.jsx("div",{className:"text-center",children:_.isProfit?"이익":"마진"}),a.jsx(at,{type:"number",value:_.marginProfitValue,onChange:Y=>b(j,"marginProfitValue",Y.target.value),disabled:f})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"매출인식일자"}),a.jsx(at,{type:"date",value:_.recognitionDate,onChange:Y=>l(j,"recognitionDate",Y.target.value),disabled:f})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"결제일자"}),a.jsx(at,{type:"date",value:_.scheduledDate,onChange:Y=>l(j,"scheduledDate",Y.target.value),disabled:f})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"메모"}),a.jsx(at,{type:"text",value:_.memo,onChange:Y=>l(j,"memo",Y.target.value),disabled:f})]}),a.jsxs("div",{className:"grid grid-cols-[1fr,auto] gap-2 items-end",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"매출이익"}),a.jsx(at,{type:"text",value:Math.round(_.profitAmount),readOnly:!0,disabled:!0,className:"bg-gray-100 text-right"})]}),a.jsx("button",{type:"button",onClick:()=>s(j),className:"h-9 flex items-center justify-center",children:a.jsx(Fu,{size:20,className:"text-gray-500 cursor-pointer"})})]})]})]},_.id)})}):null},w0=({sfaSalesTypeData:i,sfaClassificationData:l})=>{var Je,H;const{formData:s,errors:f,isSubmitting:p,updateFormField:y,handleAddSalesItem:x,handleRemoveSalesItem:A,handleSalesItemChange:T,handleAddPayment:P,handleRemovePayment:N,handlePaymentChange:b,handleCustomerSelect:M,isItemsLoading:_,itemsData:j,paymentData:O,percentageData:w,isPaymentDataLoading:S,validateForm:Z,checkAmounts:Y,processSubmit:ce}=Ts(),[fe,Se]=B.useState(!1),[F,V]=B.useState(!1),[k,X]=B.useState(!1),ee=async D=>{D.preventDefault(),Z(fe)&&(Y()?await ce(fe,F):X(!0))},Ae=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-base",children:"사업부매출금액과 결제매출금액이 일치하지 않습니다."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:["• 사업부매출금액: ",Qn(s.itemAmount),"원"]}),a.jsxs("p",{children:["• 결제매출금액: ",Qn(s.paymentAmount),"원"]})]}),a.jsx("p",{className:"text-gray-600",children:"금액이 다르더라도 진행하시겠습니까?"})]});return a.jsxs(a.Fragment,{children:[a.jsxs(Es,{onSubmit:ee,className:"space-y-6",method:"POST",action:"#",children:[a.jsxs(wt,{direction:"horizontal",className:"gap-6",children:[a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{required:!0,children:"매출유형"}),a.jsxs(pt,{name:"sfaSalesType",value:s.sfaSalesType,onChange:y,disabled:p,error:f.sfaSalesType,children:[a.jsx("option",{value:"",children:"선택하세요"}),(Je=i==null?void 0:i.data)==null?void 0:Je.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]}),a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{required:!0,children:"매출구분"}),a.jsxs(pt,{name:"sfaClassification",value:s.sfaClassification,onChange:y,disabled:p,error:f.sfaClassification,children:[a.jsx("option",{value:"",children:"선택하세요"}),(H=l==null?void 0:l.data)==null?void 0:H.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]})]}),a.jsxs(wt,{direction:"horizontal",className:"gap-6",children:[a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{required:!0,children:"고객사"}),a.jsx(Nr,{onSelect:M,value:s.customer,error:f.customer,disabled:p,size:"small"})]}),a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{children:"매출파트너"}),a.jsxs(wt,{direction:"horizontal",children:[a.jsx(ya,{id:"hasPartner",checked:fe,onChange:D=>Se(D.target.checked),disabled:p}),fe&&a.jsx(Nr,{name:"sellingPartner",onSelect:D=>y({target:{name:"sellingPartner",value:D.id}}),value:s.SellingPrtner,disabled:p,size:"small"})]})]})]}),a.jsxs(wt,{direction:"horizontal",className:"gap-6",children:[a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{required:!0,children:"건명"}),a.jsx(at,{type:"text",name:"name",value:s.name,onChange:y,placeholder:"건명을 입력하세요",disabled:p})]}),a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{children:"프로젝트"}),a.jsx(xa,{checked:F,onChange:()=>V(!F),disabled:p})]})]}),a.jsxs(wt,{direction:"horizontal",className:"gap-6",children:[a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{children:"사업부 매출"}),a.jsxs(Ar,{children:[a.jsx(Fe,{type:"button",variant:"primary",onClick:x,disabled:p||s.salesByItems.length>=3,className:`w-full ${s.salesByItems.length>=3?"bg-gray-200 hover:bg-gray-200 text-gray-500 border-gray-200":""}`,children:"사업부매출등록"}),a.jsx(at,{type:"text",name:"itemAmount",value:Qn(s.itemAmount),disabled:!0,className:"text-right"})]}),f.itemAmount&&a.jsx(la,{type:"error",children:f.itemAmount})]}),a.jsxs(qe,{className:"flex-1",children:[a.jsx(ze,{children:"결제 매출"}),a.jsxs(Ar,{children:[a.jsx(Fe,{type:"button",variant:"primary",onClick:P,disabled:p||s.salesByPayments.length>=3,className:`w-full ${s.salesByPayments.length>=3?"bg-gray-200 hover:bg-gray-200 text-gray-500 border-gray-200":""}`,children:"결제매출등록"}),a.jsx(at,{type:"text",name:"paymentAmount",value:Qn(s.paymentAmount),disabled:!0,className:"text-right"})]}),f.paymentAmount&&a.jsx(la,{type:"error",children:f.paymentAmount})]})]}),a.jsx("div",{className:"w-full h-px bg-gray-200 my-6"}),a.jsx(b0,{items:s.salesByItems,onChange:T,onRemove:A,isSubmitting:p,errors:f,itemsData:j,isItemsLoading:_}),a.jsx("div",{className:"w-full h-px bg-gray-200 my-6"}),a.jsx(ja,{payments:s.salesByPayments,onChange:b,onRemove:N,isSubmitting:p,paymentData:O,percentageData:w,isPaymentDataLoading:S}),a.jsx(wt,{children:a.jsxs(qe,{fullWidth:!0,children:[a.jsx(ze,{children:"비고"}),a.jsx(Ty,{name:"description",value:s.description,onChange:y,placeholder:"비고 사항을 입력하세요",disabled:p})]})}),a.jsx(wt,{children:a.jsx(Fe,{type:"submit",variant:"primary",disabled:p,className:"w-full",onClick:D=>{D.preventDefault(),ee(D)},children:p?"처리중...":"저장"})})]}),a.jsx(Ry,{isOpen:k,onClose:()=>X(!1),title:"금액 불일치 확인",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(Fe,{variant:"outline",onClick:()=>X(!1),children:"아니오"}),a.jsx(Fe,{variant:"primary",onClick:async()=>{X(!1),await ce(fe,F)},children:"예"})]}),children:a.jsx(Ae,{})})]})},S0=({data:i})=>{var s,f,p,y,x;if(!i)return null;const l=((s=i.sfa_item_price)==null?void 0:s.map(A=>`${A.sfa_item_name}${A.team_name?` (${A.team_name})`:""}`).join(", "))||"-";return a.jsxs(ju,{children:[a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"건명"}),a.jsx(oe,{children:i.name||"-"})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"고객사/매출처"}),a.jsxs(oe,{children:[(f=i.customer)==null?void 0:f.name,i.selling_partner&&`/${i.selling_partner.name}`]}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출유형"}),a.jsx(oe,{children:((p=i.sfa_sales_type)==null?void 0:p.name)||"-"})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출구분"}),a.jsx(oe,{children:((y=i.sfa_classification)==null?void 0:y.name)||"-"}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"프로젝트여부"}),a.jsx(oe,{children:i.is_project?"YES":"NO"})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"결제 매출/이익"}),a.jsx(oe,{children:typeof i.total_price=="number"?i.total_price.toLocaleString():"-"}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"사업부 매출"}),a.jsx(oe,{children:typeof i.sales_profit=="number"?i.sales_profit.toLocaleString():"-"})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출확정여부"}),a.jsx(oe,{children:i.confirmed?"YES":"NO"}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"지원프로그램"}),a.jsx(oe,{grow:!0,children:((x=i.proposal)==null?void 0:x.name)||"-"})]}),a.jsxs(dt,{children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출품목"}),a.jsx(oe,{children:l})]}),a.jsxs(dt,{children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"비고"}),a.jsx(oe,{className:"flex-1",children:i.description||"-"})]})]})},j0=(i,l)=>{var s;return l!=null&&l.hasOwnProperty(i)?["customer","sfa_sales_type","sfa_classification","selling_partner"].includes(i)?((s=l[i])==null?void 0:s.id)??null:l[i]:null},I0=i=>{const{setDrawer:l}=xn(),[s,f]=B.useState({editField:null,currentValue:null,newValue:null}),[p,y]=B.useState({isEnabled:(i==null?void 0:i.has_partner)||!1,pendingState:(i==null?void 0:i.has_partner)||!1}),x=M=>{const _=j0(M,i);f({editField:M,currentValue:_,newValue:_})};B.useEffect(()=>{console.log("editState Changed:",{value:s.newValue})},[s]);const A=()=>{f({editField:null,currentValue:null,newValue:null})},T=async(M,_)=>{const{currentValue:j,newValue:O}=s,{isEnabled:w,pendingState:S}=p;!w&&S&&O?await yn.updateSfaBase(M,{..._,has_partner:!0}):w&&S&&j!==O?await yn.updateSfaBase(M,_):w&&!S?await yn.updateSfaBase(M,{has_partner:!1,selling_partner:null}):console.warn("Invalid partner update case:",{partnerState:p,editState:s,formData:_})},P=B.useCallback(async()=>{const{editField:M,currentValue:_,newValue:j}=s;if(!M)return;if(j===null||j===""){console.log(">>> newValue...null or 값 없음");return}const O=i.documentId,w={[M]:j};try{if(console.log("[SFA Edit]",{field:M,before:_,after:j}),M==="selling_partner"){await T(O,w),f({editField:null,currentValue:null,newValue:null});const S=await Pn.getSfaDetail(i.id);l({controlMode:"view",data:S.data[0]})}else{if(_!==j)await yn.updateSfaBase(O,w);else{console.log(">>> 기존 - 현재 값 동일");return}f({editField:null,currentValue:null,newValue:null});const S=await Pn.getSfaDetail(i.id);l({controlMode:"view",data:S.data[0]})}}catch(S){throw console.error("[SFA Edit] Save Error:",S),S}},[s,p]);return{editState:s,partnerState:p,startEditing:x,saveEditing:P,cancelEditing:A,handleValueChange:M=>{var j,O;console.log(`>>> handleValueChange >>> : ${M.target.value}`);const _=((j=M.target)==null?void 0:j.type)==="select-one"?M.target.value===""?null:Number(M.target.value):(((O=M.target)==null?void 0:O.type)==="customer-search",M.target.value);_===null||typeof _=="string"&&_.replace(/^\s+/,""),f(w=>({...w,newValue:_}))},handlePartnerStateChange:M=>{const _=M.target.checked;y(j=>({...j,pendingState:_})),console.log(`>>> handlepartnerStateChange >>> : ${_}`)}}},C0=({data:i,featureMode:l,sfaSalesTypeData:s,sfaClassificationData:f})=>{var O,w,S,Z,Y,ce,fe,Se;const{editState:p,partnerState:y,startEditing:x,saveEditing:A,cancelEditing:T,handleValueChange:P,handlePartnerStateChange:N}=I0(i),{editField:b}=p;console.log(`**** EditableSfaDetail's Data : ${i.documentId}`);const M={name:{type:"text",label:"건명",value:i==null?void 0:i.name,getValue:F=>(F==null?void 0:F.name)||"",editable:!0},sfa_sales_type:{type:"select",label:"매출유형",value:(O=i==null?void 0:i.sfa_sales_type)==null?void 0:O.id,getValue:F=>{var V;return((V=F==null?void 0:F.sfa_sales_type)==null?void 0:V.id)||""},getDisplayValue:F=>{var V;return((V=F==null?void 0:F.sfa_sales_type)==null?void 0:V.name)||"-"},editable:!0},sfa_classification:{type:"select",label:"매출구분",value:(w=i==null?void 0:i.sfa_classification)==null?void 0:w.id,getValue:F=>{var V;return((V=F==null?void 0:F.sfa_classification)==null?void 0:V.id)||""},getDisplayValue:F=>{var V;return((V=F==null?void 0:F.sfa_classification)==null?void 0:V.name)||"-"},editable:!0},customer:{type:"customer",label:"고객사",value:(S=i==null?void 0:i.customer)==null?void 0:S.id,getValue:F=>{var V;return((V=F==null?void 0:F.customer)==null?void 0:V.id)||""},getDisplayValue:F=>{var V;return((V=F==null?void 0:F.customer)==null?void 0:V.name)||"-"},editable:!0},is_project:{type:"switch",label:"프로젝트여부",value:i==null?void 0:i.is_project,getValue:F=>(F==null?void 0:F.is_project)||!1,getDisplayValue:F=>F!=null&&F.is_project?"YES":"NO",editable:!0},description:{type:"text",label:"비고",value:i==null?void 0:i.description,getValue:F=>(F==null?void 0:F.description)||"",editable:!0}},_=()=>a.jsxs("div",{className:"flex shrink-0 items-center gap-0.5",children:[a.jsx("button",{type:"button",onClick:()=>A(),className:"flex items-center justify-center h-7 w-7 rounded-sm hover:bg-green-100",children:a.jsx(d0,{className:"h-4 w-4 text-green-600",strokeWidth:2.5})}),a.jsx("button",{type:"button",onClick:T,className:"flex items-center justify-center h-7 w-7 rounded-sm hover:bg-red-100",children:a.jsx(Mu,{className:"h-4 w-4 text-red-600",strokeWidth:2.5})})]}),j=(F,V)=>{var ee,Ae,Je;const k=b===F;if(F==="selling_partner")return a.jsx("div",{className:"group relative flex items-center justify-between w-full h-8",children:k?a.jsxs("div",{className:"flex items-center w-full gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[a.jsx(ya,{id:"has_partner",checked:y.pendingState,onChange:H=>N(H)}),a.jsx(Nr,{value:p.newValue,onSelect:H=>{P({target:{value:H.id,type:"customer-search",name:H.name}})},disabled:!y.pendingState,size:"small"})]}),_()]}):a.jsxs("div",{className:"flex items-center w-full h-8",children:[a.jsx("span",{className:"flex-grow truncate",children:y.isEnabled?((ee=i==null?void 0:i.selling_partner)==null?void 0:ee.name)||"-":"NO"}),a.jsx("button",{type:"button",onClick:()=>x(F),className:`invisible group-hover:visible flex items-center justify-center \r
                         h-7 w-7 rounded-sm hover:bg-blue-100`,children:a.jsx(ia,{className:"h-4 w-4 text-blue-600",strokeWidth:2.5})})]})});if(F==="is_project")return a.jsx("div",{className:"group relative flex items-center justify-between w-full h-8",children:k?a.jsxs("div",{className:"flex items-center w-full gap-1",children:[a.jsx("div",{className:"flex-grow",children:a.jsx(xa,{checked:p.newValue,onChange:()=>P({target:{value:!p.newValue,type:"switch"}})})}),_()]}):a.jsxs("div",{className:"flex items-center w-full h-8",children:[a.jsx("span",{className:"flex-grow truncate",children:i!=null&&i.is_project?"YES":"NO"}),a.jsx("button",{type:"button",onClick:()=>x(F),className:`invisible group-hover:visible flex items-center justify-center \r
                           h-7 w-7 rounded-sm hover:bg-blue-100`,children:a.jsx(ia,{className:"h-4 w-4 text-blue-600",strokeWidth:2.5})})]})});const X=M[F];return X!=null&&X.editable?a.jsx("div",{className:"group relative flex items-center justify-between w-full h-8",children:k?a.jsxs("div",{className:"flex items-center w-full gap-1",children:[a.jsx("div",{className:"flex-grow",children:X.type==="select"&&X.label==="매출유형"?a.jsxs(pt,{value:p.newValue,onChange:P,className:"w-full h-8 text-sm",children:[a.jsx("option",{value:"",children:"선택하세요"}),(Ae=s==null?void 0:s.data)==null?void 0:Ae.map(H=>a.jsx("option",{value:H.id,children:H.name},H.id))]}):X.type==="select"&&X.label==="매출구분"?a.jsxs(pt,{value:p.newValue,onChange:P,className:"w-full h-8 text-sm",children:[a.jsx("option",{value:"",children:"선택하세요"}),(Je=f==null?void 0:f.data)==null?void 0:Je.map(H=>a.jsx("option",{value:H.id,children:H.name},H.id))]}):X.type==="customer"?a.jsx(Nr,{value:p.newValue,onSelect:H=>{P({target:{value:H.id,type:"customer-search",name:H.name}})},size:"small"}):a.jsx(at,{type:"text",value:p.newValue,onChange:P,className:"w-full h-8 text-sm"})}),_()]}):a.jsxs("div",{className:"flex items-center w-full h-8",children:[a.jsx("span",{className:"flex-grow truncate",children:V}),a.jsx("button",{type:"button",onClick:()=>x(F,M),className:`invisible group-hover:visible flex items-center justify-center \r
                          h-7 w-7 rounded-sm hover:bg-blue-100`,children:a.jsx(ia,{className:"h-4 w-4 text-blue-600",strokeWidth:2.5})})]})}):V};return a.jsxs(ju,{className:"text-sm",children:[a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"건명"}),a.jsx(oe,{className:"px-0.5",children:l!=="editBase"?i.name||"-":j("name",i.name||"-")}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출유형"}),a.jsx(oe,{className:"px-0.5",children:l!=="editBase"?((Z=i.sfa_sales_type)==null?void 0:Z.name)||"-":j("sfa_sales_type",M.sfa_sales_type.getDisplayValue(i))})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"고객사"}),a.jsx(oe,{className:"px-0.5",children:l!=="editBase"?(Y=i.customer)==null?void 0:Y.name:j("customer",M.customer.getDisplayValue(i))}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출파트너"}),a.jsx(oe,{className:"px-0.5",children:l!=="editBase"?((ce=i.selling_partner)==null?void 0:ce.name)||"-":j("selling_partner",null)})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"프로젝트여부"}),a.jsx(oe,{className:"px-0.5",children:l!=="editBase"?i.is_project?"YES":"NO":j("is_project",null)}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출구분"}),a.jsx(oe,{children:((fe=i.sfa_classification)==null?void 0:fe.name)||"-"})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"결제 매출/이익"}),a.jsx(oe,{children:typeof i.total_price=="number"?i.total_price.toLocaleString():"-"}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"사업부 매출"}),a.jsx(oe,{})]}),a.jsxs(dt,{equalItems:!0,children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출확정여부"}),a.jsx(oe,{children:i.confirmed?"YES":"NO"}),a.jsx(oe,{label:!0,width:"w-[140px]",children:"지원프로그램"}),a.jsx(oe,{grow:!0,children:((Se=i.proposal)==null?void 0:Se.name)||"-"})]}),a.jsxs(dt,{children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"매출품목"}),a.jsx(oe,{children:"-"})]}),a.jsxs(dt,{children:[a.jsx(oe,{label:!0,width:"w-[140px]",children:"비고"}),a.jsx(oe,{className:"flex-1 px-0.5",children:l!=="editBase"?i.description||"-":j("description",i.description||"-")})]})]})},A0=({data:i,controlMode:l,featureMode:s})=>{const f=Ts(),{formData:p,handleAddPayment:y,handlePaymentChange:x,handleRemovePayment:A,isSubmitting:T,errors:P,processPaymentSubmit:N,selectedPaymentIds:b,resetPaymentForm:M}=f,{validatePayments:_}=va(p),j=async S=>{S.preventDefault();const Z=i.id;console.log("***** form : ",p.salesByPayments),console.log("***** sfaId : ",Z);const Y=_(p.salesByPayments);console.log(`***** paymentErrors : ${Y}`),!(Y.length>0)&&await N("create",Z,Z)},O=async()=>{M()},w=()=>l==="edit"&&s==="addPayment"?a.jsx(Fe,{type:"button",variant:"primary",onClick:y,disabled:T||p.salesByPayments.length>=3,className:`
            w-full mb-6 px-4 h-8 text-base font-medium
            ${p.salesByPayments.length>=3?"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed":"bg-cyan-500 border-blue-300 text-gray-600 hover:bg-blue-100 hover:border-blue-400 hover:text-white"}
          `,children:"+ 결제매출추가"}):l==="edit"&&s==="editPayment"?a.jsx("div",{children:a.jsxs("h3",{className:"text-lg font-medium mb-3",children:["수정 결제매출 ID : ",b.id]})}):null;return a.jsxs(a.Fragment,{children:[w(),a.jsxs(Es,{onSubmit:j,className:"space-y-6",method:"POST",action:"#",children:[a.jsx(ja,{payments:p.salesByPayments,onChange:x,onRemove:A,isSubmitting:T}),a.jsx(wt,{children:p.salesByPayments.length!==0&&a.jsxs(wt,{direction:"horizontal",spacing:"md",className:"pt-4 border-t border-gray-200",children:[a.jsx(Fe,{type:"button",variant:"primary",disabled:T,className:"w-[120px] h-8 text-base font-medium bg-indigo-500 hover:bg-fuchsia-500",onClick:O,children:"취소"}),a.jsx(Fe,{type:"submit",variant:"primary",disabled:T,className:"w-[120px] h-8 text-base font-medium bg-indigo-500 hover:bg-fuchsia-500",onClick:S=>{S.preventDefault(),j(S)},children:T?"처리중...":s==="addPayment"?"저장":"수정"})]})})]})]})},E0=({data:i,onView:l,controlMode:s="view",featureMode:f,handlePaymentSelection:p})=>{const y=()=>s==="view"?a.jsx(me.Th,{children:"Action"}):a.jsx(me.Th,{children:"Action"}),x=(A,T)=>s==="view"?a.jsx(me.Td,{align:"center",children:a.jsx(Fe,{size:"sm",variant:"outline",onClick:()=>l==null?void 0:l({documentId:A,id:T}),children:"view"})}):f==="editPayment"?a.jsx(me.Td,{align:"center",children:a.jsx(Fe,{size:"sm",variant:"outline",onClick:()=>p==null?void 0:p({documentId:A,id:T}),children:"edit"})}):"";return!Array.isArray(i)||i.length===0?a.jsxs("div",{children:[a.jsx(me.Title,{children:"매출 내역"}),a.jsxs(me,{children:[a.jsx(me.Head,{children:a.jsxs(me.Row,{children:[a.jsx(me.Th,{children:"ID"}),a.jsx(me.Th,{children:"구분"}),a.jsx(me.Th,{children:"확정여부"}),a.jsx(me.Th,{children:"확률"}),a.jsx(me.Th,{children:"매출액"}),a.jsx(me.Th,{children:"매출이익"}),a.jsx(me.Th,{children:"매출인식일"}),y()]})}),a.jsx(me.Body,{children:a.jsx(me.Row,{children:a.jsx(me.Td,{colSpan:7,className:"text-center",children:"등록된 매출 내역이 없습니다."})})})]})]}):a.jsxs("div",{children:[a.jsx(me.Title,{children:"매출 내역"}),a.jsxs(me,{children:[a.jsx(me.Head,{children:a.jsxs(me.Row,{children:[a.jsx(me.Th,{children:"ID"}),a.jsx(me.Th,{children:"매출구분"}),a.jsx(me.Th,{children:"확정여부"}),a.jsx(me.Th,{children:"확률"}),a.jsx(me.Th,{children:"매출액"}),a.jsx(me.Th,{children:"매출이익"}),a.jsx(me.Th,{children:"매출인식일"}),y()]})}),a.jsx(me.Body,{children:i.map((A,T)=>a.jsxs(me.Row,{children:[a.jsx(me.Td,{align:"center",children:A.id||"-"}),a.jsx(me.Td,{align:"center",children:A.billing_type||"-"}),a.jsx(me.Td,{align:"center",children:A.is_confirmed?"YES":"NO"}),a.jsx(me.Td,{align:"center",children:A.probability||"-"}),a.jsx(me.Td,{align:"right",children:typeof A.amount=="number"?A.amount.toLocaleString():"-"}),a.jsx(me.Td,{align:"right",children:typeof A.profit_amount=="number"?A.profit_amount.toLocaleString():"-"}),a.jsx(me.Td,{align:"center",children:A.recognition_date||"-"}),x(A.documentId,A.id)]},A.id||T))})]})]})},vu=({data:i,controlMode:l,featureMode:s})=>{const[f,p]=B.useState({documentId:null,id:null}),{formData:y,isSubmitting:x,handlePaymentChange:A,processPaymentSubmit:T,togglePaymentSelection:P,resetPaymentForm:N}=Ts(),{validatePayments:b}=va(y),M=async S=>{S.preventDefault();const Z=i.id,Y=b(y.salesByPayments);console.log(`***** paymentErrors : ${Y}`),!(Y.length>0)&&await T("update",f.id,Z)},_=()=>{p({documentId:null,id:null}),N()},j=S=>{console.log(">> handlepayment selection : ",S),p(S),P(S)},O=S=>{console.log("View payment:",S)};console.log(">>sfapaymentsection formdata : ",y),console.log(`controlmode ${l}, feturemode ${s}`);const w=()=>l==="edit"&&s==="editPayment"?a.jsxs(a.Fragment,{children:[a.jsxs("h3",{className:"text-lg font-medium mb-3",children:["수정 결제매출 ID : ",(f==null?void 0:f.id)||""]}),a.jsxs(Es,{onSubmit:M,className:"space-y-6",method:"PUT",action:"#",children:[a.jsx(ja,{payments:y.salesByPayments,onChange:A,isSubmitting:x}),a.jsx(wt,{children:y.salesByPayments.length!==0&&a.jsxs(wt,{direction:"horizontal",spacing:"md",className:"pt-4 border-t border-gray-200",children:[a.jsx(Fe,{type:"button",variant:"primary",disabled:x,className:"w-[120px] h-8 text-base font-medium bg-indigo-500 hover:bg-fuchsia-500",onClick:_,children:"취소"}),a.jsx(Fe,{type:"submit",variant:"primary",disabled:x,className:"w-[120px] h-8 text-base font-medium bg-indigo-500 hover:bg-fuchsia-500",onClick:S=>{S.preventDefault(),M(S)},children:x?"처리중...":s==="addPayment"?"저장":"수정"})]})})]})]}):null;return a.jsxs(a.Fragment,{children:[w(),a.jsx("div",{className:"space-y-6",children:a.jsx(E0,{data:i.sfa_by_payments||[],controlMode:l,featureMode:s,onView:O,handlePaymentSelection:j})})]})},T0=()=>{const i=au(ou("sfa_sales_type")),l=au(ou("sfa_classification")),{togglePaymentSelection:s,resetPaymentForm:f}=Ts(),{drawerState:p,setDrawer:y,setDrawerClose:x}=xn(),{visible:A,controlMode:T,featureMode:P,data:N}=p,b=[{key:"view",label:"View",active:T==="view",onClick:()=>{y({controlMode:"view"})}},{key:"edit",label:"Edit",active:T==="edit",onClick:()=>{y({controlMode:"edit"})}}],M=T==="edit"?[{key:"editBase",label:"기본정보수정",active:P==="editBase",onClick:()=>{y({featureMode:"editBase"}),f()}},{key:"addPayment",label:"결제매출등록",active:P==="addPayment",onClick:()=>{y({featureMode:"addPayment"}),f()}},{key:"editPayment",label:"결제매출수정",active:P==="editPayment",onClick:()=>{y({featureMode:"editPayment"}),f()}}]:[],_=()=>T&&{add:"매출등록",view:"SFA 상세정보",edit:"SFA 수정"}[T]||"",j=()=>a.jsx(w0,{sfaSalesTypeData:i,sfaClassificationData:l}),O=({data:S})=>a.jsxs(a.Fragment,{children:[a.jsx(S0,{data:S}),a.jsx(vu,{data:S,controlMode:T,featureMode:P,togglePaymentSelection:s})]}),w=({data:S})=>a.jsxs(a.Fragment,{children:[a.jsx("h1",{children:"기본정보수정"}),a.jsx(C0,{data:S,featureMode:P,sfaSalesTypeData:i,sfaClassificationData:l}),P==="addPayment"&&a.jsx(A0,{data:S,controlMode:T,featureMode:P}),a.jsx(vu,{data:S,controlMode:T,featureMode:P,togglePaymentSelection:s})]});return a.jsxs(Ou,{visible:A,title:_(),onClose:x,menu:a.jsx(p0,{controlMenus:b,functionMenus:M}),width:"900px",enableOverlayClick:!1,controlMode:T,children:[T==="add"&&a.jsx(j,{}),T==="view"&&a.jsx(O,{data:N}),T==="edit"&&a.jsx(w,{data:N})]})},Tr=({type:i="empty",message:l,className:s=""})=>{const f={empty:"text-gray-500 bg-white",loading:"text-gray-500 bg-white",error:"text-red-600 bg-red-50"};return a.jsx("div",{className:`p-12 text-center ${f[i]} ${s}`,children:l||N0(i)})},N0=i=>({empty:"데이터가 없습니다.",loading:"데이터를 불러오는 중...",error:"오류가 발생했습니다."})[i],rt=({children:i,onClick:l,colSpan:s,rowSpan:f})=>a.jsx("th",{onClick:l,colSpan:s,rowSpan:f,className:`
      bg-gray-100 p-3 text-center border border-gray-200 
      font-semibold text-sm cursor-pointer
      hover:bg-gray-200 transition-colors
    `,children:i}),st=({children:i,onClick:l,isProbability:s})=>a.jsx("td",{onClick:l,className:`
      p-3 border border-gray-200 text-sm cursor-pointer
      ${s?"bg-gray-50 text-center font-medium":"text-right"}
      hover:bg-gray-100 transition-colors
    `,children:i}),R0=()=>{const[i,l]=B.useState({}),[s,f]=B.useState(!0),[p,y]=B.useState(null),[x,A]=B.useState({yearMonth:null,probability:null}),{updateMonthlyFilter:T}=Ru(),N=(()=>{const w=Ke(),S=[];for(let Z=-1;Z<=2;Z++){const Y=w.add(Z,"month");S.push({month:Y.format("MM"),year:Y.year()})}return S})(),b=["confirmed","100","90","70","50"],M=w=>{if(!w)return{};const S={};return b.forEach(Z=>{const Y=w[Z];Y&&(S[Z]={revenue:parseInt(Y.revenue||0),profit:parseInt(Y.profit||0)})}),S},_=(w,S)=>{const Z=`${w.year}-${w.month}`;x.yearMonth===Z&&x.probability===S||(A({yearMonth:Z,probability:S}),T(Z,S))},j=w=>{const S=`${w.year}-${w.month}`;x.yearMonth===S&&x.probability===null||(A({yearMonth:S,probability:null}),T(S,null))};if(B.useEffect(()=>{(async()=>{f(!0),y(null);try{const S={};for(const{year:Z,month:Y}of N)try{const ce=Ke().year(Z).month(Y-1),fe=ce.startOf("month").format("YYYY-MM-DD"),Se=ce.endOf("month").format("YYYY-MM-DD"),F=await Pn.getSfaMonthStats(fe,Se);if(F){const V=M(F);Object.keys(V).length>0&&(S[Y]=V)}}catch(ce){console.error(`Error fetching data for ${Z}-${Y}:`,ce),S[Y]={}}l(S)}catch{y("통계 데이터를 불러오는데 실패했습니다.")}finally{f(!1)}})()},[]),s)return a.jsx(Tr,{type:"loading"});if(p)return a.jsx(Tr,{type:"error",message:p});const O=w=>a.jsxs("tr",{children:[a.jsx(st,{isProbability:!0,onClick:()=>_(N[0],w),children:w}),N.map((S,Z)=>{const Y=i[S.month],ce=(Y==null?void 0:Y[w])||{revenue:0,profit:0};return Z===0?w==="confirmed"?a.jsxs(Gn.Fragment,{children:[a.jsx(st,{onClick:()=>_(S,w),children:ce.revenue.toLocaleString()}),a.jsx(st,{onClick:()=>_(S,w),children:ce.profit.toLocaleString()})]},`${S.month}-prev`):a.jsxs(Gn.Fragment,{children:[a.jsx(st,{onClick:()=>_(S,w),children:"-"}),a.jsx(st,{onClick:()=>_(S,w),children:"-"})]},`${S.month}-prev`):Z===1?w==="confirmed"?a.jsxs(Gn.Fragment,{children:[a.jsx(st,{onClick:()=>_(S,w),children:"-"}),a.jsx(st,{onClick:()=>_(S,w),children:"-"}),a.jsx(st,{onClick:()=>_(S,w),children:ce.revenue.toLocaleString()}),a.jsx(st,{onClick:()=>_(S,w),children:ce.profit.toLocaleString()})]},`${S.month}-current`):a.jsxs(Gn.Fragment,{children:[a.jsx(st,{onClick:()=>_(S,w),children:ce.revenue.toLocaleString()}),a.jsx(st,{onClick:()=>_(S,w),children:ce.profit.toLocaleString()}),a.jsx(st,{onClick:()=>_(S,w),children:"-"}),a.jsx(st,{onClick:()=>_(S,w),children:"-"})]},`${S.month}-current`):a.jsxs(Gn.Fragment,{children:[a.jsx(st,{onClick:()=>_(S,w),children:ce.revenue.toLocaleString()}),a.jsx(st,{onClick:()=>_(S,w),children:ce.profit.toLocaleString()})]},`${S.month}-future`)})]},w);return a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse text-sm my-5",children:[a.jsxs("thead",{children:[a.jsxs("tr",{children:[a.jsx(rt,{rowSpan:"2",children:"확률"}),a.jsxs(rt,{colSpan:"2",onClick:()=>j(N[0]),children:["전월(",N[0].year,".",N[0].month,")"]}),a.jsxs(rt,{colSpan:"4",onClick:()=>j(N[1]),children:["당월(",N[1].year,".",N[1].month,")"]}),a.jsxs(rt,{colSpan:"2",onClick:()=>j(N[2]),children:["익월(",N[2].year,".",N[2].month,")"]}),a.jsxs(rt,{colSpan:"2",onClick:()=>j(N[3]),children:["익익월(",N[3].year,".",N[3].month,")"]})]}),a.jsxs("tr",{children:[a.jsx(rt,{children:"실제매출액"}),a.jsx(rt,{children:"실제매출이익"}),a.jsx(rt,{children:"예상매출액"}),a.jsx(rt,{children:"예상매출이익"}),a.jsx(rt,{children:"실제매출액"}),a.jsx(rt,{children:"실제매출이익"}),a.jsx(rt,{children:"예상매출액"}),a.jsx(rt,{children:"예상매출이익"}),a.jsx(rt,{children:"예상매출액"}),a.jsx(rt,{children:"예상매출이익"})]})]}),a.jsx("tbody",{children:b.map(O)})]})})},P0=({children:i,className:l="",...s})=>a.jsx("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden ${l}`,...s,children:i}),F0=({current:i,pageSize:l,total:s,onPageChange:f,onPageSizeChange:p,className:y=""})=>{const x=Math.ceil(s/l);return a.jsxs("div",{className:`flex justify-between items-center p-4 border-t border-gray-200 ${y}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"페이지당 행:"}),a.jsxs("select",{className:"text-sm border border-gray-300 rounded-md px-2 py-1",value:l,onChange:A=>p(Number(A.target.value)),children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Fe,{variant:"outline",size:"sm",disabled:i===1,onClick:()=>f(i-1),children:"이전"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[i," / ",x," 페이지 (총 ",s,"개)"]}),a.jsx(Fe,{variant:"outline",size:"sm",disabled:i===x,onClick:()=>f(i+1),children:"다음"})]})]})},M0=[{key:"no",title:"No",align:"center"},{key:"confirmed",title:"확정여부",align:"center"},{key:"percentage",title:"확률",align:"center"},{key:"customer",title:"고객사/매출처",align:"left"},{key:"name",title:"건명",align:"left"},{key:"payment",title:"결제방법",align:"center"},{key:"classification",title:"매출구분",align:"center"},{key:"item",title:"매출품목",align:"center"},{key:"team",title:"사업부",align:"center"},{key:"revenue",title:"매출액",align:"right"},{key:"profit",title:"매출이익",align:"right"},{key:"date",title:"매출인식일",align:"center"},{key:"action",title:"Action",align:"center"}],O0=({item:i,index:l,pageSize:s,currentPage:f})=>{var A,T,P,N,b,M;const p=(f-1)*s+l+1,y=((A=i.sfa)==null?void 0:A.sfa_item_price)||[],{fetchSfaDetail:x}=xn();return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:p}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:i.is_confirmed?"YES":"NO"}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:i.probability||"-"}),a.jsx("td",{className:"px-3 py-2 text-sm",children:((P=(T=i.sfa)==null?void 0:T.customer)==null?void 0:P.name)||"-"}),a.jsx("td",{className:"px-3 py-2 text-sm",children:(N=i.sfa)==null?void 0:N.name}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:i.billing_type||"-"}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:((M=(b=i.sfa)==null?void 0:b.sfa_classification)==null?void 0:M.name)||"-"}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:y.map(_=>_.sfa_item_name).join(", ")||"-"}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:y.map(_=>_.team_name).join(", ")||"-"}),a.jsx("td",{className:"px-3 py-2 text-right text-sm font-mono",children:new Intl.NumberFormat("ko-KR").format(i.amount)}),a.jsx("td",{className:"px-3 py-2 text-right text-sm font-mono",children:new Intl.NumberFormat("ko-KR").format(i.profit_amount)}),a.jsx("td",{className:"px-3 py-2 text-center text-sm",children:i.recognition_date}),a.jsx("td",{className:"px-3 py-2 text-center",children:a.jsx(Fe,{variant:"outline",size:"sm",onClick:()=>x(i.sfa.id),children:"View"})})]})},D0=()=>{const{sfaData:i,loading:l,error:s,pagination:f,setPage:p,setPageSize:y}=xn();return l?a.jsx(Tr,{type:"loading"}):s?a.jsx(Tr,{type:"error",message:s}):i!=null&&i.length?a.jsxs(P0,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsx("tr",{className:"bg-gray-50 border-y border-gray-200",children:M0.map(x=>a.jsx("th",{className:`px-3 py-2 text-sm font-semibold text-gray-700 whitespace-nowrap
                    ${x.align==="center"&&"text-center"}
                    ${x.align==="right"&&"text-right"}
                  `,children:x.title},x.key))})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map((x,A)=>a.jsx(O0,{item:x,index:A,pageSize:f.pageSize,currentPage:f.current},x.id))})]})}),a.jsx(F0,{current:f.current,pageSize:f.pageSize,total:f.total,onPageChange:p,onPageSizeChange:y})]}):a.jsx(Tr,{type:"empty"})},L0=()=>{const{setLayout:i,setDrawer:l,resetFilters:s}=xn();return a.jsxs(wt,{direction:"horizontal",spacing:"sm",className:"mb-5",children:[a.jsx(Fe,{variant:"outline",onClick:()=>l({visible:!0,controlMode:"add"}),children:"매출등록"}),a.jsx(Fe,{variant:"outline",onClick:()=>i("search"),children:"상세조회"}),a.jsx(Fe,{variant:"outline",onClick:()=>i("forecast"),children:"매출예측"}),a.jsx(Fe,{variant:"outline",onClick:()=>{s(),i("default")},children:"초기화"})]})},$0=()=>{const[i,l]=B.useState([]),[s,f]=B.useState(!1),[p,y]=B.useState(null),x=async()=>{f(!0),y(null);try{const A=await Sa.getTeams();l(A)}catch(A){console.error("Failed to fetch teams:",A),y(A),l([])}finally{f(!1)}};return B.useEffect(()=>{x()},[]),{data:i,isLoading:s,error:p,refetch:x}},B0=i=>{const[l,s]=B.useState([]),[f,p]=B.useState(!1),[y,x]=B.useState(null),A=async T=>{if(!T){s([]);return}p(!0),x(null);try{const P=await Sa.getSfaItems(T);s(P)}catch(P){console.error("Failed to fetch SFA items:",P),x(P),s([])}finally{p(!1)}};return B.useEffect(()=>{A(i)},[i]),{data:l,isLoading:f,error:y,refetch:A}},Y0=()=>{var O,w,S,Z,Y,ce,fe,Se,F,V;const{updateDetailFilter:i}=Ru(),{data:l,isLoading:s,error:f}=Du(["re_payment_method","sfa_percentage","sfa_sales_type","sfa_classification"]),p={name:"",customer:"",sfaSalesType:"",sfaClassification:"",salesItem:"",team:"",billingType:"",probability:""},[y,x]=B.useState({dateRange:{startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},...p}),{data:A,isLoading:T}=$0(),{data:P,refetch:N}=B0();B.useEffect(()=>{y.sfaClassification&&N(y.sfaClassification)},[y.sfaClassification]);const b=k=>{console.log(">> handleInputChange : ",k.target.value);const{name:X,value:ee}=k.target;x(X==="startDate"||X==="endDate"?Ae=>({...Ae,dateRange:{...Ae.dateRange,[X]:ee}}):X==="sfaClassification"?Ae=>({...Ae,salesItem:"",[X]:ee}):Ae=>({...Ae,[X]:ee}))},M=k=>{x(X=>({...X,customer:k.id}))},_=k=>{k.preventDefault(),i(y)},j=()=>{x({dateRange:{startDate:Ke().startOf("month").format("YYYY-MM-DD"),endDate:Ke().endOf("month").format("YYYY-MM-DD")},...p})};return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-5 mb-5",children:a.jsxs(Es,{onSubmit:_,className:"space-y-4",children:[a.jsxs(Ar,{direction:"horizontal",spacing:"lg",children:[a.jsxs(qe,{children:[a.jsx(ze,{children:"기준일자"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(at,{type:"date",name:"startDate",value:y.dateRange.startDate,onChange:b}),a.jsx("span",{className:"text-gray-500",children:"~"}),a.jsx(at,{type:"date",name:"endDate",value:y.dateRange.endDate,onChange:b})]})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"매출구분"}),a.jsxs(pt,{name:"sfaClassification",value:y.sfaClassification,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),(w=(O=l==null?void 0:l.sfa_classification)==null?void 0:O.data)==null?void 0:w.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"매출유형"}),a.jsxs(pt,{name:"sfaSalesType",value:y.sfaSalesType,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),(Z=(S=l==null?void 0:l.sfa_sales_type)==null?void 0:S.data)==null?void 0:Z.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),a.jsxs(Ar,{direction:"horizontal",spacing:"lg",children:[a.jsxs(qe,{children:[a.jsx(ze,{children:"매출처"}),a.jsx(Nr,{value:y.customer,onSelect:M,size:"small"})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"매출품목"}),a.jsxs(pt,{name:"salesItem",value:y.salesItem,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),(Y=P==null?void 0:P.data)==null?void 0:Y.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"확률"}),a.jsxs(pt,{name:"probability",value:y.probability,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),a.jsx("option",{value:"confirmed",children:"확정"}),(fe=(ce=l.sfa_percentage)==null?void 0:ce.data)==null?void 0:fe.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsxs(Ar,{direction:"horizontal",spacing:"lg",children:[a.jsxs(qe,{children:[a.jsx(ze,{children:"건명"}),a.jsx(at,{type:"text",name:"name",value:y.name,onChange:b,placeholder:"건명 입력"})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"사업부"}),a.jsxs(pt,{name:"team",value:y.team,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),(Se=A==null?void 0:A.data)==null?void 0:Se.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]}),a.jsxs(qe,{children:[a.jsx(ze,{children:"결제유형"}),a.jsxs(pt,{name:"billingType",value:y.billingType,onChange:b,children:[a.jsx("option",{value:"",children:"선택하세요"}),(V=(F=l.re_payment_method)==null?void 0:F.data)==null?void 0:V.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsxs(wt,{direction:"horizontal",className:"justify-center",children:[a.jsx(Fe,{type:"button",variant:"primary",onClick:_,children:"검색"}),a.jsx(Fe,{type:"button",variant:"outline",onClick:j,children:"초기화"})]})]})})},k0=()=>{const{pageLayout:i,drawerState:l}=xn(),{components:s}=i;return a.jsxs(a.Fragment,{children:[a.jsxs(Ny,{children:[a.jsx(L0,{}),s.searchForm&&a.jsx(Y0,{}),s.monthlyStatus&&a.jsx(R0,{}),s.sfaTable&&a.jsx(D0,{})]}),l.visible&&a.jsx(T0,{})]})},q0=()=>a.jsx(Qy,{children:a.jsx(k0,{})});export{q0 as default};
